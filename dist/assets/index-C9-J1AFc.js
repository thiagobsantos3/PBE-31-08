var JC=Object.defineProperty;var XC=(e,t,r)=>t in e?JC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wh=(e,t,r)=>XC(e,typeof t!="symbol"?t+"":t,r);function ZC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var g1={exports:{}},Vd={},x1={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),tA=Symbol.for("react.portal"),rA=Symbol.for("react.fragment"),nA=Symbol.for("react.strict_mode"),sA=Symbol.for("react.profiler"),iA=Symbol.for("react.provider"),aA=Symbol.for("react.context"),oA=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),cA=Symbol.for("react.memo"),uA=Symbol.for("react.lazy"),Ty=Symbol.iterator;function dA(e){return e===null||typeof e!="object"?null:(e=Ty&&e[Ty]||e["@@iterator"],typeof e=="function"?e:null)}var y1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v1=Object.assign,b1={};function vo(e,t,r){this.props=e,this.context=t,this.refs=b1,this.updater=r||y1}vo.prototype.isReactComponent={};vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function w1(){}w1.prototype=vo.prototype;function Ig(e,t,r){this.props=e,this.context=t,this.refs=b1,this.updater=r||y1}var $g=Ig.prototype=new w1;$g.constructor=Ig;v1($g,vo.prototype);$g.isPureReactComponent=!0;var Oy=Array.isArray,j1=Object.prototype.hasOwnProperty,zg={current:null},_1={key:!0,ref:!0,__self:!0,__source:!0};function N1(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)j1.call(t,n)&&!_1.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:e,key:i,ref:o,props:s,_owner:zg.current}}function fA(e,t){return{$$typeof:dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lg(e){return typeof e=="object"&&e!==null&&e.$$typeof===dc}function hA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Dy=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hA(""+e.key):t.toString(36)}function pu(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dc:case tA:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jh(o,0):n,Oy(s)?(r="",e!=null&&(r=e.replace(Dy,"$&/")+"/"),pu(s,t,r,"",function(u){return u})):s!=null&&(Lg(s)&&(s=fA(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dy,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Oy(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jh(i,l);o+=pu(i,t,r,c,s)}else if(c=dA(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jh(i,l++),o+=pu(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(e,t,r){if(e==null)return e;var n=[],s=0;return pu(e,n,"","",function(i){return t.call(r,i,s++)}),n}function mA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},gu={transition:null},pA={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:gu,ReactCurrentOwner:zg};function S1(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Dc,forEach:function(e,t,r){Dc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Lg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=vo;ye.Fragment=rA;ye.Profiler=sA;ye.PureComponent=Ig;ye.StrictMode=nA;ye.Suspense=lA;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pA;ye.act=S1;ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=v1({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=zg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j1.call(t,c)&&!_1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:e.type,key:s,ref:i,props:n,_owner:o}};ye.createContext=function(e){return e={$$typeof:aA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iA,_context:e},e.Consumer=e};ye.createElement=N1;ye.createFactory=function(e){var t=N1.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:oA,render:e}};ye.isValidElement=Lg;ye.lazy=function(e){return{$$typeof:uA,_payload:{_status:-1,_result:e},_init:mA}};ye.memo=function(e,t){return{$$typeof:cA,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=gu.transition;gu.transition={};try{e()}finally{gu.transition=t}};ye.unstable_act=S1;ye.useCallback=function(e,t){return ir.current.useCallback(e,t)};ye.useContext=function(e){return ir.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};ye.useEffect=function(e,t){return ir.current.useEffect(e,t)};ye.useId=function(){return ir.current.useId()};ye.useImperativeHandle=function(e,t,r){return ir.current.useImperativeHandle(e,t,r)};ye.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return ir.current.useMemo(e,t)};ye.useReducer=function(e,t,r){return ir.current.useReducer(e,t,r)};ye.useRef=function(e){return ir.current.useRef(e)};ye.useState=function(e){return ir.current.useState(e)};ye.useSyncExternalStore=function(e,t,r){return ir.current.useSyncExternalStore(e,t,r)};ye.useTransition=function(){return ir.current.useTransition()};ye.version="18.3.1";x1.exports=ye;var b=x1.exports;const ae=Qn(b),gA=ZC({__proto__:null,default:ae},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA=b,yA=Symbol.for("react.element"),vA=Symbol.for("react.fragment"),bA=Object.prototype.hasOwnProperty,wA=xA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jA={key:!0,ref:!0,__self:!0,__source:!0};function k1(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)bA.call(t,n)&&!jA.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:yA,type:e,key:i,ref:o,props:s,_owner:wA.current}}Vd.Fragment=vA;Vd.jsx=k1;Vd.jsxs=k1;g1.exports=Vd;var a=g1.exports,P1={exports:{}},Lr={},E1={exports:{}},C1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,T){var A=C.length;C.push(T);e:for(;0<A;){var L=A-1>>>1,q=C[L];if(0<s(q,T))C[L]=T,C[A]=q,A=L;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var T=C[0],A=C.pop();if(A!==T){C[0]=A;e:for(var L=0,q=C.length,ee=q>>>1;L<ee;){var ne=2*(L+1)-1,Y=C[ne],ve=ne+1,je=C[ve];if(0>s(Y,A))ve<q&&0>s(je,Y)?(C[L]=je,C[ve]=A,L=ve):(C[L]=Y,C[ne]=A,L=ne);else if(ve<q&&0>s(je,A))C[L]=je,C[ve]=A,L=ve;else break e}}return T}function s(C,T){var A=C.sortIndex-T.sortIndex;return A!==0?A:C.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,p=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=C)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function _(C){if(x=!1,w(C),!p)if(r(c)!==null)p=!0,F(j);else{var T=r(u);T!==null&&I(_,T.startTime-C)}}function j(C,T){p=!1,x&&(x=!1,v(k),k=-1),m=!0;var A=h;try{for(w(T),f=r(c);f!==null&&(!(f.expirationTime>T)||C&&!D());){var L=f.callback;if(typeof L=="function"){f.callback=null,h=f.priorityLevel;var q=L(f.expirationTime<=T);T=e.unstable_now(),typeof q=="function"?f.callback=q:f===r(c)&&n(c),w(T)}else n(c);f=r(c)}if(f!==null)var ee=!0;else{var ne=r(u);ne!==null&&I(_,ne.startTime-T),ee=!1}return ee}finally{f=null,h=A,m=!1}}var N=!1,S=null,k=-1,E=5,P=-1;function D(){return!(e.unstable_now()-P<E)}function O(){if(S!==null){var C=e.unstable_now();P=C;var T=!0;try{T=S(!0,C)}finally{T?z():(N=!1,S=null)}}else N=!1}var z;if(typeof g=="function")z=function(){g(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,B=R.port2;R.port1.onmessage=O,z=function(){B.postMessage(null)}}else z=function(){y(O,0)};function F(C){S=C,N||(N=!0,z())}function I(C,T){k=y(function(){C(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,F(j))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var T=3;break;default:T=h}var A=h;h=T;try{return C()}finally{h=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,T){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var A=h;h=C;try{return T()}finally{h=A}},e.unstable_scheduleCallback=function(C,T,A){var L=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?L+A:L):A=L,C){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=A+q,C={id:d++,callback:T,priorityLevel:C,startTime:A,expirationTime:q,sortIndex:-1},A>L?(C.sortIndex=A,t(u,C),r(c)===null&&C===r(u)&&(x?(v(k),k=-1):x=!0,I(_,A-L))):(C.sortIndex=q,t(c,C),p||m||(p=!0,F(j))),C},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(C){var T=h;return function(){var A=h;h=T;try{return C.apply(this,arguments)}finally{h=A}}}})(C1);E1.exports=C1;var _A=E1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA=b,Or=_A;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1=new Set,El={};function ra(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(El[e]=t,e=0;e<t.length;e++)A1.add(t[e])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pm=Object.prototype.hasOwnProperty,SA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,My={},Iy={};function kA(e){return Pm.call(Iy,e)?!0:Pm.call(My,e)?!1:SA.test(e)?Iy[e]=!0:(My[e]=!0,!1)}function PA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EA(e,t,r,n){if(t===null||typeof t>"u"||PA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Rt[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Rt[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Rt[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Rt[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Rt[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Rt[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Rt[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Rt[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Rt[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Rg=/[\-:]([a-z])/g;function Fg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Rg,Fg);Rt[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Rg,Fg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Rg,Fg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function qg(e,t,r,n){var s=Rt.hasOwnProperty(t)?Rt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EA(t,r,s,n)&&(r=null),n||s===null?kA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gs=NA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),ja=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),Ug=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),T1=Symbol.for("react.provider"),O1=Symbol.for("react.context"),Bg=Symbol.for("react.forward_ref"),Cm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),Qg=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),D1=Symbol.for("react.offscreen"),$y=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=$y&&e[$y]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,_h;function sl(e){if(_h===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var Nh=!1;function Sh(e,t){if(!e||Nh)return"";Nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sl(e):""}function CA(e){switch(e.tag){case 5:return sl(e.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return e=Sh(e.type,!1),e;case 11:return e=Sh(e.type.render,!1),e;case 1:return e=Sh(e.type,!0),e;default:return""}}function Tm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _a:return"Fragment";case ja:return"Portal";case Em:return"Profiler";case Ug:return"StrictMode";case Cm:return"Suspense";case Am:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O1:return(e.displayName||"Context")+".Consumer";case T1:return(e._context.displayName||"Context")+".Provider";case Bg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qg:return t=e.displayName||null,t!==null?t:Tm(e.type)||"Memo";case Cs:t=e._payload,e=e._init;try{return Tm(e(t))}catch{}}return null}function AA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(t);case 8:return t===Ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ti(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function M1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TA(e){var t=M1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ic(e){e._valueTracker||(e._valueTracker=TA(e))}function I1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=M1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Au(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Om(e,t){var r=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ti(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $1(e,t){t=t.checked,t!=null&&qg(e,"checked",t,!1)}function Dm(e,t){$1(e,t);var r=ti(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Mm(e,t.type,ti(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ly(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Mm(e,t,r){(t!=="number"||Au(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var il=Array.isArray;function za(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ti(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Im(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ry(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(il(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ti(r)}}function z1(e,t){var r=ti(t.value),n=ti(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Fy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function L1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $m(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?L1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $c,R1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OA=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(e){OA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dl[t]=dl[e]})});function F1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dl.hasOwnProperty(e)&&dl[e]?(""+t).trim():t+"px"}function q1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=F1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var DA=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(e,t){if(t){if(DA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Lm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=null;function Vg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fm=null,La=null,Ra=null;function qy(e){if(e=mc(e)){if(typeof Fm!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Yd(t),Fm(e.stateNode,e.type,t))}}function U1(e){La?Ra?Ra.push(e):Ra=[e]:La=e}function B1(){if(La){var e=La,t=Ra;if(Ra=La=null,qy(e),t)for(e=0;e<t.length;e++)qy(t[e])}}function Q1(e,t){return e(t)}function V1(){}var kh=!1;function W1(e,t,r){if(kh)return e(t,r);kh=!0;try{return Q1(e,t,r)}finally{kh=!1,(La!==null||Ra!==null)&&(V1(),B1())}}function Al(e,t){var r=e.stateNode;if(r===null)return null;var n=Yd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var qm=!1;if(os)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){qm=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{qm=!1}function MA(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var fl=!1,Tu=null,Ou=!1,Um=null,IA={onError:function(e){fl=!0,Tu=e}};function $A(e,t,r,n,s,i,o,l,c){fl=!1,Tu=null,MA.apply(IA,arguments)}function zA(e,t,r,n,s,i,o,l,c){if($A.apply(this,arguments),fl){if(fl){var u=Tu;fl=!1,Tu=null}else throw Error(X(198));Ou||(Ou=!0,Um=u)}}function na(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function K1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uy(e){if(na(e)!==e)throw Error(X(188))}function LA(e){var t=e.alternate;if(!t){if(t=na(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Uy(s),e;if(i===n)return Uy(s),t;i=i.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function H1(e){return e=LA(e),e!==null?G1(e):null}function G1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=G1(e);if(t!==null)return t;e=e.sibling}return null}var Y1=Or.unstable_scheduleCallback,By=Or.unstable_cancelCallback,RA=Or.unstable_shouldYield,FA=Or.unstable_requestPaint,rt=Or.unstable_now,qA=Or.unstable_getCurrentPriorityLevel,Wg=Or.unstable_ImmediatePriority,J1=Or.unstable_UserBlockingPriority,Du=Or.unstable_NormalPriority,UA=Or.unstable_LowPriority,X1=Or.unstable_IdlePriority,Wd=null,$n=null;function BA(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Wd,e,void 0,(e.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:WA,QA=Math.log,VA=Math.LN2;function WA(e){return e>>>=0,e===0?32:31-(QA(e)/VA|0)|0}var zc=64,Lc=4194304;function al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=al(l):(i&=o,i!==0&&(n=al(i)))}else o=r&~s,o!==0?n=al(o):i!==0&&(n=al(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wn(t),s=1<<r,n|=e[r],t&=~s;return n}function KA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-wn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=KA(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z1(){var e=zc;return zc<<=1,!(zc&4194240)&&(zc=64),e}function Ph(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wn(t),e[t]=r}function GA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-wn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Kg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function e_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t_,Hg,r_,n_,s_,Qm=!1,Rc=[],Qs=null,Vs=null,Ws=null,Tl=new Map,Ol=new Map,Ds=[],YA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qy(e,t){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function Fo(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=mc(t),t!==null&&Hg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function JA(e,t,r,n,s){switch(t){case"focusin":return Qs=Fo(Qs,e,t,r,n,s),!0;case"dragenter":return Vs=Fo(Vs,e,t,r,n,s),!0;case"mouseover":return Ws=Fo(Ws,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tl.set(i,Fo(Tl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ol.set(i,Fo(Ol.get(i)||null,e,t,r,n,s)),!0}return!1}function i_(e){var t=Si(e.target);if(t!==null){var r=na(t);if(r!==null){if(t=r.tag,t===13){if(t=K1(r),t!==null){e.blockedOn=t,s_(e.priority,function(){r_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Rm=n,r.target.dispatchEvent(n),Rm=null}else return t=mc(r),t!==null&&Hg(t),e.blockedOn=r,!1;t.shift()}return!0}function Vy(e,t,r){xu(e)&&r.delete(t)}function XA(){Qm=!1,Qs!==null&&xu(Qs)&&(Qs=null),Vs!==null&&xu(Vs)&&(Vs=null),Ws!==null&&xu(Ws)&&(Ws=null),Tl.forEach(Vy),Ol.forEach(Vy)}function qo(e,t){e.blockedOn===t&&(e.blockedOn=null,Qm||(Qm=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,XA)))}function Dl(e){function t(s){return qo(s,e)}if(0<Rc.length){qo(Rc[0],e);for(var r=1;r<Rc.length;r++){var n=Rc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Qs!==null&&qo(Qs,e),Vs!==null&&qo(Vs,e),Ws!==null&&qo(Ws,e),Tl.forEach(t),Ol.forEach(t),r=0;r<Ds.length;r++)n=Ds[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ds.length&&(r=Ds[0],r.blockedOn===null);)i_(r),r.blockedOn===null&&Ds.shift()}var Fa=gs.ReactCurrentBatchConfig,Iu=!0;function ZA(e,t,r,n){var s=Ae,i=Fa.transition;Fa.transition=null;try{Ae=1,Gg(e,t,r,n)}finally{Ae=s,Fa.transition=i}}function eT(e,t,r,n){var s=Ae,i=Fa.transition;Fa.transition=null;try{Ae=4,Gg(e,t,r,n)}finally{Ae=s,Fa.transition=i}}function Gg(e,t,r,n){if(Iu){var s=Vm(e,t,r,n);if(s===null)zh(e,t,n,$u,r),Qy(e,n);else if(JA(s,e,t,r,n))n.stopPropagation();else if(Qy(e,n),t&4&&-1<YA.indexOf(e)){for(;s!==null;){var i=mc(s);if(i!==null&&t_(i),i=Vm(e,t,r,n),i===null&&zh(e,t,n,$u,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var $u=null;function Vm(e,t,r,n){if($u=null,e=Vg(n),e=Si(e),e!==null)if(t=na(e),t===null)e=null;else if(r=t.tag,r===13){if(e=K1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $u=e,null}function a_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qA()){case Wg:return 1;case J1:return 4;case Du:case UA:return 16;case X1:return 536870912;default:return 16}default:return 16}}var Rs=null,Yg=null,yu=null;function o_(){if(yu)return yu;var e,t=Yg,r=t.length,n,s="value"in Rs?Rs.value:Rs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return yu=s.slice(e,1<n?1-n:void 0)}function vu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fc(){return!0}function Wy(){return!1}function Rr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fc:Wy,this.isPropagationStopped=Wy,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fc)},persist:function(){},isPersistent:Fc}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jg=Rr(bo),hc=et({},bo,{view:0,detail:0}),tT=Rr(hc),Eh,Ch,Uo,Kd=et({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uo&&(Uo&&e.type==="mousemove"?(Eh=e.screenX-Uo.screenX,Ch=e.screenY-Uo.screenY):Ch=Eh=0,Uo=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),Ky=Rr(Kd),rT=et({},Kd,{dataTransfer:0}),nT=Rr(rT),sT=et({},hc,{relatedTarget:0}),Ah=Rr(sT),iT=et({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=Rr(iT),oT=et({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lT=Rr(oT),cT=et({},bo,{data:0}),Hy=Rr(cT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fT[e])?!!t[e]:!1}function Xg(){return hT}var mT=et({},hc,{key:function(e){if(e.key){var t=uT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(e){return e.type==="keypress"?vu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pT=Rr(mT),gT=et({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=Rr(gT),xT=et({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),yT=Rr(xT),vT=et({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=Rr(vT),wT=et({},Kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jT=Rr(wT),_T=[9,13,27,32],Zg=os&&"CompositionEvent"in window,hl=null;os&&"documentMode"in document&&(hl=document.documentMode);var NT=os&&"TextEvent"in window&&!hl,l_=os&&(!Zg||hl&&8<hl&&11>=hl),Yy=" ",Jy=!1;function c_(e,t){switch(e){case"keyup":return _T.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function ST(e,t){switch(e){case"compositionend":return u_(t);case"keypress":return t.which!==32?null:(Jy=!0,Yy);case"textInput":return e=t.data,e===Yy&&Jy?null:e;default:return null}}function kT(e,t){if(Na)return e==="compositionend"||!Zg&&c_(e,t)?(e=o_(),yu=Yg=Rs=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l_&&t.locale!=="ko"?null:t.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!PT[e.type]:t==="textarea"}function d_(e,t,r,n){U1(n),t=zu(t,"onChange"),0<t.length&&(r=new Jg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ml=null,Ml=null;function ET(e){j_(e,0)}function Hd(e){var t=Pa(e);if(I1(t))return e}function CT(e,t){if(e==="change")return t}var f_=!1;if(os){var Th;if(os){var Oh="oninput"in document;if(!Oh){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Oh=typeof Zy.oninput=="function"}Th=Oh}else Th=!1;f_=Th&&(!document.documentMode||9<document.documentMode)}function ev(){ml&&(ml.detachEvent("onpropertychange",h_),Ml=ml=null)}function h_(e){if(e.propertyName==="value"&&Hd(Ml)){var t=[];d_(t,Ml,e,Vg(e)),W1(ET,t)}}function AT(e,t,r){e==="focusin"?(ev(),ml=t,Ml=r,ml.attachEvent("onpropertychange",h_)):e==="focusout"&&ev()}function TT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hd(Ml)}function OT(e,t){if(e==="click")return Hd(t)}function DT(e,t){if(e==="input"||e==="change")return Hd(t)}function MT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nn=typeof Object.is=="function"?Object.is:MT;function Il(e,t){if(Nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Pm.call(t,s)||!Nn(e[s],t[s]))return!1}return!0}function tv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rv(e,t){var r=tv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tv(r)}}function m_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p_(){for(var e=window,t=Au();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Au(e.document)}return t}function e0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IT(e){var t=p_(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&m_(r.ownerDocument.documentElement,r)){if(n!==null&&e0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=rv(r,i);var o=rv(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $T=os&&"documentMode"in document&&11>=document.documentMode,Sa=null,Wm=null,pl=null,Km=!1;function nv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Km||Sa==null||Sa!==Au(n)||(n=Sa,"selectionStart"in n&&e0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pl&&Il(pl,n)||(pl=n,n=zu(Wm,"onSelect"),0<n.length&&(t=new Jg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sa)))}function qc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ka={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Dh={},g_={};os&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Gd(e){if(Dh[e])return Dh[e];if(!ka[e])return e;var t=ka[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in g_)return Dh[e]=t[r];return e}var x_=Gd("animationend"),y_=Gd("animationiteration"),v_=Gd("animationstart"),b_=Gd("transitionend"),w_=new Map,sv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(e,t){w_.set(e,t),ra(t,[e])}for(var Mh=0;Mh<sv.length;Mh++){var Ih=sv[Mh],zT=Ih.toLowerCase(),LT=Ih[0].toUpperCase()+Ih.slice(1);si(zT,"on"+LT)}si(x_,"onAnimationEnd");si(y_,"onAnimationIteration");si(v_,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(b_,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function iv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,zA(n,t,void 0,e),e.currentTarget=null}function j_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;iv(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;iv(s,l,u),i=c}}}if(Ou)throw e=Um,Ou=!1,Um=null,e}function Be(e,t){var r=t[Xm];r===void 0&&(r=t[Xm]=new Set);var n=e+"__bubble";r.has(n)||(__(t,e,2,!1),r.add(n))}function $h(e,t,r){var n=0;t&&(n|=4),__(r,e,n,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[Uc]){e[Uc]=!0,A1.forEach(function(r){r!=="selectionchange"&&(RT.has(r)||$h(r,!1,e),$h(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,$h("selectionchange",!1,t))}}function __(e,t,r,n){switch(a_(t)){case 1:var s=ZA;break;case 4:s=eT;break;default:s=Gg}r=s.bind(null,t,r,e),s=void 0,!qm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Si(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}W1(function(){var u=i,d=Vg(r),f=[];e:{var h=w_.get(e);if(h!==void 0){var m=Jg,p=e;switch(e){case"keypress":if(vu(r)===0)break e;case"keydown":case"keyup":m=pT;break;case"focusin":p="focus",m=Ah;break;case"focusout":p="blur",m=Ah;break;case"beforeblur":case"afterblur":m=Ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=nT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yT;break;case x_:case y_:case v_:m=aT;break;case b_:m=bT;break;case"scroll":m=tT;break;case"wheel":m=jT;break;case"copy":case"cut":case"paste":m=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gy}var x=(t&4)!==0,y=!x&&e==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var g=u,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Al(g,v),_!=null&&x.push(zl(g,_,w)))),y)break;g=g.return}0<x.length&&(h=new m(h,p,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==Rm&&(p=r.relatedTarget||r.fromElement)&&(Si(p)||p[ls]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(p=r.relatedTarget||r.toElement,m=u,p=p?Si(p):null,p!==null&&(y=na(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(x=Ky,_="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=Gy,_="onPointerLeave",v="onPointerEnter",g="pointer"),y=m==null?h:Pa(m),w=p==null?h:Pa(p),h=new x(_,g+"leave",m,r,d),h.target=y,h.relatedTarget=w,_=null,Si(d)===u&&(x=new x(v,g+"enter",p,r,d),x.target=w,x.relatedTarget=y,_=x),y=_,m&&p)t:{for(x=m,v=p,g=0,w=x;w;w=fa(w))g++;for(w=0,_=v;_;_=fa(_))w++;for(;0<g-w;)x=fa(x),g--;for(;0<w-g;)v=fa(v),w--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=fa(x),v=fa(v)}x=null}else x=null;m!==null&&av(f,h,m,x,!1),p!==null&&y!==null&&av(f,y,p,x,!0)}}e:{if(h=u?Pa(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=CT;else if(Xy(h))if(f_)j=DT;else{j=TT;var N=AT}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=OT);if(j&&(j=j(e,u))){d_(f,j,r,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Mm(h,"number",h.value)}switch(N=u?Pa(u):window,e){case"focusin":(Xy(N)||N.contentEditable==="true")&&(Sa=N,Wm=u,pl=null);break;case"focusout":pl=Wm=Sa=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,nv(f,r,d);break;case"selectionchange":if($T)break;case"keydown":case"keyup":nv(f,r,d)}var S;if(Zg)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Na?c_(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(l_&&r.locale!=="ko"&&(Na||k!=="onCompositionStart"?k==="onCompositionEnd"&&Na&&(S=o_()):(Rs=d,Yg="value"in Rs?Rs.value:Rs.textContent,Na=!0)),N=zu(u,k),0<N.length&&(k=new Hy(k,e,null,r,d),f.push({event:k,listeners:N}),S?k.data=S:(S=u_(r),S!==null&&(k.data=S)))),(S=NT?ST(e,r):kT(e,r))&&(u=zu(u,"onBeforeInput"),0<u.length&&(d=new Hy("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}j_(f,t)})}function zl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function zu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Al(e,r),i!=null&&n.unshift(zl(e,i,s)),i=Al(e,t),i!=null&&n.push(zl(e,i,s))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function av(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Al(r,i),c!=null&&o.unshift(zl(r,c,l))):s||(c=Al(r,i),c!=null&&o.push(zl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var FT=/\r\n?/g,qT=/\u0000|\uFFFD/g;function ov(e){return(typeof e=="string"?e:""+e).replace(FT,`
`).replace(qT,"")}function Bc(e,t,r){if(t=ov(t),ov(e)!==t&&r)throw Error(X(425))}function Lu(){}var Hm=null,Gm=null;function Ym(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jm=typeof setTimeout=="function"?setTimeout:void 0,UT=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,BT=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(e){return lv.resolve(null).then(e).catch(QT)}:Jm;function QT(e){setTimeout(function(){throw e})}function Lh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dl(t)}function Ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Dn="__reactFiber$"+wo,Ll="__reactProps$"+wo,ls="__reactContainer$"+wo,Xm="__reactEvents$"+wo,VT="__reactListeners$"+wo,WT="__reactHandles$"+wo;function Si(e){var t=e[Dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ls]||r[Dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cv(e);e!==null;){if(r=e[Dn])return r;e=cv(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[Dn]||e[ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Yd(e){return e[Ll]||null}var Zm=[],Ea=-1;function ii(e){return{current:e}}function We(e){0>Ea||(e.current=Zm[Ea],Zm[Ea]=null,Ea--)}function qe(e,t){Ea++,Zm[Ea]=e.current,e.current=t}var ri={},Gt=ii(ri),yr=ii(!1),Fi=ri;function Ya(e,t){var r=e.type.contextTypes;if(!r)return ri;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return e=e.childContextTypes,e!=null}function Ru(){We(yr),We(Gt)}function uv(e,t,r){if(Gt.current!==ri)throw Error(X(168));qe(Gt,t),qe(yr,r)}function N_(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(X(108,AA(e)||"Unknown",s));return et({},r,n)}function Fu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ri,Fi=Gt.current,qe(Gt,e),qe(yr,yr.current),!0}function dv(e,t,r){var n=e.stateNode;if(!n)throw Error(X(169));r?(e=N_(e,t,Fi),n.__reactInternalMemoizedMergedChildContext=e,We(yr),We(Gt),qe(Gt,e)):We(yr),qe(yr,r)}var Gn=null,Jd=!1,Rh=!1;function S_(e){Gn===null?Gn=[e]:Gn.push(e)}function KT(e){Jd=!0,S_(e)}function ai(){if(!Rh&&Gn!==null){Rh=!0;var e=0,t=Ae;try{var r=Gn;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gn=null,Jd=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(e+1)),Y1(Wg,ai),s}finally{Ae=t,Rh=!1}}return null}var Ca=[],Aa=0,qu=null,Uu=0,Br=[],Qr=0,qi=null,es=1,ts="";function yi(e,t){Ca[Aa++]=Uu,Ca[Aa++]=qu,qu=e,Uu=t}function k_(e,t,r){Br[Qr++]=es,Br[Qr++]=ts,Br[Qr++]=qi,qi=e;var n=es;e=ts;var s=32-wn(n)-1;n&=~(1<<s),r+=1;var i=32-wn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,es=1<<32-wn(t)+s|r<<s|n,ts=i+e}else es=1<<i|r<<s|n,ts=e}function t0(e){e.return!==null&&(yi(e,1),k_(e,1,0))}function r0(e){for(;e===qu;)qu=Ca[--Aa],Ca[Aa]=null,Uu=Ca[--Aa],Ca[Aa]=null;for(;e===qi;)qi=Br[--Qr],Br[Qr]=null,ts=Br[--Qr],Br[Qr]=null,es=Br[--Qr],Br[Qr]=null}var Ar=null,Cr=null,Ke=!1,mn=null;function P_(e,t){var r=Kr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function fv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Cr=Ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Cr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=qi!==null?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ar=e,Cr=null,!0):!1;default:return!1}}function ep(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tp(e){if(Ke){var t=Cr;if(t){var r=t;if(!fv(e,t)){if(ep(e))throw Error(X(418));t=Ks(r.nextSibling);var n=Ar;t&&fv(e,t)?P_(n,r):(e.flags=e.flags&-4097|2,Ke=!1,Ar=e)}}else{if(ep(e))throw Error(X(418));e.flags=e.flags&-4097|2,Ke=!1,Ar=e}}}function hv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Qc(e){if(e!==Ar)return!1;if(!Ke)return hv(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ym(e.type,e.memoizedProps)),t&&(t=Cr)){if(ep(e))throw E_(),Error(X(418));for(;t;)P_(e,t),t=Ks(t.nextSibling)}if(hv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Cr=Ks(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Cr=null}}else Cr=Ar?Ks(e.stateNode.nextSibling):null;return!0}function E_(){for(var e=Cr;e;)e=Ks(e.nextSibling)}function Ja(){Cr=Ar=null,Ke=!1}function n0(e){mn===null?mn=[e]:mn.push(e)}var HT=gs.ReactCurrentBatchConfig;function Bo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mv(e){var t=e._init;return t(e._payload)}function C_(e){function t(v,g){if(e){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=Js(v,g),v.index=0,v.sibling=null,v}function i(v,g,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,w,_){return g===null||g.tag!==6?(g=Wh(w,v.mode,_),g.return=v,g):(g=s(g,w),g.return=v,g)}function c(v,g,w,_){var j=w.type;return j===_a?d(v,g,w.props.children,_,w.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cs&&mv(j)===g.type)?(_=s(g,w.props),_.ref=Bo(v,g,w),_.return=v,_):(_=ku(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,_)}function u(v,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Kh(w,v.mode,_),g.return=v,g):(g=s(g,w.children||[]),g.return=v,g)}function d(v,g,w,_,j){return g===null||g.tag!==7?(g=Ii(w,v.mode,_,j),g.return=v,g):(g=s(g,w),g.return=v,g)}function f(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wh(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mc:return w=ku(g.type,g.key,g.props,null,v.mode,w),w.ref=Bo(v,null,g),w.return=v,w;case ja:return g=Kh(g,v.mode,w),g.return=v,g;case Cs:var _=g._init;return f(v,_(g._payload),w)}if(il(g)||Lo(g))return g=Ii(g,v.mode,w,null),g.return=v,g;Vc(v,g)}return null}function h(v,g,w,_){var j=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return w.key===j?c(v,g,w,_):null;case ja:return w.key===j?u(v,g,w,_):null;case Cs:return j=w._init,h(v,g,j(w._payload),_)}if(il(w)||Lo(w))return j!==null?null:d(v,g,w,_,null);Vc(v,w)}return null}function m(v,g,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(g,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:return v=v.get(_.key===null?w:_.key)||null,c(g,v,_,j);case ja:return v=v.get(_.key===null?w:_.key)||null,u(g,v,_,j);case Cs:var N=_._init;return m(v,g,w,N(_._payload),j)}if(il(_)||Lo(_))return v=v.get(w)||null,d(g,v,_,j,null);Vc(g,_)}return null}function p(v,g,w,_){for(var j=null,N=null,S=g,k=g=0,E=null;S!==null&&k<w.length;k++){S.index>k?(E=S,S=null):E=S.sibling;var P=h(v,S,w[k],_);if(P===null){S===null&&(S=E);break}e&&S&&P.alternate===null&&t(v,S),g=i(P,g,k),N===null?j=P:N.sibling=P,N=P,S=E}if(k===w.length)return r(v,S),Ke&&yi(v,k),j;if(S===null){for(;k<w.length;k++)S=f(v,w[k],_),S!==null&&(g=i(S,g,k),N===null?j=S:N.sibling=S,N=S);return Ke&&yi(v,k),j}for(S=n(v,S);k<w.length;k++)E=m(S,v,k,w[k],_),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?k:E.key),g=i(E,g,k),N===null?j=E:N.sibling=E,N=E);return e&&S.forEach(function(D){return t(v,D)}),Ke&&yi(v,k),j}function x(v,g,w,_){var j=Lo(w);if(typeof j!="function")throw Error(X(150));if(w=j.call(w),w==null)throw Error(X(151));for(var N=j=null,S=g,k=g=0,E=null,P=w.next();S!==null&&!P.done;k++,P=w.next()){S.index>k?(E=S,S=null):E=S.sibling;var D=h(v,S,P.value,_);if(D===null){S===null&&(S=E);break}e&&S&&D.alternate===null&&t(v,S),g=i(D,g,k),N===null?j=D:N.sibling=D,N=D,S=E}if(P.done)return r(v,S),Ke&&yi(v,k),j;if(S===null){for(;!P.done;k++,P=w.next())P=f(v,P.value,_),P!==null&&(g=i(P,g,k),N===null?j=P:N.sibling=P,N=P);return Ke&&yi(v,k),j}for(S=n(v,S);!P.done;k++,P=w.next())P=m(S,v,k,P.value,_),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?k:P.key),g=i(P,g,k),N===null?j=P:N.sibling=P,N=P);return e&&S.forEach(function(O){return t(v,O)}),Ke&&yi(v,k),j}function y(v,g,w,_){if(typeof w=="object"&&w!==null&&w.type===_a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:e:{for(var j=w.key,N=g;N!==null;){if(N.key===j){if(j=w.type,j===_a){if(N.tag===7){r(v,N.sibling),g=s(N,w.props.children),g.return=v,v=g;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cs&&mv(j)===N.type){r(v,N.sibling),g=s(N,w.props),g.ref=Bo(v,N,w),g.return=v,v=g;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===_a?(g=Ii(w.props.children,v.mode,_,w.key),g.return=v,v=g):(_=ku(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,v=_)}return o(v);case ja:e:{for(N=w.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){r(v,g.sibling),g=s(g,w.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Kh(w,v.mode,_),g.return=v,v=g}return o(v);case Cs:return N=w._init,y(v,g,N(w._payload),_)}if(il(w))return p(v,g,w,_);if(Lo(w))return x(v,g,w,_);Vc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,w),g.return=v,v=g):(r(v,g),g=Wh(w,v.mode,_),g.return=v,v=g),o(v)):r(v,g)}return y}var Xa=C_(!0),A_=C_(!1),Bu=ii(null),Qu=null,Ta=null,s0=null;function i0(){s0=Ta=Qu=null}function a0(e){var t=Bu.current;We(Bu),e._currentValue=t}function rp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qa(e,t){Qu=e,s0=Ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hr=!0),e.firstContext=null)}function Zr(e){var t=e._currentValue;if(s0!==e)if(e={context:e,memoizedValue:t,next:null},Ta===null){if(Qu===null)throw Error(X(308));Ta=e,Qu.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var ki=null;function o0(e){ki===null?ki=[e]:ki.push(e)}function T_(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,o0(t)):(r.next=s.next,s.next=r),t.interleaved=r,cs(e,n)}function cs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var As=!1;function l0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,cs(e,r)}return s=n.interleaved,s===null?(t.next=t,o0(n)):(t.next=s.next,s.next=t),n.interleaved=t,cs(e,r)}function bu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kg(e,r)}}function pv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vu(e,t,r,n){var s=e.updateQueue;As=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(h=t,m=r,x.tag){case 1:if(p=x.payload,typeof p=="function"){f=p.call(m,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,h=typeof p=="function"?p.call(m,f,h):p,h==null)break e;f=et({},f,h);break e;case 2:As=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Bi|=o,e.lanes=o,e.memoizedState=f}}function gv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var pc={},zn=ii(pc),Rl=ii(pc),Fl=ii(pc);function Pi(e){if(e===pc)throw Error(X(174));return e}function c0(e,t){switch(qe(Fl,t),qe(Rl,e),qe(zn,pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$m(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$m(t,e)}We(zn),qe(zn,t)}function Za(){We(zn),We(Rl),We(Fl)}function D_(e){Pi(Fl.current);var t=Pi(zn.current),r=$m(t,e.type);t!==r&&(qe(Rl,e),qe(zn,r))}function u0(e){Rl.current===e&&(We(zn),We(Rl))}var Xe=ii(0);function Wu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=[];function d0(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var wu=gs.ReactCurrentDispatcher,qh=gs.ReactCurrentBatchConfig,Ui=0,Ze=null,pt=null,wt=null,Ku=!1,gl=!1,ql=0,GT=0;function qt(){throw Error(X(321))}function f0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Nn(e[r],t[r]))return!1;return!0}function h0(e,t,r,n,s,i){if(Ui=i,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wu.current=e===null||e.memoizedState===null?ZT:eO,e=r(n,s),gl){i=0;do{if(gl=!1,ql=0,25<=i)throw Error(X(301));i+=1,wt=pt=null,t.updateQueue=null,wu.current=tO,e=r(n,s)}while(gl)}if(wu.current=Hu,t=pt!==null&&pt.next!==null,Ui=0,wt=pt=Ze=null,Ku=!1,t)throw Error(X(300));return e}function m0(){var e=ql!==0;return ql=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ze.memoizedState=wt=e:wt=wt.next=e,wt}function en(){if(pt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=wt===null?Ze.memoizedState:wt.next;if(t!==null)wt=t,pt=e;else{if(e===null)throw Error(X(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Ze.memoizedState=wt=e:wt=wt.next=e}return wt}function Ul(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=pt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Ze.lanes|=d,Bi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Nn(n,t.memoizedState)||(hr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ze.lanes|=i,Bi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Nn(i,t.memoizedState)||(hr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function M_(){}function I_(e,t){var r=Ze,n=en(),s=t(),i=!Nn(n.memoizedState,s);if(i&&(n.memoizedState=s,hr=!0),n=n.queue,p0(L_.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,Bl(9,z_.bind(null,r,n,s,t),void 0,null),jt===null)throw Error(X(349));Ui&30||$_(r,t,s)}return s}function $_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function z_(e,t,r,n){t.value=r,t.getSnapshot=n,R_(t)&&F_(e)}function L_(e,t,r){return r(function(){R_(t)&&F_(e)})}function R_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Nn(e,r)}catch{return!0}}function F_(e){var t=cs(e,1);t!==null&&jn(t,e,1,-1)}function xv(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t.queue=e,e=e.dispatch=XT.bind(null,Ze,e),[t.memoizedState,e]}function Bl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function q_(){return en().memoizedState}function ju(e,t,r,n){var s=Tn();Ze.flags|=e,s.memoizedState=Bl(1|t,r,void 0,n===void 0?null:n)}function Xd(e,t,r,n){var s=en();n=n===void 0?null:n;var i=void 0;if(pt!==null){var o=pt.memoizedState;if(i=o.destroy,n!==null&&f0(n,o.deps)){s.memoizedState=Bl(t,r,i,n);return}}Ze.flags|=e,s.memoizedState=Bl(1|t,r,i,n)}function yv(e,t){return ju(8390656,8,e,t)}function p0(e,t){return Xd(2048,8,e,t)}function U_(e,t){return Xd(4,2,e,t)}function B_(e,t){return Xd(4,4,e,t)}function Q_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function V_(e,t,r){return r=r!=null?r.concat([e]):null,Xd(4,4,Q_.bind(null,t,e),r)}function g0(){}function W_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&f0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function K_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&f0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function H_(e,t,r){return Ui&21?(Nn(r,t)||(r=Z1(),Ze.lanes|=r,Bi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hr=!0),e.memoizedState=r)}function YT(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=qh.transition;qh.transition={};try{e(!1),t()}finally{Ae=r,qh.transition=n}}function G_(){return en().memoizedState}function JT(e,t,r){var n=Ys(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Y_(e))J_(t,r);else if(r=T_(e,t,r,n),r!==null){var s=nr();jn(r,e,n,s),X_(r,t,n)}}function XT(e,t,r){var n=Ys(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y_(e))J_(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Nn(l,o)){var c=t.interleaved;c===null?(s.next=s,o0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=T_(e,t,s,n),r!==null&&(s=nr(),jn(r,e,n,s),X_(r,t,n))}}function Y_(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function J_(e,t){gl=Ku=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function X_(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kg(e,r)}}var Hu={readContext:Zr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},ZT={readContext:Zr,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:Zr,useEffect:yv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ju(4194308,4,Q_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ju(4194308,4,e,t)},useInsertionEffect:function(e,t){return ju(4,2,e,t)},useMemo:function(e,t){var r=Tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=JT.bind(null,Ze,e),[n.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:xv,useDebugValue:g0,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=xv(!1),t=e[0];return e=YT.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ze,s=Tn();if(Ke){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),jt===null)throw Error(X(349));Ui&30||$_(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,yv(L_.bind(null,n,i,e),[e]),n.flags|=2048,Bl(9,z_.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Tn(),t=jt.identifierPrefix;if(Ke){var r=ts,n=es;r=(n&~(1<<32-wn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ql++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=GT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eO={readContext:Zr,useCallback:W_,useContext:Zr,useEffect:p0,useImperativeHandle:V_,useInsertionEffect:U_,useLayoutEffect:B_,useMemo:K_,useReducer:Uh,useRef:q_,useState:function(){return Uh(Ul)},useDebugValue:g0,useDeferredValue:function(e){var t=en();return H_(t,pt.memoizedState,e)},useTransition:function(){var e=Uh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:M_,useSyncExternalStore:I_,useId:G_,unstable_isNewReconciler:!1},tO={readContext:Zr,useCallback:W_,useContext:Zr,useEffect:p0,useImperativeHandle:V_,useInsertionEffect:U_,useLayoutEffect:B_,useMemo:K_,useReducer:Bh,useRef:q_,useState:function(){return Bh(Ul)},useDebugValue:g0,useDeferredValue:function(e){var t=en();return pt===null?t.memoizedState=e:H_(t,pt.memoizedState,e)},useTransition:function(){var e=Bh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:M_,useSyncExternalStore:I_,useId:G_,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function np(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:et({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zd={isMounted:function(e){return(e=e._reactInternals)?na(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Ys(e),i=ss(n,s);i.payload=t,r!=null&&(i.callback=r),t=Hs(e,i,s),t!==null&&(jn(t,e,s,n),bu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Ys(e),i=ss(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Hs(e,i,s),t!==null&&(jn(t,e,s,n),bu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nr(),n=Ys(e),s=ss(r,n);s.tag=2,t!=null&&(s.callback=t),t=Hs(e,s,n),t!==null&&(jn(t,e,n,r),bu(t,e,n))}};function vv(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Il(r,n)||!Il(s,i):!0}function Z_(e,t,r){var n=!1,s=ri,i=t.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=vr(t)?Fi:Gt.current,n=t.contextTypes,i=(n=n!=null)?Ya(e,s):ri),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function bv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zd.enqueueReplaceState(t,t.state,null)}function sp(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},l0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=vr(t)?Fi:Gt.current,s.context=Ya(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(np(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zd.enqueueReplaceState(s,s.state,null),Vu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=CA(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ip(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var rO=typeof WeakMap=="function"?WeakMap:Map;function eN(e,t,r){r=ss(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Yu||(Yu=!0,pp=n),ip(e,t)},r}function tN(e,t,r){r=ss(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ip(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ip(e,t),typeof n!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function wv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new rO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=gO.bind(null,e,t,r),t.then(e,e))}function jv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _v(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ss(-1,1),t.tag=2,Hs(r,t,1))),r.lanes|=1),e)}var nO=gs.ReactCurrentOwner,hr=!1;function er(e,t,r,n){t.child=e===null?A_(t,null,r,n):Xa(t,e.child,r,n)}function Nv(e,t,r,n,s){r=r.render;var i=t.ref;return qa(t,s),n=h0(e,t,r,n,i,s),r=m0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(Ke&&r&&t0(t),t.flags|=1,er(e,t,n,s),t.child)}function Sv(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!N0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,rN(e,t,i,n,s)):(e=ku(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Il,r(o,n)&&e.ref===t.ref)return us(e,t,s)}return t.flags|=1,e=Js(i,n),e.ref=t.ref,e.return=t,t.child=e}function rN(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Il(i,n)&&e.ref===t.ref)if(hr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(hr=!0);else return t.lanes=e.lanes,us(e,t,s)}return ap(e,t,r,n,s)}function nN(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Da,Sr),Sr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Da,Sr),Sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,qe(Da,Sr),Sr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,qe(Da,Sr),Sr|=n;return er(e,t,s,r),t.child}function sN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ap(e,t,r,n,s){var i=vr(r)?Fi:Gt.current;return i=Ya(t,i),qa(t,s),r=h0(e,t,r,n,i,s),n=m0(),e!==null&&!hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,us(e,t,s)):(Ke&&n&&t0(t),t.flags|=1,er(e,t,r,s),t.child)}function kv(e,t,r,n,s){if(vr(r)){var i=!0;Fu(t)}else i=!1;if(qa(t,s),t.stateNode===null)_u(e,t),Z_(t,r,n),sp(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=vr(r)?Fi:Gt.current,u=Ya(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&bv(t,o,n,u),As=!1;var h=t.memoizedState;o.state=h,Vu(t,n,o,s),c=t.memoizedState,l!==n||h!==c||yr.current||As?(typeof d=="function"&&(np(t,r,d,n),c=t.memoizedState),(l=As||vv(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,O_(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:dn(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=vr(r)?Fi:Gt.current,c=Ya(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&bv(t,o,n,c),As=!1,h=t.memoizedState,o.state=h,Vu(t,n,o,s);var p=t.memoizedState;l!==f||h!==p||yr.current||As?(typeof m=="function"&&(np(t,r,m,n),p=t.memoizedState),(u=As||vv(t,r,u,n,h,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return op(e,t,r,n,i,s)}function op(e,t,r,n,s,i){sN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&dv(t,r,!1),us(e,t,i);n=t.stateNode,nO.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xa(t,e.child,null,i),t.child=Xa(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,s&&dv(t,r,!0),t.child}function iN(e){var t=e.stateNode;t.pendingContext?uv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uv(e,t.context,!1),c0(e,t.containerInfo)}function Pv(e,t,r,n,s){return Ja(),n0(s),t.flags|=256,er(e,t,r,n),t.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function cp(e){return{baseLanes:e,cachePool:null,transitions:null}}function aN(e,t,r){var n=t.pendingProps,s=Xe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),qe(Xe,s&1),e===null)return tp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=rf(o,n,0,null),e=Ii(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cp(r),t.memoizedState=lp,e):x0(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return sO(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Js(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Js(l,i):(i=Ii(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?cp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=lp,n}return i=e.child,e=i.sibling,n=Js(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function x0(e,t){return t=rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wc(e,t,r,n){return n!==null&&n0(n),Xa(t,e.child,null,r),e=x0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sO(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Qh(Error(X(422))),Wc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=rf({mode:"visible",children:n.children},s,0,null),i=Ii(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xa(t,e.child,null,o),t.child.memoizedState=cp(o),t.memoizedState=lp,i);if(!(t.mode&1))return Wc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(X(419)),n=Qh(i,n,void 0),Wc(e,t,o,n)}if(l=(o&e.childLanes)!==0,hr||l){if(n=jt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(e,s),jn(n,e,s,-1))}return _0(),n=Qh(Error(X(421))),Wc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xO.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Cr=Ks(s.nextSibling),Ar=t,Ke=!0,mn=null,e!==null&&(Br[Qr++]=es,Br[Qr++]=ts,Br[Qr++]=qi,es=e.id,ts=e.overflow,qi=t),t=x0(t,n.children),t.flags|=4096,t)}function Ev(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rp(e.return,t,r)}function Vh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function oN(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=Xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ev(e,r,t);else if(e.tag===19)Ev(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(qe(Xe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Wu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vh(t,!0,r,null,i);break;case"together":Vh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _u(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function us(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Bi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Js(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Js(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function iO(e,t,r){switch(t.tag){case 3:iN(t),Ja();break;case 5:D_(t);break;case 1:vr(t.type)&&Fu(t);break;case 4:c0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;qe(Bu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(qe(Xe,Xe.current&1),t.flags|=128,null):r&t.child.childLanes?aN(e,t,r):(qe(Xe,Xe.current&1),e=us(e,t,r),e!==null?e.sibling:null);qe(Xe,Xe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return oN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,nN(e,t,r)}return us(e,t,r)}var lN,up,cN,uN;lN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};up=function(){};cN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Pi(zn.current);var i=null;switch(r){case"input":s=Om(e,s),n=Om(e,n),i=[];break;case"select":s=et({},s,{value:void 0}),n=et({},n,{value:void 0}),i=[];break;case"textarea":s=Im(e,s),n=Im(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lu)}zm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};uN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qo(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function aO(e,t,r){var n=t.pendingProps;switch(r0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return vr(t.type)&&Ru(),Ut(t),null;case 3:return n=t.stateNode,Za(),We(yr),We(Gt),d0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&(yp(mn),mn=null))),up(e,t),Ut(t),null;case 5:u0(t);var s=Pi(Fl.current);if(r=t.type,e!==null&&t.stateNode!=null)cN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(X(166));return Ut(t),null}if(e=Pi(zn.current),Qc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Dn]=t,n[Ll]=i,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(s=0;s<ol.length;s++)Be(ol[s],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":zy(n,i),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Be("invalid",n);break;case"textarea":Ry(n,i),Be("invalid",n)}zm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",""+l]):El.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Be("scroll",n)}switch(r){case"input":Ic(n),Ly(n,i,!0);break;case"textarea":Ic(n),Fy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Lu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Dn]=t,e[Ll]=n,lN(e,t,!1,!1),t.stateNode=e;e:{switch(o=Lm(r,n),r){case"dialog":Be("cancel",e),Be("close",e),s=n;break;case"iframe":case"object":case"embed":Be("load",e),s=n;break;case"video":case"audio":for(s=0;s<ol.length;s++)Be(ol[s],e);s=n;break;case"source":Be("error",e),s=n;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=n;break;case"details":Be("toggle",e),s=n;break;case"input":zy(e,n),s=Om(e,n),Be("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=et({},n,{value:void 0}),Be("invalid",e);break;case"textarea":Ry(e,n),s=Im(e,n),Be("invalid",e);break;default:s=n}zm(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?q1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&R1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cl(e,c):typeof c=="number"&&Cl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(El.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",e):c!=null&&qg(e,i,c,o))}switch(r){case"input":Ic(e),Ly(e,n,!1);break;case"textarea":Ic(e),Fy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ti(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?za(e,!!n.multiple,i,!1):n.defaultValue!=null&&za(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Lu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)uN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(X(166));if(r=Pi(Fl.current),Pi(zn.current),Qc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,(i=n.nodeValue!==r)&&(e=Ar,e!==null))switch(e.tag){case 3:Bc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=t,t.stateNode=n}return Ut(t),null;case 13:if(We(Xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Cr!==null&&t.mode&1&&!(t.flags&128))E_(),Ja(),t.flags|=98560,i=!1;else if(i=Qc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Dn]=t}else Ja(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),i=!1}else mn!==null&&(yp(mn),mn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?gt===0&&(gt=3):_0())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return Za(),up(e,t),e===null&&$l(t.stateNode.containerInfo),Ut(t),null;case 10:return a0(t.type._context),Ut(t),null;case 17:return vr(t.type)&&Ru(),Ut(t),null;case 19:if(We(Xe),i=t.memoizedState,i===null)return Ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Qo(i,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wu(e),o!==null){for(t.flags|=128,Qo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(Xe,Xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>to&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Ut(t),null}else 2*rt()-i.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,r=Xe.current,qe(Xe,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return j0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Sr&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function oO(e,t){switch(r0(t),t.tag){case 1:return vr(t.type)&&Ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Za(),We(yr),We(Gt),d0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return u0(t),null;case 13:if(We(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Xe),null;case 4:return Za(),null;case 10:return a0(t.type._context),null;case 22:case 23:return j0(),null;case 24:return null;default:return null}}var Kc=!1,Vt=!1,lO=typeof WeakSet=="function"?WeakSet:Set,se=null;function Oa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tt(e,t,n)}else r.current=null}function dp(e,t,r){try{r()}catch(n){tt(e,t,n)}}var Cv=!1;function cO(e,t){if(Hm=Iu,e=p_(),e0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gm={focusedElem:e,selectionRange:r},Iu=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,y=p.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:dn(t.type,x),y);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return p=Cv,Cv=!1,p}function xl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&dp(t,r,i)}s=s.next}while(s!==n)}}function ef(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function fp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function dN(e){var t=e.alternate;t!==null&&(e.alternate=null,dN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[Ll],delete t[Xm],delete t[VT],delete t[WT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fN(e){return e.tag===5||e.tag===3||e.tag===4}function Av(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lu));else if(n!==4&&(e=e.child,e!==null))for(hp(e,t,r),e=e.sibling;e!==null;)hp(e,t,r),e=e.sibling}function mp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(mp(e,t,r),e=e.sibling;e!==null;)mp(e,t,r),e=e.sibling}var At=null,fn=!1;function Ss(e,t,r){for(r=r.child;r!==null;)hN(e,t,r),r=r.sibling}function hN(e,t,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:Vt||Oa(r,t);case 6:var n=At,s=fn;At=null,Ss(e,t,r),At=n,fn=s,At!==null&&(fn?(e=At,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):At.removeChild(r.stateNode));break;case 18:At!==null&&(fn?(e=At,r=r.stateNode,e.nodeType===8?Lh(e.parentNode,r):e.nodeType===1&&Lh(e,r),Dl(e)):Lh(At,r.stateNode));break;case 4:n=At,s=fn,At=r.stateNode.containerInfo,fn=!0,Ss(e,t,r),At=n,fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dp(r,t,o),s=s.next}while(s!==n)}Ss(e,t,r);break;case 1:if(!Vt&&(Oa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tt(r,t,l)}Ss(e,t,r);break;case 21:Ss(e,t,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,Ss(e,t,r),Vt=n):Ss(e,t,r);break;default:Ss(e,t,r)}}function Tv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lO),t.forEach(function(n){var s=yO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:At=l.stateNode,fn=!1;break e;case 3:At=l.stateNode.containerInfo,fn=!0;break e;case 4:At=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(At===null)throw Error(X(160));hN(i,o,s),At=null,fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mN(t,e),t=t.sibling}function mN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(t,e),An(e),n&4){try{xl(3,e,e.return),ef(3,e)}catch(x){tt(e,e.return,x)}try{xl(5,e,e.return)}catch(x){tt(e,e.return,x)}}break;case 1:cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return);break;case 5:if(cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return),e.flags&32){var s=e.stateNode;try{Cl(s,"")}catch(x){tt(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$1(s,i),Lm(l,o);var u=Lm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?q1(s,f):d==="dangerouslySetInnerHTML"?R1(s,f):d==="children"?Cl(s,f):qg(s,d,f,u)}switch(l){case"input":Dm(s,i);break;case"textarea":z1(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?za(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ll]=i}catch(x){tt(e,e.return,x)}}break;case 6:if(cn(t,e),An(e),n&4){if(e.stateNode===null)throw Error(X(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){tt(e,e.return,x)}}break;case 3:if(cn(t,e),An(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(t.containerInfo)}catch(x){tt(e,e.return,x)}break;case 4:cn(t,e),An(e);break;case 13:cn(t,e),An(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(b0=rt())),n&4&&Tv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Vt=(u=Vt)||d,cn(t,e),Vt=u):cn(t,e),An(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(se=e,d=e.child;d!==null;){for(f=se=d;se!==null;){switch(h=se,m=h.child,h.tag){case 0:case 11:case 14:case 15:xl(4,h,h.return);break;case 1:Oa(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){tt(n,r,x)}}break;case 5:Oa(h,h.return);break;case 22:if(h.memoizedState!==null){Dv(f);continue}}m!==null?(m.return=h,se=m):Dv(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=F1("display",o))}catch(x){tt(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){tt(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(t,e),An(e),n&4&&Tv(e);break;case 21:break;default:cn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(fN(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Cl(s,""),n.flags&=-33);var i=Av(e);mp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Av(e);hp(e,l,o);break;default:throw Error(X(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uO(e,t,r){se=e,pN(e)}function pN(e,t,r){for(var n=(e.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Kc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=Kc;var u=Vt;if(Kc=o,(Vt=c)&&!u)for(se=s;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?Mv(s):c!==null?(c.return=o,se=c):Mv(s);for(;i!==null;)se=i,pN(i),i=i.sibling;se=s,Kc=l,Vt=u}Ov(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):Ov(e)}}function Ov(e){for(;se!==null;){var t=se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||ef(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:dn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vt||t.flags&512&&fp(t)}catch(h){tt(t,t.return,h)}}if(t===e){se=null;break}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}function Dv(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,se=r;break}se=t.return}}function Mv(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ef(4,t)}catch(c){tt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{fp(t)}catch(c){tt(t,i,c)}break;case 5:var o=t.return;try{fp(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var dO=Math.ceil,Gu=gs.ReactCurrentDispatcher,y0=gs.ReactCurrentOwner,Gr=gs.ReactCurrentBatchConfig,be=0,jt=null,ut=null,$t=0,Sr=0,Da=ii(0),gt=0,Ql=null,Bi=0,tf=0,v0=0,yl=null,dr=null,b0=0,to=1/0,Kn=null,Yu=!1,pp=null,Gs=null,Hc=!1,Fs=null,Ju=0,vl=0,gp=null,Nu=-1,Su=0;function nr(){return be&6?rt():Nu!==-1?Nu:Nu=rt()}function Ys(e){return e.mode&1?be&2&&$t!==0?$t&-$t:HT.transition!==null?(Su===0&&(Su=Z1()),Su):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:a_(e.type)),e):1}function jn(e,t,r,n){if(50<vl)throw vl=0,gp=null,Error(X(185));fc(e,r,n),(!(be&2)||e!==jt)&&(e===jt&&(!(be&2)&&(tf|=r),gt===4&&Ms(e,$t)),br(e,n),r===1&&be===0&&!(t.mode&1)&&(to=rt()+500,Jd&&ai()))}function br(e,t){var r=e.callbackNode;HA(e,t);var n=Mu(e,e===jt?$t:0);if(n===0)r!==null&&By(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&By(r),t===1)e.tag===0?KT(Iv.bind(null,e)):S_(Iv.bind(null,e)),BT(function(){!(be&6)&&ai()}),r=null;else{switch(e_(n)){case 1:r=Wg;break;case 4:r=J1;break;case 16:r=Du;break;case 536870912:r=X1;break;default:r=Du}r=_N(r,gN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gN(e,t){if(Nu=-1,Su=0,be&6)throw Error(X(327));var r=e.callbackNode;if(Ua()&&e.callbackNode!==r)return null;var n=Mu(e,e===jt?$t:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Xu(e,n);else{t=n;var s=be;be|=2;var i=yN();(jt!==e||$t!==t)&&(Kn=null,to=rt()+500,Mi(e,t));do try{mO();break}catch(l){xN(e,l)}while(!0);i0(),Gu.current=i,be=s,ut!==null?t=0:(jt=null,$t=0,t=gt)}if(t!==0){if(t===2&&(s=Bm(e),s!==0&&(n=s,t=xp(e,s))),t===1)throw r=Ql,Mi(e,0),Ms(e,n),br(e,rt()),r;if(t===6)Ms(e,n);else{if(s=e.current.alternate,!(n&30)&&!fO(s)&&(t=Xu(e,n),t===2&&(i=Bm(e),i!==0&&(n=i,t=xp(e,i))),t===1))throw r=Ql,Mi(e,0),Ms(e,n),br(e,rt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(X(345));case 2:vi(e,dr,Kn);break;case 3:if(Ms(e,n),(n&130023424)===n&&(t=b0+500-rt(),10<t)){if(Mu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){nr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Jm(vi.bind(null,e,dr,Kn),t);break}vi(e,dr,Kn);break;case 4:if(Ms(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-wn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dO(n/1960))-n,10<n){e.timeoutHandle=Jm(vi.bind(null,e,dr,Kn),n);break}vi(e,dr,Kn);break;case 5:vi(e,dr,Kn);break;default:throw Error(X(329))}}}return br(e,rt()),e.callbackNode===r?gN.bind(null,e):null}function xp(e,t){var r=yl;return e.current.memoizedState.isDehydrated&&(Mi(e,t).flags|=256),e=Xu(e,t),e!==2&&(t=dr,dr=r,t!==null&&yp(t)),e}function yp(e){dr===null?dr=e:dr.push.apply(dr,e)}function fO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ms(e,t){for(t&=~v0,t&=~tf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wn(t),n=1<<r;e[r]=-1,t&=~n}}function Iv(e){if(be&6)throw Error(X(327));Ua();var t=Mu(e,0);if(!(t&1))return br(e,rt()),null;var r=Xu(e,t);if(e.tag!==0&&r===2){var n=Bm(e);n!==0&&(t=n,r=xp(e,n))}if(r===1)throw r=Ql,Mi(e,0),Ms(e,t),br(e,rt()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vi(e,dr,Kn),br(e,rt()),null}function w0(e,t){var r=be;be|=1;try{return e(t)}finally{be=r,be===0&&(to=rt()+500,Jd&&ai())}}function Qi(e){Fs!==null&&Fs.tag===0&&!(be&6)&&Ua();var t=be;be|=1;var r=Gr.transition,n=Ae;try{if(Gr.transition=null,Ae=1,e)return e()}finally{Ae=n,Gr.transition=r,be=t,!(be&6)&&ai()}}function j0(){Sr=Da.current,We(Da)}function Mi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,UT(r)),ut!==null)for(r=ut.return;r!==null;){var n=r;switch(r0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ru();break;case 3:Za(),We(yr),We(Gt),d0();break;case 5:u0(n);break;case 4:Za();break;case 13:We(Xe);break;case 19:We(Xe);break;case 10:a0(n.type._context);break;case 22:case 23:j0()}r=r.return}if(jt=e,ut=e=Js(e.current,null),$t=Sr=t,gt=0,Ql=null,v0=tf=Bi=0,dr=yl=null,ki!==null){for(t=0;t<ki.length;t++)if(r=ki[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ki=null}return e}function xN(e,t){do{var r=ut;try{if(i0(),wu.current=Hu,Ku){for(var n=Ze.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ku=!1}if(Ui=0,wt=pt=Ze=null,gl=!1,ql=0,y0.current=null,r===null||r.return===null){gt=1,Ql=t,ut=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=$t,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=jv(o);if(m!==null){m.flags&=-257,_v(m,o,l,i,t),m.mode&1&&wv(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}else{if(!(t&1)){wv(i,u,t),_0();break e}c=Error(X(426))}}else if(Ke&&l.mode&1){var y=jv(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),_v(y,o,l,i,t),n0(eo(c,l));break e}}i=c=eo(c,l),gt!==4&&(gt=2),yl===null?yl=[i]:yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=eN(i,c,t);pv(i,v);break e;case 1:l=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gs===null||!Gs.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=tN(i,l,t);pv(i,_);break e}}i=i.return}while(i!==null)}bN(r)}catch(j){t=j,ut===r&&r!==null&&(ut=r=r.return);continue}break}while(!0)}function yN(){var e=Gu.current;return Gu.current=Hu,e===null?Hu:e}function _0(){(gt===0||gt===3||gt===2)&&(gt=4),jt===null||!(Bi&268435455)&&!(tf&268435455)||Ms(jt,$t)}function Xu(e,t){var r=be;be|=2;var n=yN();(jt!==e||$t!==t)&&(Kn=null,Mi(e,t));do try{hO();break}catch(s){xN(e,s)}while(!0);if(i0(),be=r,Gu.current=n,ut!==null)throw Error(X(261));return jt=null,$t=0,gt}function hO(){for(;ut!==null;)vN(ut)}function mO(){for(;ut!==null&&!RA();)vN(ut)}function vN(e){var t=jN(e.alternate,e,Sr);e.memoizedProps=e.pendingProps,t===null?bN(e):ut=t,y0.current=null}function bN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=oO(r,t),r!==null){r.flags&=32767,ut=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ut=null;return}}else if(r=aO(r,t,Sr),r!==null){ut=r;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);gt===0&&(gt=5)}function vi(e,t,r){var n=Ae,s=Gr.transition;try{Gr.transition=null,Ae=1,pO(e,t,r,n)}finally{Gr.transition=s,Ae=n}return null}function pO(e,t,r,n){do Ua();while(Fs!==null);if(be&6)throw Error(X(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(GA(e,i),e===jt&&(ut=jt=null,$t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hc||(Hc=!0,_N(Du,function(){return Ua(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gr.transition,Gr.transition=null;var o=Ae;Ae=1;var l=be;be|=4,y0.current=null,cO(e,r),mN(r,e),IT(Gm),Iu=!!Hm,Gm=Hm=null,e.current=r,uO(r),FA(),be=l,Ae=o,Gr.transition=i}else e.current=r;if(Hc&&(Hc=!1,Fs=e,Ju=s),i=e.pendingLanes,i===0&&(Gs=null),BA(r.stateNode),br(e,rt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,e=pp,pp=null,e;return Ju&1&&e.tag!==0&&Ua(),i=e.pendingLanes,i&1?e===gp?vl++:(vl=0,gp=e):vl=0,ai(),null}function Ua(){if(Fs!==null){var e=e_(Ju),t=Gr.transition,r=Ae;try{if(Gr.transition=null,Ae=16>e?16:e,Fs===null)var n=!1;else{if(e=Fs,Fs=null,Ju=0,be&6)throw Error(X(331));var s=be;for(be|=4,se=e.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:xl(8,d,i)}var f=d.child;if(f!==null)f.return=d,se=f;else for(;se!==null;){d=se;var h=d.sibling,m=d.return;if(dN(d),d===u){se=null;break}if(h!==null){h.return=m,se=h;break}se=m}}}var p=i.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,se=v;break e}se=i.return}}var g=e.current;for(se=g;se!==null;){o=se;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,se=w;else e:for(o=g;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ef(9,l)}}catch(j){tt(l,l.return,j)}if(l===o){se=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,se=_;break e}se=l.return}}if(be=s,ai(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Wd,e)}catch{}n=!0}return n}finally{Ae=r,Gr.transition=t}}return!1}function $v(e,t,r){t=eo(r,t),t=eN(e,t,1),e=Hs(e,t,1),t=nr(),e!==null&&(fc(e,1,t),br(e,t))}function tt(e,t,r){if(e.tag===3)$v(e,e,r);else for(;t!==null;){if(t.tag===3){$v(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Gs===null||!Gs.has(n))){e=eo(r,e),e=tN(t,e,1),t=Hs(t,e,1),e=nr(),t!==null&&(fc(t,1,e),br(t,e));break}}t=t.return}}function gO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&r,jt===e&&($t&r)===r&&(gt===4||gt===3&&($t&130023424)===$t&&500>rt()-b0?Mi(e,0):v0|=r),br(e,t)}function wN(e,t){t===0&&(e.mode&1?(t=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):t=1);var r=nr();e=cs(e,t),e!==null&&(fc(e,t,r),br(e,r))}function xO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wN(e,r)}function yO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(t),wN(e,r)}var jN;jN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)hr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return hr=!1,iO(e,t,r);hr=!!(e.flags&131072)}else hr=!1,Ke&&t.flags&1048576&&k_(t,Uu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;_u(e,t),e=t.pendingProps;var s=Ya(t,Gt.current);qa(t,r),s=h0(null,t,n,e,s,r);var i=m0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)?(i=!0,Fu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,l0(t),s.updater=Zd,t.stateNode=s,s._reactInternals=t,sp(t,n,e,r),t=op(null,t,n,!0,i,r)):(t.tag=0,Ke&&i&&t0(t),er(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(_u(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=bO(n),e=dn(n,e),s){case 0:t=ap(null,t,n,e,r);break e;case 1:t=kv(null,t,n,e,r);break e;case 11:t=Nv(null,t,n,e,r);break e;case 14:t=Sv(null,t,n,dn(n.type,e),r);break e}throw Error(X(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),ap(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),kv(e,t,n,s,r);case 3:e:{if(iN(t),e===null)throw Error(X(387));n=t.pendingProps,i=t.memoizedState,s=i.element,O_(e,t),Vu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=eo(Error(X(423)),t),t=Pv(e,t,n,r,s);break e}else if(n!==s){s=eo(Error(X(424)),t),t=Pv(e,t,n,r,s);break e}else for(Cr=Ks(t.stateNode.containerInfo.firstChild),Ar=t,Ke=!0,mn=null,r=A_(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ja(),n===s){t=us(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return D_(t),e===null&&tp(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ym(n,s)?o=null:i!==null&&Ym(n,i)&&(t.flags|=32),sN(e,t),er(e,t,o,r),t.child;case 6:return e===null&&tp(t),null;case 13:return aN(e,t,r);case 4:return c0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xa(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Nv(e,t,n,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,qe(Bu,n._currentValue),n._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!yr.current){t=us(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ss(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),rp(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),rp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,qa(t,r),s=Zr(s),n=n(s),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,s=dn(n,t.pendingProps),s=dn(n.type,s),Sv(e,t,n,s,r);case 15:return rN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),_u(e,t),t.tag=1,vr(n)?(e=!0,Fu(t)):e=!1,qa(t,r),Z_(t,n,s),sp(t,n,s,r),op(null,t,n,!0,e,r);case 19:return oN(e,t,r);case 22:return nN(e,t,r)}throw Error(X(156,t.tag))};function _N(e,t){return Y1(e,t)}function vO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,r,n){return new vO(e,t,r,n)}function N0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bO(e){if(typeof e=="function")return N0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bg)return 11;if(e===Qg)return 14}return 2}function Js(e,t){var r=e.alternate;return r===null?(r=Kr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ku(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")N0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _a:return Ii(r.children,s,i,t);case Ug:o=8,s|=8;break;case Em:return e=Kr(12,r,t,s|2),e.elementType=Em,e.lanes=i,e;case Cm:return e=Kr(13,r,t,s),e.elementType=Cm,e.lanes=i,e;case Am:return e=Kr(19,r,t,s),e.elementType=Am,e.lanes=i,e;case D1:return rf(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T1:o=10;break e;case O1:o=9;break e;case Bg:o=11;break e;case Qg:o=14;break e;case Cs:o=16,n=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Kr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ii(e,t,r,n){return e=Kr(7,e,n,t),e.lanes=r,e}function rf(e,t,r,n){return e=Kr(22,e,n,t),e.elementType=D1,e.lanes=r,e.stateNode={isHidden:!1},e}function Wh(e,t,r){return e=Kr(6,e,null,t),e.lanes=r,e}function Kh(e,t,r){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ph(0),this.expirationTimes=Ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function S0(e,t,r,n,s,i,o,l,c){return e=new wO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},l0(i),e}function jO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function NN(e){if(!e)return ri;e=e._reactInternals;e:{if(na(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(vr(r))return N_(e,r,t)}return t}function SN(e,t,r,n,s,i,o,l,c){return e=S0(r,n,!0,e,s,i,o,l,c),e.context=NN(null),r=e.current,n=nr(),s=Ys(r),i=ss(n,s),i.callback=t??null,Hs(r,i,s),e.current.lanes=s,fc(e,s,n),br(e,n),e}function nf(e,t,r,n){var s=t.current,i=nr(),o=Ys(s);return r=NN(r),t.context===null?t.context=r:t.pendingContext=r,t=ss(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Hs(s,t,o),e!==null&&(jn(e,s,o,i),bu(e,s,o)),o}function Zu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function k0(e,t){zv(e,t),(e=e.alternate)&&zv(e,t)}function _O(){return null}var kN=typeof reportError=="function"?reportError:function(e){console.error(e)};function P0(e){this._internalRoot=e}sf.prototype.render=P0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));nf(e,t,null,null)};sf.prototype.unmount=P0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qi(function(){nf(null,e,null,null)}),t[ls]=null}};function sf(e){this._internalRoot=e}sf.prototype.unstable_scheduleHydration=function(e){if(e){var t=n_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ds.length&&t!==0&&t<Ds[r].priority;r++);Ds.splice(r,0,e),r===0&&i_(e)}};function E0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function af(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function NO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Zu(o);i.call(u)}}var o=SN(t,n,e,0,null,!1,!1,"",Lv);return e._reactRootContainer=o,e[ls]=o.current,$l(e.nodeType===8?e.parentNode:e),Qi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Zu(c);l.call(u)}}var c=S0(e,0,!1,null,null,!1,!1,"",Lv);return e._reactRootContainer=c,e[ls]=c.current,$l(e.nodeType===8?e.parentNode:e),Qi(function(){nf(t,c,r,n)}),c}function of(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Zu(o);l.call(c)}}nf(t,o,e,s)}else o=NO(r,t,e,s,n);return Zu(o)}t_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=al(t.pendingLanes);r!==0&&(Kg(t,r|1),br(t,rt()),!(be&6)&&(to=rt()+500,ai()))}break;case 13:Qi(function(){var n=cs(e,1);if(n!==null){var s=nr();jn(n,e,1,s)}}),k0(e,1)}};Hg=function(e){if(e.tag===13){var t=cs(e,134217728);if(t!==null){var r=nr();jn(t,e,134217728,r)}k0(e,134217728)}};r_=function(e){if(e.tag===13){var t=Ys(e),r=cs(e,t);if(r!==null){var n=nr();jn(r,e,t,n)}k0(e,t)}};n_=function(){return Ae};s_=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};Fm=function(e,t,r){switch(t){case"input":if(Dm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Yd(n);if(!s)throw Error(X(90));I1(n),Dm(n,s)}}}break;case"textarea":z1(e,r);break;case"select":t=r.value,t!=null&&za(e,!!r.multiple,t,!1)}};Q1=w0;V1=Qi;var SO={usingClientEntryPoint:!1,Events:[mc,Pa,Yd,U1,B1,w0]},Vo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kO={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=H1(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||_O,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Wd=Gc.inject(kO),$n=Gc}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SO;Lr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E0(t))throw Error(X(200));return jO(e,t,null,r)};Lr.createRoot=function(e,t){if(!E0(e))throw Error(X(299));var r=!1,n="",s=kN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=S0(e,1,!1,null,null,r,!1,n,s),e[ls]=t.current,$l(e.nodeType===8?e.parentNode:e),new P0(t)};Lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=H1(t),e=e===null?null:e.stateNode,e};Lr.flushSync=function(e){return Qi(e)};Lr.hydrate=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!0,r)};Lr.hydrateRoot=function(e,t,r){if(!E0(e))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=kN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=SN(t,null,e,1,r??null,s,!1,i,o),e[ls]=t.current,$l(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sf(t)};Lr.render=function(e,t,r){if(!af(t))throw Error(X(200));return of(null,e,t,!1,r)};Lr.unmountComponentAtNode=function(e){if(!af(e))throw Error(X(40));return e._reactRootContainer?(Qi(function(){of(null,null,e,!1,function(){e._reactRootContainer=null,e[ls]=null})}),!0):!1};Lr.unstable_batchedUpdates=w0;Lr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!af(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return of(e,t,r,!1,n)};Lr.version="18.3.1-next-f1338f8080-20240426";function PN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PN)}catch(e){console.error(e)}}PN(),P1.exports=Lr;var EN=P1.exports,CN,Rv=EN;CN=Rv.createRoot,Rv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}var qs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qs||(qs={}));const Fv="popstate";function PO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return vp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ed(s)}return CO(t,r,null,e)}function nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function AN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EO(){return Math.random().toString(36).substr(2,8)}function qv(e,t){return{usr:e.state,key:e.key,idx:t}}function vp(e,t,r,n){return r===void 0&&(r=null),Vl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jo(t):t,{state:r,key:t&&t.key||n||EO()})}function ed(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function CO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=qs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Vl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=qs.Pop;let y=d(),v=y==null?null:y-u;u=y,c&&c({action:l,location:x.location,delta:v})}function h(y,v){l=qs.Push;let g=vp(x.location,y,v);u=d()+1;let w=qv(g,u),_=x.createHref(g);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:x.location,delta:1})}function m(y,v){l=qs.Replace;let g=vp(x.location,y,v);u=d();let w=qv(g,u),_=x.createHref(g);o.replaceState(w,"",_),i&&c&&c({action:l,location:x.location,delta:0})}function p(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof y=="string"?y:ed(y);return g=g.replace(/ $/,"%20"),nt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let x={get action(){return l},get location(){return e(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Fv,f),c=y,()=>{s.removeEventListener(Fv,f),c=null}},createHref(y){return t(s,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:m,go(y){return o.go(y)}};return x}var Uv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Uv||(Uv={}));function AO(e,t,r){return r===void 0&&(r="/"),TO(e,t,r,!1)}function TO(e,t,r,n){let s=typeof t=="string"?jo(t):t,i=C0(s.pathname||"/",r);if(i==null)return null;let o=TN(e);OO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=BO(i);l=qO(o[c],u,n)}return l}function TN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Xs([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),TN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:RO(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of ON(i.path))s(i,o,c)}),t}function ON(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=ON(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function OO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:FO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const DO=/^:[\w-]+$/,MO=3,IO=2,$O=1,zO=10,LO=-2,Bv=e=>e==="*";function RO(e,t){let r=e.split("/"),n=r.length;return r.some(Bv)&&(n+=LO),t&&(n+=IO),r.filter(s=>!Bv(s)).reduce((s,i)=>s+(DO.test(i)?MO:i===""?$O:zO),n)}function FO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function qO(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Qv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Qv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Xs([i,f.pathname]),pathnameBase:KO(Xs([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Xs([i,f.pathnameBase]))}return o}function Qv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=UO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let x=l[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=l[f];return m&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function UO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),AN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function BO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return AN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function C0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function QO(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?jo(e):e;return{pathname:r?r.startsWith("/")?r:VO(r,t):t,search:HO(n),hash:GO(s)}}function VO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function A0(e,t){let r=WO(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function T0(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=jo(e):(s=Vl({},e),nt(!s.pathname||!s.pathname.includes("?"),Hh("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Hh("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Hh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=QO(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Xs=e=>e.join("/").replace(/\/\/+/g,"/"),KO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function YO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DN=["post","put","patch","delete"];new Set(DN);const JO=["get",...DN];new Set(JO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}const O0=b.createContext(null),XO=b.createContext(null),oi=b.createContext(null),lf=b.createContext(null),xs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),MN=b.createContext(null);function ZO(e,t){let{relative:r}=t===void 0?{}:t;_o()||nt(!1);let{basename:n,navigator:s}=b.useContext(oi),{hash:i,pathname:o,search:l}=zN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Xs([n,o])),s.createHref({pathname:c,search:l,hash:i})}function _o(){return b.useContext(lf)!=null}function li(){return _o()||nt(!1),b.useContext(lf).location}function IN(e){b.useContext(oi).static||b.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=b.useContext(xs);return e?f4():e4()}function e4(){_o()||nt(!1);let e=b.useContext(O0),{basename:t,future:r,navigator:n}=b.useContext(oi),{matches:s}=b.useContext(xs),{pathname:i}=li(),o=JSON.stringify(A0(s,r.v7_relativeSplatPath)),l=b.useRef(!1);return IN(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=T0(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Xs([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function $N(){let{matches:e}=b.useContext(xs),t=e[e.length-1];return t?t.params:{}}function zN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext(oi),{matches:s}=b.useContext(xs),{pathname:i}=li(),o=JSON.stringify(A0(s,n.v7_relativeSplatPath));return b.useMemo(()=>T0(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function t4(e,t){return r4(e,t)}function r4(e,t,r,n){_o()||nt(!1);let{navigator:s}=b.useContext(oi),{matches:i}=b.useContext(xs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=li(),d;if(t){var f;let y=typeof t=="string"?jo(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||nt(!1),d=y}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=AO(e,{pathname:m}),x=o4(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Xs([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Xs([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&x?b.createElement(lf.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qs.Pop}},x):x}function n4(){let e=d4(),t=YO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,null)}const s4=b.createElement(n4,null);class i4 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(xs.Provider,{value:this.props.routeContext},b.createElement(MN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a4(e){let{routeContext:t,match:r,children:n}=e,s=b.useContext(O0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(xs.Provider,{value:t},n)}function o4(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||nt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,p=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,p=!1,x=null,y=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||s4,c&&(u<0&&h===0?(p=!0,y=null):u===h&&(p=!0,y=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),g=()=>{let w;return m?w=x:p?w=y:f.route.Component?w=b.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,b.createElement(a4,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?b.createElement(i4,{location:r.location,revalidation:r.revalidation,component:x,error:m,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var LN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(LN||{}),td=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(td||{});function l4(e){let t=b.useContext(O0);return t||nt(!1),t}function c4(e){let t=b.useContext(XO);return t||nt(!1),t}function u4(e){let t=b.useContext(xs);return t||nt(!1),t}function RN(e){let t=u4(),r=t.matches[t.matches.length-1];return r.route.id||nt(!1),r.route.id}function d4(){var e;let t=b.useContext(MN),r=c4(td.UseRouteError),n=RN(td.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function f4(){let{router:e}=l4(LN.UseNavigateStable),t=RN(td.UseNavigateStable),r=b.useRef(!1);return IN(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wl({fromRouteId:t},i)))},[e,t])}function h4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yn(e){let{to:t,replace:r,state:n,relative:s}=e;_o()||nt(!1);let{future:i,static:o}=b.useContext(oi),{matches:l}=b.useContext(xs),{pathname:c}=li(),u=_t(),d=T0(t,A0(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Se(e){nt(!1)}function m4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=qs.Pop,navigator:i,static:o=!1,future:l}=e;_o()&&nt(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Wl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=jo(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:p="default"}=n,x=b.useMemo(()=>{let y=C0(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:m,key:p},navigationType:s}},[c,d,f,h,m,p,s]);return x==null?null:b.createElement(oi.Provider,{value:u},b.createElement(lf.Provider,{children:r,value:x}))}function p4(e){let{children:t,location:r}=e;return t4(bp(t),r)}new Promise(()=>{});function bp(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,bp(n.props.children,i));return}n.type!==Se&&nt(!1),!n.props.index||!n.props.children||nt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=bp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wp.apply(this,arguments)}function g4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function x4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function y4(e,t){return e.button===0&&(!t||t==="_self")&&!x4(e)}function jp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function v4(e,t){let r=jp(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const b4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w4="6";try{window.__reactRouterVersion=w4}catch{}const j4="startTransition",Vv=gA[j4];function _4(e){let{basename:t,children:r,future:n,window:s}=e,i=b.useRef();i.current==null&&(i.current=PO({window:s,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&Vv?Vv(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>h4(n),[n]),b.createElement(m4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const N4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Us=b.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=g4(t,b4),{basename:m}=b.useContext(oi),p,x=!1;if(typeof u=="string"&&S4.test(u)&&(p=u,N4))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=C0(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:x=!0}catch{}let y=ZO(u,{relative:s}),v=k4(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function g(w){n&&n(w),w.defaultPrevented||v(w)}return b.createElement("a",wp({},h,{href:p||y,onClick:x||i?n:g,ref:r,target:c}))});var Wv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Wv||(Wv={}));var Kv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Kv||(Kv={}));function k4(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=_t(),u=li(),d=zN(e,{relative:o});return b.useCallback(f=>{if(y4(f,r)){f.preventDefault();let h=n!==void 0?n:ed(u)===ed(d);c(e,{replace:h,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function FN(e){let t=b.useRef(jp(e)),r=b.useRef(!1),n=li(),s=b.useMemo(()=>v4(n.search,r.current?null:t.current),[n.search]),i=_t(),o=b.useCallback((l,c)=>{const u=jp(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function P4(e){return e?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?e.includes("..")||e.startsWith(".")||e.endsWith(".")?{isValid:!1,error:"Invalid email format"}:e.length>254?{isValid:!1,error:"Email too long"}:{isValid:!0}:{isValid:!1,error:"Invalid email format"}:{isValid:!1,error:"Email is required"}}function Kl(e){if(!e)return e;const t=["password","token","email","phone","ssn","credit_card"];if(typeof e=="string")return e.includes("@")&&e.includes(".")?"[EMAIL_REDACTED]":e.length>20&&/^[A-Za-z0-9+/=]+$/.test(e)?"[TOKEN_REDACTED]":e;if(Array.isArray(e))return e.map(r=>Kl(r));if(typeof e=="object"&&e!==null){const r={};for(const[n,s]of Object.entries(e)){const i=n.toLowerCase();t.some(o=>i.includes(o))?r[n]="[REDACTED]":typeof s=="object"?r[n]=Kl(s):r[n]=s}return r}return e}class E4{constructor(){this.attempts=new Map}isAllowed(t,r=5,n=6e4){const s=Date.now(),o=(this.attempts.get(t)||[]).filter(l=>s-l<n);return o.length>=r?!1:(o.push(s),this.attempts.set(t,o),!0)}reset(t){this.attempts.delete(t)}}const Hv=new E4;function C4(e){return(...t)=>{if(!e)return;const r=t.map(n=>Kl(n));console.log(...r)}}class Bs{static getInstance(){return Bs.instance||(Bs.instance=new Bs),Bs.instance}logSecurityEvent(t){const r={timestamp:new Date().toISOString(),type:t.type,userId:t.userId||"anonymous",details:Kl(t.details),ipAddress:t.ipAddress||"unknown",userAgent:t.userAgent||"unknown"};console.log("[SECURITY_AUDIT]",r)}async sendToAuditService(t){}}function A4(e,t){const r=Kl(t);console.error("[ERROR]",{message:e.message,stack:e.stack,context:r,timestamp:new Date().toISOString()})}let T4=class extends ae.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){A4(t,{errorInfo:r,timestamp:new Date().toISOString()})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please refresh the page to continue."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})}):this.props.children}};const O4="modulepreload",D4=function(e){return"/"+e},Gv={},gc=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=D4(c),c in Gv)return;Gv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":O4,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},M4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class D0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class I4 extends D0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $4 extends D0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z4 extends D0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _p;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_p||(_p={}));var L4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class R4{constructor(t,{headers:r={},customFetch:n,region:s=_p.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=M4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return L4(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(p=>{throw new I4(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new $4(d);if(!d.ok)throw new z4(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var fr={},M0={},cf={},xc={},uf={},df={},F4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ro=F4();const q4=ro.fetch,qN=ro.fetch.bind(ro),UN=ro.Headers,U4=ro.Request,B4=ro.Response,No=Object.freeze(Object.defineProperty({__proto__:null,Headers:UN,Request:U4,Response:B4,default:qN,fetch:q4},Symbol.toStringTag,{value:"Module"})),Q4=eA(No);var ff={};Object.defineProperty(ff,"__esModule",{value:!0});let V4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ff.default=V4;var BN=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const W4=BN(Q4),K4=BN(ff);let H4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=W4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,m="OK")}catch{i.status===404&&x===""?(h=204,m="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new K4.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};df.default=H4;var G4=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});const Y4=G4(df);let J4=class extends Y4.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};uf.default=J4;var X4=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const Z4=X4(uf);let e6=class extends Z4.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xc.default=e6;var t6=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const Wo=t6(xc);let r6=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Wo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};cf.default=r6;var hf={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.version=void 0;mf.version="0.0.0-automated";Object.defineProperty(hf,"__esModule",{value:!0});hf.DEFAULT_HEADERS=void 0;const n6=mf;hf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n6.version}`};var QN=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M0,"__esModule",{value:!0});const s6=QN(cf),i6=QN(xc),a6=hf;let o6=class VN{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},a6.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new s6.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new VN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new i6.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};M0.default=o6;var So=Xr&&Xr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});fr.PostgrestError=fr.PostgrestBuilder=fr.PostgrestTransformBuilder=fr.PostgrestFilterBuilder=fr.PostgrestQueryBuilder=fr.PostgrestClient=void 0;const WN=So(M0);fr.PostgrestClient=WN.default;const KN=So(cf);fr.PostgrestQueryBuilder=KN.default;const HN=So(xc);fr.PostgrestFilterBuilder=HN.default;const GN=So(uf);fr.PostgrestTransformBuilder=GN.default;const YN=So(df);fr.PostgrestBuilder=YN.default;const JN=So(ff);fr.PostgrestError=JN.default;var l6=fr.default={PostgrestClient:WN.default,PostgrestQueryBuilder:KN.default,PostgrestFilterBuilder:HN.default,PostgrestTransformBuilder:GN.default,PostgrestBuilder:YN.default,PostgrestError:JN.default};const{PostgrestClient:c6,PostgrestQueryBuilder:_K,PostgrestFilterBuilder:NK,PostgrestTransformBuilder:SK,PostgrestBuilder:kK,PostgrestError:PK}=l6;let Np;typeof window>"u"?Np=require("ws"):Np=window.WebSocket;const u6=Np,d6="2.11.10",f6={"X-Client-Info":`realtime-js/${d6}`},h6="1.0.0",XN=1e4,m6=1e3;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var hn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(hn||(hn={}));var Sp;(function(e){e.websocket="websocket"})(Sp||(Sp={}));var Ni;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ni||(Ni={}));class p6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ZN{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Re||(Re={}));const Yv=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=g6(o,e,t,s),i),{})},g6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?eS(i,o):kp(o)},eS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return b6(t,r)}switch(e){case Re.bool:return x6(t);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return y6(t);case Re.json:case Re.jsonb:return v6(t);case Re.timestamp:return w6(t);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return kp(t);default:return kp(t)}},kp=e=>e,x6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},y6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},v6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},b6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>eS(t,l))}return e},w6=e=>typeof e=="string"?e.replace(" ","T"):e,tS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Gh{constructor(t,r,n={},s=XN){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Jv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Jv||(Jv={}));class bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=bl.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bl.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),m=f.map(y=>y.presence_ref),p=d.filter(y=>m.indexOf(y.presence_ref)<0),x=f.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(l[u]=p),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xv||(Xv={}));var Zv;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zv||(Zv={}));var Hn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class I0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,hn.join,this.params,this.timeout),this.rejoinTimer=new ZN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bl(this),this.broadcastEndpointURL=tS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Hn.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Hn.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Hn.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,p=[];for(let x=0;x<m;x++){const y=h[x],{filter:{event:v,schema:g,table:w,filter:_}}=y,j=d&&d[x];if(j&&j.event===v&&j.schema===g&&j.table===w&&j.filter===_)p.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Hn.SUBSCRIBED);return}}).receive("error",d=>{this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Gh(this,hn.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gh(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=hn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,x,y;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(x=m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,x,y,v,g,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(p=m.filter)===null||p===void 0?void 0:p.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(g=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:x,table:y,commit_timestamp:v,type:g,errors:w}=p;h=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:v,eventType:g,new:{},old:{},errors:w}),this._getPayloadRecords(p))}m.callback(h,n)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&I0.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(hn.close,{},t)}_onError(t){this._on(hn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Yv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Yv(t.columns,t.old_record)),r}}const eb=()=>{},j6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _6{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=f6,this.params={},this.timeout=XN,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eb,this.ref=0,this.logger=eb,this.conn=null,this.sendBuffer=[],this.serializer=new p6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>gc(async()=>{const{default:c}=await Promise.resolve().then(()=>No);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Sp.websocket}`,this.httpEndpoint=tS(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ZN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=u6),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new N6(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:h6}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return Ni.Connecting;case Ba.open:return Ni.Open;case Ba.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new I0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(hn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(m6,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(hn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([j6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class N6{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ba.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class $0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function vt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class S6 extends $0{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pp extends $0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var k6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const rS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},P6=()=>k6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gc(()=>Promise.resolve().then(()=>No),void 0)).Response:Response}),Ep=e=>{if(Array.isArray(e))return e.map(r=>Ep(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ep(n)}),t};var sa=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),E6=(e,t,r)=>sa(void 0,void 0,void 0,function*(){const n=yield P6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new S6(Yh(s),e.status||500))}).catch(s=>{t(new Pp(Yh(s),s))}):t(new Pp(Yh(e),e))}),C6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function yc(e,t,r,n,s,i){return sa(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,C6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>E6(c,l,n))})})}function rd(e,t,r,n){return sa(this,void 0,void 0,function*(){return yc(e,"GET",t,r,n)})}function Ts(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"POST",t,n,s,r)})}function A6(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"PUT",t,n,s,r)})}function T6(e,t,r,n){return sa(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function nS(e,t,r,n,s){return sa(this,void 0,void 0,function*(){return yc(e,"DELETE",t,n,s,r)})}var lr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const O6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D6{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=rS(s)}uploadOrUpdate(t,r,n,s){return lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},tb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(vt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:tb.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(vt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return lr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ts(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new $0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}update(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ts(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=yield Ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}})}download(t,r){return lr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield rd(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(vt(l))return{data:null,error:l};throw l}})}info(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield rd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ep(n),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}exists(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield T6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(vt(n)&&n instanceof Pp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return lr(this,void 0,void 0,function*(){try{return{data:yield nS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}})}list(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},O6),r),{prefix:t||""});return{data:yield Ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(vt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const M6="2.7.1",I6={"X-Client-Info":`storage-js/${M6}`};var ha=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class $6{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},I6),r),this.fetch=rS(n)}listBuckets(){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(vt(t))return{data:null,error:t};throw t}})}getBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield rd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ha(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ha(this,void 0,void 0,function*(){try{return{data:yield A6(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(vt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield nS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(vt(r))return{data:null,error:r};throw r}})}}class z6 extends $6{constructor(t,r={},n){super(t,r,n)}from(t){return new D6(this.url,this.headers,t,this.fetch)}}const L6="2.50.0";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const R6={"X-Client-Info":`supabase-js-${ll}/${L6}`},F6={headers:R6},q6={schema:"public"},U6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},B6={};var Q6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const V6=e=>{let t;return e?t=e:typeof fetch>"u"?t=qN:t=fetch,(...r)=>t(...r)},W6=()=>typeof Headers>"u"?UN:Headers,K6=(e,t,r)=>{const n=V6(r),s=W6();return(i,o)=>Q6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var H6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function G6(e){return e.endsWith("/")?e:e+"/"}function Y6(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>H6(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const sS="2.70.0",wa=30*1e3,Cp=3,Jh=Cp*wa,J6="http://localhost:9999",X6="supabase.auth.token",Z6={"X-Client-Info":`gotrue-js/${sS}`},Ap="X-Supabase-Api-Version",iS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tD=6e5;class z0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rD extends z0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function nD(e){return fe(e)&&e.name==="AuthApiError"}class aS extends z0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ci extends z0{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Es extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sD(e){return fe(e)&&e.name==="AuthSessionMissingError"}class Yc extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jc extends ci{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xc extends ci{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iD(e){return fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class rb extends ci{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tp extends ci{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Xh(e){return fe(e)&&e.name==="AuthRetryableFetchError"}class nb extends ci{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wl extends ci{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sb=` 	
\r=`.split(""),aD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sb.length;t+=1)e[sb[t].charCodeAt(0)]=-2;for(let t=0;t<nd.length;t+=1)e[nd[t].charCodeAt(0)]=t;return e})();function ib(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(nd[n]),t.queuedBits-=6}}function oS(e,t,r){const n=aD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ab(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{cD(o,n,r)};for(let o=0;o<e.length;o+=1)oS(e.charCodeAt(o),s,i);return t.join("")}function oD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function lD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}oD(n,t)}}function cD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function uD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)oS(e.charCodeAt(s),r,n);return new Uint8Array(t)}function dD(e){const t=[];return lD(e,r=>t.push(r)),new Uint8Array(t)}function fD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ib(s,r,n)),ib(null,r,n),t.join("")}function hD(e){return Math.round(Date.now()/1e3)+e}function mD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const un=()=>typeof window<"u"&&typeof document<"u",xi={tested:!1,writable:!1},jl=()=>{if(!un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xi.tested)return xi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xi.tested=!0,xi.writable=!0}catch{xi.tested=!0,xi.writable=!1}return xi.writable};function pD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const lS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},gD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cS=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},eu=async(e,t)=>{await e.removeItem(t)};class pf{constructor(){this.promise=new pf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pf.promiseConstructor=Promise;function Zh(e){const t=e.split(".");if(t.length!==3)throw new wl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!eD.test(t[n]))throw new wl("JWT not in base64url format");return{header:JSON.parse(ab(t[0])),payload:JSON.parse(ab(t[1])),signature:uD(t[2]),raw:{header:t[0],payload:t[1]}}}async function xD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function yD(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function vD(e){return("0"+e.toString(16)).substr(-2)}function bD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,vD).join("")}async function wD(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function jD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await wD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ma(e,t,r=!1){const n=bD();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await cS(e,`${t}-code-verifier`,s);const i=await jD(n);return[i,n===i?"plain":"s256"]}const _D=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ND(e){const t=e.headers.get(Ap);if(!t||!t.match(_D))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function SD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pa(e){if(!PD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var ED=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const bi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CD=[502,503,504];async function ob(e){var t;if(!gD(e))throw new Tp(bi(e),0);if(CD.includes(e.status))throw new Tp(bi(e),e.status);let r;try{r=await e.json()}catch(i){throw new aS(bi(i),i)}let n;const s=ND(e);if(s&&s.getTime()>=iS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nb(bi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Es}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nb(bi(r),e.status,r.weak_password.reasons);throw new rD(bi(r),e.status||500,n)}const AD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function xe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ap]||(i[Ap]=iS["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await TD(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function TD(e,t,r,n,s,i){const o=AD(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Tp(bi(c),0)}if(l.ok||await ob(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ob(c)}}function Wn(e){var t;let r=null;ID(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=hD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function lb(e){const t=Wn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Is(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function OD(e){return{data:e,error:null}}function DD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=ED(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function MD(e){return e}function ID(e){return e.access_token&&e.refresh_token&&e.expires_in}const em=["global","local","others"];var $D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class zD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=lS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=em[0]){if(em.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Is})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=$D(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:DD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Is})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:MD});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const x=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pa(t);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Is})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pa(t);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Is})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pa(t);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Is})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pa(t.userId);try{const{data:r,error:n}=await xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pa(t.userId),pa(t.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}const LD={getItem:e=>jl()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{jl()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{jl()&&globalThis.localStorage.removeItem(e)}};function cb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function RD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ga={debug:!!(globalThis&&jl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FD extends uS{}async function qD(e,t,r){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}RD();const UD={url:J6,storageKey:X6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ub(e,t,r){return await r()}class Hl{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},UD),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new zD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lS(s.fetch),this.lock=s.lock||ub,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:un()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qD:this.lock=ub,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:jl()?this.storage=LD:(this.memoryStorage={},this.storage=cb(this.memoryStorage)):(this.memoryStorage={},this.storage=cb(this.memoryStorage)),un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=pD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),un()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),iD(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return fe(r)?{error:r}:{error:new aS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await ma(this.storage,this.storageKey)),i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:p},xform:Wn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Wn})}else throw new Jc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lb})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lb})}else throw new Jc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,f,h,m;let p,x;if("message"in t)p=t.message,x=t.signature;else{const{chain:y,wallet:v,statement:g,options:w}=t;let _;if(un())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),g?{statement:g}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),x=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:y,error:v}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:fD(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Wn});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(fe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Wn});if(await eu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ma(this.storage,this.storageKey));const{error:f}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Jc("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ma(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:OD})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Es;const{error:s}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Jc("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Jh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Is}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Es}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Is})})}catch(r){if(fe(r))return sD(r)&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Es;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ma(this.storage,this.storageKey));const{data:u,error:d}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Is});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Es;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Zh(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Es;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!un())throw new Xc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new rb("No code detected.");const{data:g,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Xc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=wa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const p=h-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(nD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=mD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ma(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return un()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(fe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await yD(async s=>(s>0&&await xD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Wn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Xh(i)&&Date.now()+o-n<wa})}catch(n){if(this._debug(r,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),un()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Zc(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jh;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Jh}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Xh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Es;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),fe(i)){const o={session:null,error:i};return Xh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await cS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wa}ms, refresh threshold is ${Cp} ticks`),s<=Cp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof uS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ma(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zh(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+tD>Date.now()))return n;const{data:s,error:i}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new wl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new wl("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Zh(n);if(SD(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const u=kD(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,dD(`${l}.${c}`)))throw new wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}Hl.nextInstanceID=0;const BD=Hl;class QD extends BD{constructor(t){super(t)}}var VD=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class WD{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=G6(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:q6,realtime:B6,auth:Object.assign(Object.assign({},U6),{storageKey:u}),global:F6},f=Y6(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=K6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new c6(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new R4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new z6(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return VD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new _6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KD=(e,t,r)=>new WD(e,t,r),HD="https://pgnhngzjjgxkwcdqotky.supabase.co",GD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4",Q=KD(HD,GD),dS=b.createContext(void 0);function YD({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0),[i,o]=b.useState(()=>!1);b.useRef(i);const l=C4(i);b.useEffect(()=>{},[i]);const c=b.useCallback(()=>{{console.warn("Developer mode cannot be enabled in production");return}},[]),u=l,d=(k,E,P)=>{u(` [${new Date().toISOString()}] AuthContext Loading: ${k} -> ${E}${P?` (${P})`:""}`)};b.useEffect(()=>{d("Initial setup",!0,"Component mounted"),Q.auth.getSession().then(async({data:{session:E}})=>{E!=null&&E.user?(u(" Initial session found, loading user profile...",E.user.id),d("Initial session found",!0,"Loading user profile"),await m(E.user.id,E.user.email)||(u(" Initial session found but no user profile exists"),d("No user profile found",!1,"Setting user to null"),r(null))):(u(" No initial session found"),d("No initial session",!1,"No session found"),r(null)),s(!1),d("Initial setup complete",!1,"Auth initialization finished")});const{data:{subscription:k}}=Q.auth.onAuthStateChange(async(E,P)=>{var D,O;u(" Auth state change:",E,(D=P==null?void 0:P.user)==null?void 0:D.id,"Current loading state:",n),d(`Auth event: ${E}`,!0,`Session: ${((O=P==null?void 0:P.user)==null?void 0:O.id)||"none"}`),E==="SIGNED_OUT"||E==="USER_DELETED"?(u(" User signed out or deleted"),d("User signed out/deleted",!1,"Clearing user state"),r(null)):E==="USER_UPDATED"&&(P!=null&&P.user)&&(u(" User updated, refreshing profile"),d("User updated event",!0,"Refreshing profile"),await m(P.user.id,P.user.email)),s(!1),d(`Auth event: ${E} complete`,!1,"Event handling finished")});return()=>k.unsubscribe()},[]);const f=async k=>{try{const{data:E,error:P}=await Q.from("subscriptions").select("*").eq("user_id",k).eq("status","active").order("created_at",{ascending:!1}).maybeSingle();return P?(console.error(" Error loading subscription:",P),null):E}catch(E){return console.error(" Error fetching subscription:",E),null}},h=async k=>{try{console.log(" Fetching plan settings for plan:",k);const{data:E,error:P}=await Q.from("plan_settings").select("*").eq("plan_id",k).maybeSingle();return P?(console.error(" Error loading plan settings:",P),null):(console.log(" Plan settings loaded:",E),E)}catch(E){return console.error(" Error fetching plan settings:",E),null}},m=async(k,E)=>{try{d("loadUserProfile start",!0,`User: ${k}`),u(" Loading user profile for:",k);const{data:P,error:D}=await Q.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          avatar_url,
          created_at,
          updated_at,
          nickname
        `).eq("id",k).maybeSingle();if(D)return u(" Error loading user profile:",D),d("Profile load error",!1,D.message),r(null),null;if(!P)return u(" No user profile found for user:",k),d("No profile found",!1,"Profile does not exist"),r(null),null;let O=await f(k),z=null;if(u(" User subscription check:",{userId:k,hasSubscription:!!O,subscriptionPlan:O==null?void 0:O.plan,teamId:P.team_id,teamRole:P.team_role}),P.team_id&&(!O||O.plan==="free")){u(" Team member with no/free subscription, checking team owner plan settings for team:",P.team_id);const{data:F,error:I}=await Q.rpc("get_team_owner_plan_settings",{p_team_id:P.team_id});!I&&(F!=null&&F.success)?(u(" Found team owner plan settings:",F.subscription_plan),u(" Using team owner plan settings directly"),z=F.plan_settings):u(" Failed to get team owner plan settings:",I||(F==null?void 0:F.error))}z?u(" Using team owner plan settings:",z):O?(u(" Loading plan settings for plan:",O.plan),z=await h(O.plan),u(" Plan settings loaded:",z)):(u(' No active subscription found, fetching settings for "free" plan'),z=await h("free"),u(" Free plan settings loaded:",z));const B={id:P.id,email:P.email||E||"",name:P.name,nickname:P.nickname,role:P.role,teamId:P.team_id,teamRole:P.team_role,createdAt:P.created_at,subscription:O?{id:O.id,plan:O.plan,status:O.status,currentPeriodEnd:O.current_period_end,cancelAtPeriodEnd:O.cancel_at_period_end,cancelledAt:O.cancelled_at}:void 0,planSettings:z};return u(" User profile loaded successfully:",B),r(B),d("loadUserProfile success",!1,`User: ${B.name}`),B}catch(P){return u(" Error loading user data:",P),d("loadUserProfile error",!1,P instanceof Error?P.message:"Unknown error"),r(null),null}finally{s(!1),d("loadUserProfile finally",!1,"Function complete")}},S={user:t,login:async(k,E)=>{try{d("login start",!0,`Email: ${k}`),u(" Starting login process for:",k);try{const z=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"login",identifier:k})});if(z.status===429){const R=await z.json(),B=R.retryAfter?Math.ceil(R.retryAfter/60):15;throw new Error(`Too many login attempts. Please try again in ${B} minutes.`)}z.ok||console.warn("Rate limiting check failed, proceeding with login")}catch(z){console.warn("Rate limiting check failed:",z)}const{data:P,error:D}=await Q.auth.signInWithPassword({email:k,password:E});if(D)throw u(" Login failed:",D),d("login error",!1,D.message),D;if(!P.user)throw u(" Login failed: No user returned"),d("login no user",!1,"No user in response"),new Error("Login failed");if(u(" Auth login successful, loading user profile..."),!await m(P.user.id,P.user.email))throw new Error("User profile not found. Please contact support or try creating a new account.");u(" Login process completed successfully"),d("login success",!1,"Login complete")}catch(P){throw d("login catch",!1,P instanceof Error?P.message:"Unknown error"),P}},signup:async(k,E,P,D)=>{try{d("signup start",!0,`Email: ${k}, Team: ${D}`),u(" Starting signup process for:",{email:k,name:P,teamName:D}),u(" Step 1: Creating auth user...");const{data:O,error:z}=await Q.auth.signUp({email:k,password:E});if(z)throw u(" Auth user creation failed:",z),d("signup auth error",!1,z.message),z;if(!O.user)throw u(" Auth user creation failed: No user returned"),d("signup no user",!1,"No user in auth response"),new Error("Failed to create user");const R=O.user.id;u(" Auth user created successfully:",R),u(" Step 2: Creating team...");const{data:B,error:F}=await Q.from("teams").insert([{name:D,description:`${D} team`,owner_id:R,member_count:1,max_members:5}]).select().single();if(F)throw u(" Team creation failed:",F),d("signup team error",!1,F.message),F;u(" Team created successfully:",B),u(" Step 3: Creating user profile...");const{error:I}=await Q.from("user_profiles").insert([{id:R,name:P,email:k,role:"user",team_id:B.id,team_role:"owner"}]);if(I)throw u(" User profile creation failed:",I),d("signup profile error",!1,I.message),I;u(" User profile created successfully"),u(" Step 4: Creating subscription...");const{error:C}=await Q.from("subscriptions").insert([{user_id:R,plan:"free",status:"active",current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString(),cancel_at_period_end:!1}]);if(C)throw u(" Subscription creation failed:",C),d("signup subscription error",!1,C.message),C;u(" Subscription created successfully"),u(" Step 5: Creating team member entry...");const{error:T}=await Q.from("team_members").insert([{user_id:R,team_id:B.id,role:"owner",status:"active",invited_by:R}]);if(T)throw u(" Team member creation failed:",T),d("signup member error",!1,T.message),T;u(" Team member entry created successfully");try{await Q.functions.invoke("send-email-brevo",{body:{to:k,subject:`Welcome to PBE Quiz, ${P}!`,htmlContent:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h1 style="color: #4F46E5; text-align: center;">Welcome to PBE Quiz!</h1>
                <p>Hello ${P},</p>
                <p>Welcome to PBE Quiz! Your account has been successfully created, and you are now part of the <strong>${D}</strong> team.</p>
                <p>You can start mastering the Pathfinder Bible Experience by logging into your dashboard and taking your first quiz.</p>
                <div style="text-align: center; margin: 30px 0;">
                  <a href="${window.location.origin}/dashboard" style="background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">Go to Dashboard</a>
                </div>
                <p>Here's what you can do next:</p>
                <ul>
                  <li>Take a Quick Start Quiz to test your knowledge</li>
                  <li>Create custom quizzes focused on specific books</li>
                  <li>View your study schedule and assignments</li>
                  <li>Track your progress and achievements</li>
                </ul>
                <p>Best regards,<br>The PBE Quiz Team</p>
              </div>
            `}}),u(" Custom welcome email sent via Brevo")}catch(L){console.error(" Failed to send custom welcome email via Brevo:",L)}if(u(" Step 6: Loading complete user profile..."),!await m(R,O.user.email))throw new Error("Failed to load user profile after signup. Please try logging in.");u(" Signup process completed successfully!"),d("signup success",!1,"Signup complete")}catch(O){throw u(" Signup process failed:",O),d("signup catch",!1,O instanceof Error?O.message:"Unknown error"),O}},signupForInvitation:async(k,E,P)=>{try{d("signup for invitation start",!0,`Email: ${k}`),u(" Starting invitation signup process for:",{email:k,name:P}),u(" Step 1: Creating auth user...");const{data:D,error:O}=await Q.auth.signUp({email:k,password:E});if(O)throw u(" Auth user creation failed:",O),d("signup for invitation auth error",!1,O.message),O;if(!D.user)throw u(" Auth user creation failed: No user returned"),d("signup for invitation no user",!1,"No user in auth response"),new Error("Failed to create user");const z=D.user.id;u(" Auth user created successfully:",z),u(" Step 2: Creating user profile...");const{error:R}=await Q.from("user_profiles").insert([{id:z,email:k,name:P,role:"user",team_id:null,team_role:null}]);if(R)throw u(" User profile creation failed:",R),d("signup for invitation profile error",!1,R.message),R;if(u(" User profile created successfully"),u(" Step 3: Loading complete user profile..."),!await m(z,k))throw new Error("Failed to load user profile after creation");u(" Invitation signup process completed successfully!"),d("signup for invitation success",!1,"Signup complete")}catch(D){throw d("signup for invitation catch",!1,D instanceof Error?D.message:"Unknown error"),D}},updateUserProfile:async k=>{if(!t)throw new Error("User not authenticated");try{d("updateUserProfile start",!0,`Updates: ${Object.keys(k).join(", ")}`),u(" Updating user profile:",k);const E={};if(k.name!==void 0&&(E.name=k.name),k.email!==void 0&&(E.email=k.email),k.nickname!==void 0&&(E.nickname=k.nickname),Object.keys(E).length>0){const{error:P}=await Q.from("user_profiles").update(E).eq("id",t.id);if(P)throw u(" Error updating user profile:",P),P}if(k.email&&k.email!==t.email){const{error:P}=await Q.auth.updateUser({email:k.email});if(P)throw u(" Error updating auth user email:",P),P}await m(t.id,k.email||t.email),u(" User profile updated successfully")}catch(E){throw u(" Error updating user profile:",E),d("updateUserProfile error",!1,E instanceof Error?E.message:"Unknown error"),E}finally{d("updateUserProfile finally",!1,"Function complete")}},updatePassword:async k=>{if(!t)throw new Error("User not authenticated");try{d("updatePassword start",!0,"Updating password"),u(" Updating user password...");const{error:E}=await Q.auth.updateUser({password:k});if(E)throw u(" Error updating password:",E),d("updatePassword error",!1,E.message),E;u(" Password updated successfully"),d("updatePassword success",!1,"Password updated")}catch(E){throw u(" Error updating password:",E),d("updatePassword catch",!1,E instanceof Error?E.message:"Unknown error"),E}finally{d("updatePassword finally",!1,"Function complete")}},forgotPassword:async k=>{try{d("forgotPassword start",!0,`Email: ${k}`),u(" Sending password reset email to:",k);try{const D=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"password_reset",identifier:k})});if(D.status===429){const O=await D.json(),z=O.retryAfter?Math.ceil(O.retryAfter/60):60;throw new Error(`Too many password reset attempts. Please try again in ${z} minutes.`)}D.ok||console.warn("Rate limiting check failed, proceeding with password reset")}catch(D){console.warn("Rate limiting check failed:",D)}const E=window.location.origin,{error:P}=await Q.auth.resetPasswordForEmail(k,{redirectTo:`${E}/reset-password`});if(P)throw u(" Error sending password reset email:",P),d("forgotPassword error",!1,P.message),P;u(" Password reset email sent successfully"),d("forgotPassword success",!1,"Reset email sent")}catch(E){throw d("forgotPassword catch",!1,E instanceof Error?E.message:"Unknown error"),E}},resetPasswordWithToken:async(k,E)=>{try{d("resetPasswordWithToken start",!0,"Setting session and updating password"),u(" Resetting password with token...");const{data:P,error:D}=await Q.auth.setSession({access_token:k,refresh_token:""});if(D)throw u(" Error setting session with reset token:",D),d("resetPasswordWithToken session error",!1,D.message),new Error("Invalid or expired reset token");if(!P.user)throw u(" No user found with reset token"),d("resetPasswordWithToken no user",!1,"Invalid reset token"),new Error("Invalid reset token");u(" Reset token verified, updating password...");const{data:O,error:z}=await Q.auth.updateUser({password:E});if(z)throw u(" Error updating password:",z),d("resetPasswordWithToken update error",!1,z.message),z;u(" Password updated successfully"),d("resetPasswordWithToken success",!1,"Password reset complete"),O.user&&await m(P.user.id,P.user.email)}catch(P){throw u(" Error resetting password:",P),d("resetPasswordWithToken catch",!1,P instanceof Error?P.message:"Unknown error"),P}},refreshUser:async()=>{try{d("refreshUser start",!0,"Force refresh requested");const{data:{session:k},error:E}=await Q.auth.getSession();if(E)return u(" Session error during refresh:",E),d("Session error during refresh",!1,E.message),r(null),null;if(!(k!=null&&k.user))return u(" No session found during refresh"),d("No session during refresh",!1,"Setting user to null"),r(null),null;u(" Refreshing user profile for:",k.user.id);const P=await m(k.user.id,k.user.email);return P&&u(" User profile refreshed successfully:",P.name),d("refreshUser complete",!1,"Manual refresh complete"),P}catch(k){return u(" Error refreshing user:",k),d("refreshUser error",!1,k instanceof Error?k.message:"Unknown error"),null}},logout:async()=>{d("logout start",!0,"Signing out"),t&&Bs.getInstance().logSecurityEvent({type:"logout",userId:t.id,details:{success:!0}});const{error:k}=await Q.auth.signOut();k?(u("Error signing out:",k),d("logout error",!1,k.message)):d("logout success",!1,"Signed out successfully"),r(null),s(!1)},loading:n,isDeveloperMode:i,toggleDeveloperMode:c,developerLog:u};return a.jsx(dS.Provider,{value:S,children:e})}function ge(){const e=b.useContext(dS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const fS=b.createContext(void 0);function JD({children:e}){const[t,r]=b.useState([]),[n,s]=b.useState(!1),{user:i,developerLog:o,loading:l}=ge(),c=b.useCallback(async()=>{if(l){o(" QuestionContext: Auth still loading, skipping question fetch");return}s(!0);try{o(" Fetching questions from Supabase...");const{data:m,error:p}=await Q.from("questions").select("*").order("created_at",{ascending:!1});if(p)throw o(" Error fetching questions:",p),p;o(" Questions fetched successfully:",(m==null?void 0:m.length)||0,"questions"),r(m||[])}catch(m){o(" Error in fetchQuestions:",m),r([])}finally{s(!1)}},[l,o]);ae.useEffect(()=>{l||(o(" QuestionContext: Auth loaded, fetching questions"),c())},[l,c]);const u=b.useCallback(async m=>{if(!i)throw new Error("User not authenticated");try{o(" Creating new question...");const{data:p,error:x}=await Q.from("questions").insert([{...m,created_by:i.id}]).select().single();if(x)throw o(" Error creating question:",x),x;o(" Question created successfully:",p),r(y=>[p,...y])}catch(p){throw o(" Error creating question:",p),p}},[i]),d=b.useCallback(async(m,p)=>{try{o(" Updating question:",m);const{data:x,error:y}=await Q.from("questions").update(p).eq("id",m).select().single();if(y)throw o(" Error updating question:",y),y;o(" Question updated successfully:",x),r(v=>v.map(g=>g.id===m?x:g))}catch(x){throw o(" Error updating question:",x),x}},[]),f=b.useCallback(async m=>{try{o(" Deleting question:",m);const{error:p}=await Q.from("questions").delete().eq("id",m);if(p)throw o(" Error deleting question:",p),p;o(" Question deleted successfully"),r(x=>x.filter(y=>y.id!==m))}catch(p){throw o(" Error deleting question:",p),p}},[]),h={questions:t,loading:n,fetchQuestions:c,createQuestion:u,updateQuestion:d,deleteQuestion:f};return a.jsx(fS.Provider,{value:h,children:e})}function ia(){const e=b.useContext(fS);if(e===void 0)throw new Error("useQuestion must be used within a QuestionProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...XD,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${ZD(e)}`,l].join(" "),...u},[...t.map(([f,h])=>b.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=re("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=re("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=re("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=re("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=re("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=re("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=re("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=re("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=re("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=re("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=re("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ma(e,t="free",r){const n={free:0,pro:1,enterprise:2},s=n[t];return e.length===0?[]:(e.reduce((i,o)=>(i[o.tier]=(i[o.tier]||0)+1,i),{}),e.filter(i=>n[i.tier]<=s))}function wS(e,t,r){if(!e||e.length===0)return[];if(!t||t.length===0)return[];let n=[];return t.forEach((i,o)=>{i.chapters.forEach(l=>{const c=e.filter(u=>u.book_of_bible===i.book&&u.chapter===l);if(i.verses&&i.verses.length>0){const u=c.filter(d=>{const f=d.verse||1;return i.verses.includes(f)});n=[...n,...u]}else n=[...n,...c]})}),n.filter((i,o,l)=>o===l.findIndex(c=>c.id===i.id))}function Va(e,t){const r=t.filter(s=>s.book_of_bible===e);return[...new Set(r.map(s=>s.chapter))].sort((s,i)=>s-i)}function tm(e,t,r){const n=r.filter(i=>i.book_of_bible===e&&i.chapter===t);return[...new Set(n.map(i=>i.verse||1))].sort((i,o)=>i-o)}function jS(e){return[...new Set(e.map(r=>r.book_of_bible))].sort()}function _S(e){switch(e){case"quick-start":return"Quick Start";case"custom":return"Custom Quiz";case"study-assignment":return"Study Assignment";default:return"Quiz"}}function gb(e){switch(e){case"quick-start":return Pn;case"custom":return ko;case"study-assignment":return Yt;default:return zt}}function wM(e,t,r="free",n){n==null||n("*** Entering calculateTotalQuestionsForStudyItems ***"),n==null||n("*** Input studyItems:",e),n==null||n("*** Total questions available:",t.length),n==null||n(" calculateTotalQuestionsForStudyItems: Input studyItems:",e),n==null||n(" calculateTotalQuestionsForStudyItems: Total questions in database:",t.length),n==null||n(" calculateTotalQuestionsForStudyItems: User subscription plan:",r);const s=wS(t,e),i=Ma(s,r);return n==null||n("*** Final count:",i.length),n==null||n(" calculateTotalQuestionsForStudyItems: Total count:",i.length),i.length}function xf(e){if(!e||e.length===0)return 0;const t=e.filter(s=>s.completed).sort((s,i)=>new Date(i.date).getTime()-new Date(s.date).getTime());if(t.length===0)return 0;let r=0;const n=new Date;n.setHours(0,0,0,0);for(let s=0;s<t.length;s++){const i=new Date(t[s].date);i.setHours(0,0,0,0);const o=new Date(n);if(o.setDate(n.getDate()-s),i.getTime()===o.getTime())r++;else break}return r}function Mt(e){if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r===0?`${t}h`:`${t}h ${r}m`}function ao(e){if(!e||e.length===0)return"";const t=e.reduce((r,n)=>(r[n.book]||(r[n.book]=[]),r[n.book].push(n),r),{});return Object.entries(t).map(([r,n])=>{const s=n.reduce((o,l)=>{const c=l.chapter||"General";return o[c]||(o[c]=[]),o[c].push(l),o},{}),i=Object.keys(s).filter(o=>o!=="General").sort((o,l)=>parseInt(o)-parseInt(l)).map(o=>{const l=s[o].filter(c=>c.verse).map(c=>c.verse).sort((c,u)=>c-u);if(l.length>0){const c=[];let u=l[0],d=l[0];for(let f=1;f<l.length;f++)l[f]===d+1?d=l[f]:(c.push(u===d?`${u}`:`${u}-${d}`),u=d=l[f]);return c.push(u===d?`${u}`:`${u}-${d}`),`${o}:${c.join(",")}`}else return o});return s.General&&i.unshift("General"),`${r} ${i.join(", ")}`}).join("; ")}const NS=b.createContext(void 0);function jM({children:e}){const[t,r]=b.useState([]),n=b.useCallback((i,o)=>{const l=Math.random().toString(36).substring(2,9),c={id:l,type:i,achievement:o};r(u=>[...u,c]),setTimeout(()=>{r(u=>u.filter(d=>d.id!==l))},5e3)},[]),s=b.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return a.jsxs(NS.Provider,{value:{showNotification:n},children:[e,a.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(i=>a.jsx(NM,{notification:i,onDismiss:()=>s(i.id)},i.id))})]})}function _M(){const e=b.useContext(NS);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function NM({notification:e,onDismiss:t}){const{achievement:r}=e;return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex items-center space-x-4 animate-fade-in-up",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:r.badge_icon_url||"/vite.svg",alt:"Achievement Badge",className:"h-10 w-10 rounded-full"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Achievement Unlocked!"}),a.jsx("p",{className:"text-md text-indigo-600 font-bold",children:r.name}),a.jsx("p",{className:"text-xs text-gray-500",children:r.description})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:""})]})}async function SM(e){try{console.log(" Checking if assignment should be marked as completed:",e);const{data:t,error:r}=await Q.from("study_assignments").select("id, study_items, completed").eq("id",e).single();if(r)throw console.error(" Error loading assignment for completion check:",r),r;if(!t){console.warn(" Assignment not found for completion check:",e);return}if(t.completed){console.log(" Assignment already marked as completed:",e);return}console.log(" Assignment study items:",t.study_items);const{data:n,error:s}=await Q.from("quiz_sessions").select("id, questions, status, completed_at").eq("assignment_id",e).eq("status","completed");if(s)throw console.error(" Error loading quiz sessions for assignment:",s),s;if(console.log(" Completed quiz sessions for assignment:",(n==null?void 0:n.length)||0),!n||n.length===0){console.log(" No completed quiz sessions found for assignment");return}const i=new Set;n.forEach(u=>{u.questions&&Array.isArray(u.questions)&&u.questions.forEach(d=>{if(d.book_of_bible&&d.chapter){const f=`${d.book_of_bible}:${d.chapter}`;i.add(f)}})}),console.log(" Chapters completed through quizzes:",Array.from(i));const o=t.study_items||[],l=new Set;o.forEach(u=>{u.chapters.forEach(d=>{const f=`${u.book}:${d}`;l.add(f)})}),console.log(" Required chapters for assignment:",Array.from(l));const c=Array.from(l).every(u=>i.has(u));if(console.log(" All chapters completed?",c),c){console.log(" All chapters completed! Marking assignment as completed:",e);const{error:u}=await Q.from("study_assignments").update({completed:!0,completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(u)throw console.error(" Error marking assignment as completed:",u),u;console.log(" Assignment marked as completed successfully")}else{const u=i.size,d=l.size;console.log(` Assignment progress: ${u}/${d} chapters completed`)}}catch(t){throw console.error(" Failed to check/mark assignment completion:",t),t}}const Pu=500;function kM(e){return Math.floor(e/Pu)+1}function PM(e,t){const r=(t-1)*Pu,n=t*Pu,s=e-r,i=n-e,o=s/Pu*100;return{current:s,needed:i,percentage:Math.min(o,100)}}const SS=b.createContext(void 0);function EM({children:e}){const[t,r]=b.useState([]),{user:n,developerLog:s}=ge(),{showNotification:i}=_M();b.useEffect(()=>{n?o():r([])},[n]);const o=b.useCallback(async()=>{if(n)try{const{data:p,error:x}=await Q.from("quiz_sessions").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(x)throw x;r(p||[])}catch(p){console.error("Error loading quiz sessions:",p)}},[n]),l=b.useCallback(async p=>{if(!n)throw new Error("User not authenticated");try{s(" Creating quiz session...",p);const{data:x,error:y}=await Q.from("quiz_sessions").insert([p]).select().single();if(y)throw s(" Error creating quiz session:",y),y;return s(" Quiz session created successfully:",x),r(v=>[x,...v]),x.id}catch(x){throw s(" Error creating quiz session:",x),x}},[n]),c=b.useCallback(p=>t.find(x=>x.id===p)||null,[t]),u=b.useCallback(async(p,x)=>{try{s(" Updating quiz session:",p,"with updates:",x);const{error:y}=await Q.from("quiz_sessions").update(x).eq("id",p);if(y)throw y;if(x.status==="completed"){s(" Quiz session completed, checking for assignment...");const v=t.find(g=>g.id===p);if(v!=null&&v.assignment_id){s(" Found assignment ID, marking as completed:",v.assignment_id);try{s(" Found session for completion check:",v?{id:v.id,assignment_id:v.assignment_id,type:v.type}:"not found"),await SM(v.assignment_id),s(" Assignment completion check completed")}catch(g){s(" Failed to check/mark assignment as completed:",g)}}else s(" No assignment associated with this quiz session"),s(" Session data:",v?{id:v.id,type:v.type,assignment_id:v.assignment_id}:"session not found");if(n&&v){s(" Starting gamification updates for user:",n.id);try{const{data:g,error:w}=await Q.from("user_stats").select("*").eq("user_id",n.id).maybeSingle();if(w)throw w;let _=((g==null?void 0:g.total_xp)||0)+v.total_points,j=(g==null?void 0:g.current_level)||0;j=kM(_);const{data:N,error:S}=await Q.from("quiz_sessions").select("completed_at").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1});if(S)throw S;const k=xf(N||[]);let E=Math.max((g==null?void 0:g.longest_streak)||0,k);const{error:P}=await Q.from("user_stats").upsert({user_id:n.id,total_xp:_,current_level:j,longest_streak:E,last_quiz_date:new Date().toISOString().split("T")[0]},{onConflict:"user_id"});if(P)throw P;s(" User stats updated:",{newTotalXp:_,newCurrentLevel:j,newLongestStreak:E});const{data:D,error:O}=await Q.from("achievements").select("*");if(O)throw O;const{data:z,error:R}=await Q.from("user_achievements").select("achievement_id").eq("user_id",n.id);if(R)throw R;const B=new Set(z==null?void 0:z.map(F=>F.achievement_id));for(const F of D||[])if(!B.has(F.id)){let I=!1;switch(F.criteria_type){case"total_quizzes_completed":const{count:C,error:T}=await Q.from("quiz_sessions").select("*",{count:"exact",head:!0}).eq("user_id",n.id).eq("status","completed");!T&&C>=F.criteria_value&&(I=!0);break;case"total_points_earned":_>=F.criteria_value&&(I=!0);break;case"longest_streak":E>=F.criteria_value&&(I=!0);break;case"total_questions_answered":const{count:A,error:L}=await Q.from("quiz_question_logs").select("*",{count:"exact",head:!0}).eq("user_id",n.id);!L&&A>=F.criteria_value&&(I=!0);break;case"perfect_quiz":v.total_points===v.max_points&&v.max_points>0&&(I=!0);break;case"speed_demon":v.estimated_minutes<=F.criteria_value&&(I=!0);break;case"accuracy_book_ruth":case"accuracy_book_esther":case"accuracy_book_daniel":case"accuracy_chapter":case"accuracy_tier_free":case"accuracy_tier_pro":case"accuracy_tier_enterprise":s(` Achievement criteria_type '${F.criteria_type}' not yet fully implemented in logic.`);break}if(I){const{error:C}=await Q.from("user_achievements").insert({user_id:n.id,achievement_id:F.id,unlocked_at:new Date().toISOString()});if(C)throw C;i("achievement",F),s(" Achievement unlocked:",F.name)}}}catch(g){console.error(" Gamification update failed:",g)}}}r(v=>v.map(g=>g.id===p?{...g,...x,updated_at:new Date().toISOString()}:g))}catch(y){throw console.error("Error updating quiz session:",y),y}},[t,n,s]),d=b.useCallback(async p=>{try{const{error:x}=await Q.from("quiz_sessions").delete().eq("id",p);if(x)throw x;r(y=>y.filter(v=>v.id!==p))}catch(x){throw console.error("Error deleting quiz session:",x),x}},[]),f=b.useCallback(p=>t.filter(x=>x.user_id===p&&(x.status==="active"||x.status==="paused")),[t]),h=b.useCallback((p,x)=>t.find(y=>y.assignment_id===p&&y.user_id===x&&(y.status==="active"||y.status==="paused"))||null,[t]),m={sessions:t,createQuizSession:l,loadQuizSession:c,updateQuizSession:u,deleteQuizSession:d,getActiveSessionsForUser:f,getSessionForAssignment:h};return a.jsx(SS.Provider,{value:m,children:e})}function aa(){const e=b.useContext(SS);if(e===void 0)throw new Error("useQuizSession must be used within a QuizSessionProvider");return e}function ft({children:e,requireAdmin:t=!1,requireUser:r=!1,allowedTeamRoles:n}){const{user:s,loading:i}=ge();if(i)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!s)return a.jsx(Yn,{to:"/login",replace:!0});if(t&&s.role!=="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(r&&s.role==="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(n&&s.teamRole&&!n.includes(s.teamRole))return a.jsx(Yn,{to:"/dashboard",replace:!0});try{return a.jsx(a.Fragment,{children:e})}catch(o){return console.error("ProtectedRoute error:",o),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})})}}const Ip=[{id:"prod_SkGQB88LYZDhx4",name:"PBE Pro Play Yearly",description:"Annual subscription to PBE Pro Play with advanced features and unlimited access.",priceId:"price_1RoltBEGamTK7gLp3vFhnNpg",mode:"subscription",price:150,currency:"GBP",interval:"year",features:["Unlimited quiz sessions","Advanced analytics","Priority support","All question tiers","Team collaboration","Study schedule management"]},{id:"prod_SkG8EHn9mio3Tg",name:"PBE Pro Plan",description:"Monthly subscription to PBE Pro with enhanced features and team management.",priceId:"price_1RolccEGamTK7gLpzKYZ7aYj",mode:"subscription",price:15,currency:"GBP",interval:"month",features:["Enhanced quiz features","Team management","Progress tracking","Pro question access","Custom quiz builder","Basic analytics"]}];function Ko(e,t){const r=t||"GBP",n=typeof e=="number"&&!isNaN(e)?e:0;return new Intl.NumberFormat("en-GB",{style:"currency",currency:r}).format(n)}function xa(e){return new Date(e*1e3).toLocaleDateString()}function _l(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),r=e%60;return`${t}:${r.toString().padStart(2,"0")}`}function $p(e){const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),s=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);return s<1?"Just now":s<60?`${s} minute${s!==1?"s":""} ago`:i<24?`${i} hour${i!==1?"s":""} ago`:o<7?`${o} day${o!==1?"s":""} ago`:r.toLocaleDateString()}var vc=e=>e.type==="checkbox",Ei=e=>e instanceof Date,tr=e=>e==null;const kS=e=>typeof e=="object";var st=e=>!tr(e)&&!Array.isArray(e)&&kS(e)&&!Ei(e),CM=e=>st(e)&&e.target?vc(e.target)?e.target.checked:e.target.value:e,AM=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,TM=(e,t)=>e.has(AM(t)),OM=e=>{const t=e.constructor&&e.constructor.prototype;return st(t)&&t.hasOwnProperty("isPrototypeOf")},U0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bt(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(U0&&(e instanceof Blob||n))&&(r||st(e)))if(t=r?[]:{},!r&&!OM(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Bt(e[s]));else return e;return t}var yf=e=>Array.isArray(e)?e.filter(Boolean):[],ct=e=>e===void 0,ce=(e,t,r)=>{if(!t||!st(e))return r;const n=yf(t.split(/[,[\].]+?/)).reduce((s,i)=>tr(s)?s:s[i],e);return ct(n)||n===e?ct(e[t])?r:e[t]:n},On=e=>typeof e=="boolean",B0=e=>/^\w*$/.test(e),PS=e=>yf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Qe=(e,t,r)=>{let n=-1;const s=B0(t)?[t]:PS(t),i=s.length,o=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=st(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const xb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ae.createContext(null);var DM=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==xn.all&&(t._proxyFormState[o]=!n||xn.all),e[o]}});return s};const MM=typeof window<"u"?b.useLayoutEffect:b.useEffect;var Mn=e=>typeof e=="string",IM=(e,t,r,n,s)=>Mn(e)?(n&&t.watch.add(e),ce(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ce(r,i))):(n&&(t.watchAll=!0),r),$M=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Nl=e=>Array.isArray(e)?e:[e],yb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},zp=e=>tr(e)||!kS(e);function zs(e,t){if(zp(e)||zp(t))return e===t;if(Ei(e)&&Ei(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const i=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Ei(i)&&Ei(o)||st(i)&&st(o)||Array.isArray(i)&&Array.isArray(o)?!zs(i,o):i!==o)return!1}}return!0}var cr=e=>st(e)&&!Object.keys(e).length,Q0=e=>e.type==="file",yn=e=>typeof e=="function",id=e=>{if(!U0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ES=e=>e.type==="select-multiple",V0=e=>e.type==="radio",zM=e=>V0(e)||vc(e),rm=e=>id(e)&&e.isConnected;function LM(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ct(e)?n++:e[t[n++]];return e}function RM(e){for(const t in e)if(e.hasOwnProperty(t)&&!ct(e[t]))return!1;return!0}function mt(e,t){const r=Array.isArray(t)?t:B0(t)?[t]:PS(t),n=r.length===1?e:LM(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(st(n)&&cr(n)||Array.isArray(n)&&RM(n))&&mt(e,r.slice(0,-1)),e}var CS=e=>{for(const t in e)if(yn(e[t]))return!0;return!1};function ad(e,t={}){const r=Array.isArray(e);if(st(e)||r)for(const n in e)Array.isArray(e[n])||st(e[n])&&!CS(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ad(e[n],t[n])):tr(e[n])||(t[n]=!0);return t}function AS(e,t,r){const n=Array.isArray(e);if(st(e)||n)for(const s in e)Array.isArray(e[s])||st(e[s])&&!CS(e[s])?ct(t)||zp(r[s])?r[s]=Array.isArray(e[s])?ad(e[s],[]):{...ad(e[s])}:AS(e[s],tr(t)?{}:t[s],r[s]):r[s]=!zs(e[s],t[s]);return r}var Ho=(e,t)=>AS(e,t,ad(t));const vb={value:!1,isValid:!1},bb={value:!0,isValid:!0};var TS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ct(e[0].attributes.value)?ct(e[0].value)||e[0].value===""?bb:{value:e[0].value,isValid:!0}:bb:vb}return vb},OS=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ct(e)?e:t?e===""?NaN:e&&+e:r&&Mn(e)?new Date(e):n?n(e):e;const wb={isValid:!1,value:null};var DS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,wb):wb;function jb(e){const t=e.ref;return Q0(t)?t.files:V0(t)?DS(e.refs).value:ES(t)?[...t.selectedOptions].map(({value:r})=>r):vc(t)?TS(e.refs).value:OS(ct(t.value)?e.ref.value:t.value,e)}var FM=(e,t,r,n)=>{const s={};for(const i of e){const o=ce(t,i);o&&Qe(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},od=e=>e instanceof RegExp,Go=e=>ct(e)?e:od(e)?e.source:st(e)?od(e.value)?e.value.source:e.value:e,_b=e=>({isOnSubmit:!e||e===xn.onSubmit,isOnBlur:e===xn.onBlur,isOnChange:e===xn.onChange,isOnAll:e===xn.all,isOnTouch:e===xn.onTouched});const Nb="AsyncFunction";var qM=e=>!!e&&!!e.validate&&!!(yn(e.validate)&&e.validate.constructor.name===Nb||st(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Nb)),UM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Sb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sl=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ce(e,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sl(l,t))break}else if(st(l)&&Sl(l,t))break}}};function kb(e,t,r){const n=ce(e,r);if(n||B0(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ce(t,i),l=ce(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:r}}var BM=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return cr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||xn.all))},QM=(e,t,r)=>!e||!t||e===t||Nl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),VM=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,WM=(e,t)=>!yf(ce(e,t)).length&&mt(e,t),KM=(e,t,r)=>{const n=Nl(ce(e,r));return Qe(n,"root",t[r]),Qe(e,r,n),e},Eu=e=>Mn(e);function Pb(e,t,r="validate"){if(Eu(e)||Array.isArray(e)&&e.every(Eu)||On(e)&&!e)return{type:r,message:Eu(e)?e:"",ref:t}}var ya=e=>st(e)&&!od(e)?e:{value:e,message:""},Eb=async(e,t,r,n,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:p,name:x,valueAsNumber:y,mount:v}=e._f,g=ce(r,x);if(!v||t.has(x))return{};const w=l?l[0]:o,_=O=>{s&&w.reportValidity&&(w.setCustomValidity(On(O)?"":O||""),w.reportValidity())},j={},N=V0(o),S=vc(o),k=N||S,E=(y||Q0(o))&&ct(o.value)&&ct(g)||id(o)&&o.value===""||g===""||Array.isArray(g)&&!g.length,P=$M.bind(null,x,n,j),D=(O,z,R,B=Vn.maxLength,F=Vn.minLength)=>{const I=O?z:R;j[x]={type:O?B:F,message:I,ref:o,...P(O?B:F,I)}};if(i?!Array.isArray(g)||!g.length:c&&(!k&&(E||tr(g))||On(g)&&!g||S&&!TS(l).isValid||N&&!DS(l).isValid)){const{value:O,message:z}=Eu(c)?{value:!!c,message:c}:ya(c);if(O&&(j[x]={type:Vn.required,message:z,ref:w,...P(Vn.required,z)},!n))return _(z),j}if(!E&&(!tr(f)||!tr(h))){let O,z;const R=ya(h),B=ya(f);if(!tr(g)&&!isNaN(g)){const F=o.valueAsNumber||g&&+g;tr(R.value)||(O=F>R.value),tr(B.value)||(z=F<B.value)}else{const F=o.valueAsDate||new Date(g),I=A=>new Date(new Date().toDateString()+" "+A),C=o.type=="time",T=o.type=="week";Mn(R.value)&&g&&(O=C?I(g)>I(R.value):T?g>R.value:F>new Date(R.value)),Mn(B.value)&&g&&(z=C?I(g)<I(B.value):T?g<B.value:F<new Date(B.value))}if((O||z)&&(D(!!O,R.message,B.message,Vn.max,Vn.min),!n))return _(j[x].message),j}if((u||d)&&!E&&(Mn(g)||i&&Array.isArray(g))){const O=ya(u),z=ya(d),R=!tr(O.value)&&g.length>+O.value,B=!tr(z.value)&&g.length<+z.value;if((R||B)&&(D(R,O.message,z.message),!n))return _(j[x].message),j}if(m&&!E&&Mn(g)){const{value:O,message:z}=ya(m);if(od(O)&&!g.match(O)&&(j[x]={type:Vn.pattern,message:z,ref:o,...P(Vn.pattern,z)},!n))return _(z),j}if(p){if(yn(p)){const O=await p(g,r),z=Pb(O,w);if(z&&(j[x]={...z,...P(Vn.validate,z.message)},!n))return _(z.message),j}else if(st(p)){let O={};for(const z in p){if(!cr(O)&&!n)break;const R=Pb(await p[z](g,r),w,z);R&&(O={...R,...P(z,R.message)},_(R.message),n&&(j[x]=O))}if(!cr(O)&&(j[x]={ref:w,...O},!n))return j}}return _(!0),j};const HM={mode:xn.onSubmit,reValidateMode:xn.onChange,shouldFocusError:!0};function GM(e={}){let t={...HM,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:yn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=st(t.defaultValues)||st(t.values)?Bt(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Bt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:yb(),state:yb()},m=t.criteriaMode===xn.all,p=M=>$=>{clearTimeout(u),u=setTimeout(M,$)},x=async M=>{if(!t.disabled&&(d.isValid||f.isValid||M)){const $=t.resolver?cr((await S()).errors):await E(n,!0);$!==r.isValid&&h.state.next({isValid:$})}},y=(M,$)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(l.mount)).forEach(U=>{U&&($?Qe(r.validatingFields,U,$):mt(r.validatingFields,U))}),h.state.next({validatingFields:r.validatingFields,isValidating:!cr(r.validatingFields)}))},v=(M,$=[],U,K,G=!0,J=!0)=>{if(K&&U&&!t.disabled){if(o.action=!0,J&&Array.isArray(ce(n,M))){const ue=U(ce(n,M),K.argA,K.argB);G&&Qe(n,M,ue)}if(J&&Array.isArray(ce(r.errors,M))){const ue=U(ce(r.errors,M),K.argA,K.argB);G&&Qe(r.errors,M,ue),WM(r.errors,M)}if((d.touchedFields||f.touchedFields)&&J&&Array.isArray(ce(r.touchedFields,M))){const ue=U(ce(r.touchedFields,M),K.argA,K.argB);G&&Qe(r.touchedFields,M,ue)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ho(s,i)),h.state.next({name:M,isDirty:D(M,$),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Qe(i,M,$)},g=(M,$)=>{Qe(r.errors,M,$),h.state.next({errors:r.errors})},w=M=>{r.errors=M,h.state.next({errors:r.errors,isValid:!1})},_=(M,$,U,K)=>{const G=ce(n,M);if(G){const J=ce(i,M,ct(U)?ce(s,M):U);ct(J)||K&&K.defaultChecked||$?Qe(i,M,$?J:jb(G._f)):R(M,J),o.mount&&x()}},j=(M,$,U,K,G)=>{let J=!1,ue=!1;const Ne={name:M};if(!t.disabled){if(!U||K){(d.isDirty||f.isDirty)&&(ue=r.isDirty,r.isDirty=Ne.isDirty=D(),J=ue!==Ne.isDirty);const Oe=zs(ce(s,M),$);ue=!!ce(r.dirtyFields,M),Oe?mt(r.dirtyFields,M):Qe(r.dirtyFields,M,!0),Ne.dirtyFields=r.dirtyFields,J=J||(d.dirtyFields||f.dirtyFields)&&ue!==!Oe}if(U){const Oe=ce(r.touchedFields,M);Oe||(Qe(r.touchedFields,M,U),Ne.touchedFields=r.touchedFields,J=J||(d.touchedFields||f.touchedFields)&&Oe!==U)}J&&G&&h.state.next(Ne)}return J?Ne:{}},N=(M,$,U,K)=>{const G=ce(r.errors,M),J=(d.isValid||f.isValid)&&On($)&&r.isValid!==$;if(t.delayError&&U?(c=p(()=>g(M,U)),c(t.delayError)):(clearTimeout(u),c=null,U?Qe(r.errors,M,U):mt(r.errors,M)),(U?!zs(G,U):G)||!cr(K)||J){const ue={...K,...J&&On($)?{isValid:$}:{},errors:r.errors,name:M};r={...r,...ue},h.state.next(ue)}},S=async M=>{y(M,!0);const $=await t.resolver(i,t.context,FM(M||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return y(M),$},k=async M=>{const{errors:$}=await S(M);if(M)for(const U of M){const K=ce($,U);K?Qe(r.errors,U,K):mt(r.errors,U)}else r.errors=$;return $},E=async(M,$,U={valid:!0})=>{for(const K in M){const G=M[K];if(G){const{_f:J,...ue}=G;if(J){const Ne=l.array.has(J.name),Oe=G._f&&qM(G._f);Oe&&d.validatingFields&&y([K],!0);const Jt=await Eb(G,l.disabled,i,m,t.shouldUseNativeValidation&&!$,Ne);if(Oe&&d.validatingFields&&y([K]),Jt[J.name]&&(U.valid=!1,$))break;!$&&(ce(Jt,J.name)?Ne?KM(r.errors,Jt,J.name):Qe(r.errors,J.name,Jt[J.name]):mt(r.errors,J.name))}!cr(ue)&&await E(ue,$,U)}}return U.valid},P=()=>{for(const M of l.unMount){const $=ce(n,M);$&&($._f.refs?$._f.refs.every(U=>!rm(U)):!rm($._f.ref))&&je(M)}l.unMount=new Set},D=(M,$)=>!t.disabled&&(M&&$&&Qe(i,M,$),!zs(A(),s)),O=(M,$,U)=>IM(M,l,{...o.mount?i:ct($)?s:Mn(M)?{[M]:$}:$},U,$),z=M=>yf(ce(o.mount?i:s,M,t.shouldUnregister?ce(s,M,[]):[])),R=(M,$,U={})=>{const K=ce(n,M);let G=$;if(K){const J=K._f;J&&(!J.disabled&&Qe(i,M,OS($,J)),G=id(J.ref)&&tr($)?"":$,ES(J.ref)?[...J.ref.options].forEach(ue=>ue.selected=G.includes(ue.value)):J.refs?vc(J.ref)?J.refs.forEach(ue=>{(!ue.defaultChecked||!ue.disabled)&&(Array.isArray(G)?ue.checked=!!G.find(Ne=>Ne===ue.value):ue.checked=G===ue.value||!!G)}):J.refs.forEach(ue=>ue.checked=ue.value===G):Q0(J.ref)?J.ref.value="":(J.ref.value=G,J.ref.type||h.state.next({name:M,values:Bt(i)})))}(U.shouldDirty||U.shouldTouch)&&j(M,G,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&T(M)},B=(M,$,U)=>{for(const K in $){if(!$.hasOwnProperty(K))return;const G=$[K],J=M+"."+K,ue=ce(n,J);(l.array.has(M)||st(G)||ue&&!ue._f)&&!Ei(G)?B(J,G,U):R(J,G,U)}},F=(M,$,U={})=>{const K=ce(n,M),G=l.array.has(M),J=Bt($);Qe(i,M,J),G?(h.array.next({name:M,values:Bt(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&h.state.next({name:M,dirtyFields:Ho(s,i),isDirty:D(M,J)})):K&&!K._f&&!tr(J)?B(M,J,U):R(M,J,U),Sb(M,l)&&h.state.next({...r}),h.state.next({name:o.mount?M:void 0,values:Bt(i)})},I=async M=>{o.mount=!0;const $=M.target;let U=$.name,K=!0;const G=ce(n,U),J=Oe=>{K=Number.isNaN(Oe)||Ei(Oe)&&isNaN(Oe.getTime())||zs(Oe,ce(i,U,Oe))},ue=_b(t.mode),Ne=_b(t.reValidateMode);if(G){let Oe,Jt;const gi=$.type?jb(G._f):CM(M),Cn=M.type===xb.BLUR||M.type===xb.FOCUS_OUT,vh=!UM(G._f)&&!t.resolver&&!ce(r.errors,U)&&!G._f.deps||VM(Cn,ce(r.touchedFields,U),r.isSubmitted,Ne,ue),Io=Sb(U,l,Cn);Qe(i,U,gi),Cn?(G._f.onBlur&&G._f.onBlur(M),c&&c(0)):G._f.onChange&&G._f.onChange(M);const $o=j(U,gi,Cn),Oc=!cr($o)||Io;if(!Cn&&h.state.next({name:U,type:M.type,values:Bt(i)}),vh)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Cn&&x():Cn||x()),Oc&&h.state.next({name:U,...Io?{}:$o});if(!Cn&&Io&&h.state.next({...r}),t.resolver){const{errors:zo}=await S([U]);if(J(gi),K){const me=kb(r.errors,n,U),Xt=kb(zo,n,me.name||U);Oe=Xt.error,U=Xt.name,Jt=cr(zo)}}else y([U],!0),Oe=(await Eb(G,l.disabled,i,m,t.shouldUseNativeValidation))[U],y([U]),J(gi),K&&(Oe?Jt=!1:(d.isValid||f.isValid)&&(Jt=await E(n,!0)));K&&(G._f.deps&&T(G._f.deps),N(U,Jt,Oe,$o))}},C=(M,$)=>{if(ce(r.errors,$)&&M.focus)return M.focus(),1},T=async(M,$={})=>{let U,K;const G=Nl(M);if(t.resolver){const J=await k(ct(M)?M:G);U=cr(J),K=M?!G.some(ue=>ce(J,ue)):U}else M?(K=(await Promise.all(G.map(async J=>{const ue=ce(n,J);return await E(ue&&ue._f?{[J]:ue}:ue)}))).every(Boolean),!(!K&&!r.isValid)&&x()):K=U=await E(n);return h.state.next({...!Mn(M)||(d.isValid||f.isValid)&&U!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:U}:{},errors:r.errors}),$.shouldFocus&&!K&&Sl(n,C,M?G:l.mount),K},A=M=>{const $={...o.mount?i:s};return ct(M)?$:Mn(M)?ce($,M):M.map(U=>ce($,U))},L=(M,$)=>({invalid:!!ce(($||r).errors,M),isDirty:!!ce(($||r).dirtyFields,M),error:ce(($||r).errors,M),isValidating:!!ce(r.validatingFields,M),isTouched:!!ce(($||r).touchedFields,M)}),q=M=>{M&&Nl(M).forEach($=>mt(r.errors,$)),h.state.next({errors:M?r.errors:{}})},ee=(M,$,U)=>{const K=(ce(n,M,{_f:{}})._f||{}).ref,G=ce(r.errors,M)||{},{ref:J,message:ue,type:Ne,...Oe}=G;Qe(r.errors,M,{...Oe,...$,ref:K}),h.state.next({name:M,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&K&&K.focus&&K.focus()},ne=(M,$)=>yn(M)?h.state.subscribe({next:U=>M(O(void 0,$),U)}):O(M,$,!0),Y=M=>h.state.subscribe({next:$=>{QM(M.name,$.name,M.exact)&&BM($,M.formState||d,at,M.reRenderRoot)&&M.callback({values:{...i},...r,...$})}}).unsubscribe,ve=M=>(o.mount=!0,f={...f,...M.formState},Y({...M,formState:f})),je=(M,$={})=>{for(const U of M?Nl(M):l.mount)l.mount.delete(U),l.array.delete(U),$.keepValue||(mt(n,U),mt(i,U)),!$.keepError&&mt(r.errors,U),!$.keepDirty&&mt(r.dirtyFields,U),!$.keepTouched&&mt(r.touchedFields,U),!$.keepIsValidating&&mt(r.validatingFields,U),!t.shouldUnregister&&!$.keepDefaultValue&&mt(s,U);h.state.next({values:Bt(i)}),h.state.next({...r,...$.keepDirty?{isDirty:D()}:{}}),!$.keepIsValid&&x()},Et=({disabled:M,name:$})=>{(On(M)&&o.mount||M||l.disabled.has($))&&(M?l.disabled.add($):l.disabled.delete($))},Z=(M,$={})=>{let U=ce(n,M);const K=On($.disabled)||On(t.disabled);return Qe(n,M,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:M}},name:M,mount:!0,...$}}),l.mount.add(M),U?Et({disabled:On($.disabled)?$.disabled:t.disabled,name:M}):_(M,!0,$.value),{...K?{disabled:$.disabled||t.disabled}:{},...t.progressive?{required:!!$.required,min:Go($.min),max:Go($.max),minLength:Go($.minLength),maxLength:Go($.maxLength),pattern:Go($.pattern)}:{},name:M,onChange:I,onBlur:I,ref:G=>{if(G){Z(M,$),U=ce(n,M);const J=ct(G.value)&&G.querySelectorAll&&G.querySelectorAll("input,select,textarea")[0]||G,ue=zM(J),Ne=U._f.refs||[];if(ue?Ne.find(Oe=>Oe===J):J===U._f.ref)return;Qe(n,M,{_f:{...U._f,...ue?{refs:[...Ne.filter(rm),J,...Array.isArray(ce(s,M))?[{}]:[]],ref:{type:J.type,name:M}}:{ref:J}}}),_(M,!1,void 0,J)}else U=ce(n,M,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||$.shouldUnregister)&&!(TM(l.array,M)&&o.action)&&l.unMount.add(M)}}},W=()=>t.shouldFocusError&&Sl(n,C,l.mount),te=M=>{On(M)&&(h.state.next({disabled:M}),Sl(n,($,U)=>{const K=ce(n,U);K&&($.disabled=K._f.disabled||M,Array.isArray(K._f.refs)&&K._f.refs.forEach(G=>{G.disabled=K._f.disabled||M}))},0,!1))},H=(M,$)=>async U=>{let K;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let G=Bt(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:J,values:ue}=await S();r.errors=J,G=ue}else await E(n);if(l.disabled.size)for(const J of l.disabled)Qe(G,J,void 0);if(mt(r.errors,"root"),cr(r.errors)){h.state.next({errors:{}});try{await M(G,U)}catch(J){K=J}}else $&&await $({...r.errors},U),W(),setTimeout(W);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cr(r.errors)&&!K,submitCount:r.submitCount+1,errors:r.errors}),K)throw K},De=(M,$={})=>{ce(n,M)&&(ct($.defaultValue)?F(M,Bt(ce(s,M))):(F(M,$.defaultValue),Qe(s,M,Bt($.defaultValue))),$.keepTouched||mt(r.touchedFields,M),$.keepDirty||(mt(r.dirtyFields,M),r.isDirty=$.defaultValue?D(M,Bt(ce(s,M))):D()),$.keepError||(mt(r.errors,M),d.isValid&&x()),h.state.next({...r}))},pe=(M,$={})=>{const U=M?Bt(M):s,K=Bt(U),G=cr(M),J=G?s:K;if($.keepDefaultValues||(s=U),!$.keepValues){if($.keepDirtyValues){const ue=new Set([...l.mount,...Object.keys(Ho(s,i))]);for(const Ne of Array.from(ue))ce(r.dirtyFields,Ne)?Qe(J,Ne,ce(i,Ne)):F(Ne,ce(J,Ne))}else{if(U0&&ct(M))for(const ue of l.mount){const Ne=ce(n,ue);if(Ne&&Ne._f){const Oe=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(id(Oe)){const Jt=Oe.closest("form");if(Jt){Jt.reset();break}}}}for(const ue of l.mount)F(ue,ce(J,ue))}i=Bt(J),h.array.next({values:{...J}}),h.state.next({values:{...J}})}l={mount:$.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!$.keepIsValid||!!$.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:$.keepSubmitCount?r.submitCount:0,isDirty:G?!1:$.keepDirty?r.isDirty:!!($.keepDefaultValues&&!zs(M,s)),isSubmitted:$.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:G?{}:$.keepDirtyValues?$.keepDefaultValues&&i?Ho(s,i):r.dirtyFields:$.keepDefaultValues&&M?Ho(s,M):$.keepDirty?r.dirtyFields:{},touchedFields:$.keepTouched?r.touchedFields:{},errors:$.keepErrors?r.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ee=(M,$)=>pe(yn(M)?M(i):M,$),Le=(M,$={})=>{const U=ce(n,M),K=U&&U._f;if(K){const G=K.refs?K.refs[0]:K.ref;G.focus&&(G.focus(),$.shouldSelect&&yn(G.select)&&G.select())}},at=M=>{r={...r,...M}},oe={control:{register:Z,unregister:je,getFieldState:L,handleSubmit:H,setError:ee,_subscribe:Y,_runSchema:S,_focusError:W,_getWatch:O,_getDirty:D,_setValid:x,_setFieldArray:v,_setDisabledField:Et,_setErrors:w,_getFieldArray:z,_reset:pe,_resetDefaultValues:()=>yn(t.defaultValues)&&t.defaultValues().then(M=>{Ee(M,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:te,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return l},set _names(M){l=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:ve,trigger:T,register:Z,handleSubmit:H,watch:ne,setValue:F,getValues:A,reset:Ee,resetField:De,clearErrors:q,unregister:je,setError:ee,setFocus:Le,getFieldState:L};return{...oe,formControl:oe}}function Gi(e={}){const t=ae.useRef(void 0),r=ae.useRef(void 0),[n,s]=ae.useState({isDirty:!1,isValidating:!1,isLoading:yn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:yn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:GM(e),formState:n},e.formControl&&e.defaultValues&&!yn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,MM(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),ae.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ae.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ae.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ae.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ae.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ae.useEffect(()=>{e.values&&!zs(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ae.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=DM(n,i),t.current}function Ue({type:e,title:t,message:r,dismissible:n=!1,onDismiss:s,className:i=""}){const o=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-700";case"error":return"bg-red-50 border-red-200 text-red-700";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-700";case"info":return"bg-blue-50 border-blue-200 text-blue-700";default:return"bg-gray-50 border-gray-200 text-gray-700"}},l=()=>{const c="h-5 w-5 flex-shrink-0";switch(e){case"success":return a.jsx(Ot,{className:`${c} text-green-600`});case"error":return a.jsx(tn,{className:`${c} text-red-600`});case"warning":return a.jsx(Fn,{className:`${c} text-yellow-600`});case"info":return a.jsx(mb,{className:`${c} text-blue-600`});default:return a.jsx(mb,{className:`${c} text-gray-600`})}};return a.jsx("div",{className:`border rounded-lg p-4 ${o()} ${i}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[l(),a.jsxs("div",{className:"flex-1 min-w-0",children:[t&&a.jsx("h3",{className:"text-sm font-medium mb-1",children:t}),a.jsx("p",{className:"text-sm",children:r})]}),n&&s&&a.jsx("button",{onClick:s,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(Ln,{className:"h-4 w-4"})})]})})}function Lt({size:e="md",text:t,className:r="",fullScreen:n=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},i={sm:"text-sm",md:"text-base",lg:"text-lg"};return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto mb-4 ${s[e]}`,children:a.jsx(pb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})}):a.jsx("div",{className:`flex items-center justify-center ${r}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto ${t?"mb-4":""} ${s[e]}`,children:a.jsx(pb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})})}function oo({size:e="sm",className:t=""}){const r={sm:"h-4 w-4",md:"h-5 w-5"};return a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-current ${r[e]} ${t}`})}const Lp={disabledRoutes:["/documentation","/features","/signup"],redirectTo:"/login",betaMessage:"Welcome to PBE Journey Beta! Sign in to access the application.",showBetaBadge:!1};function YM(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{login:o,loading:l,developerLog:c}=ge(),u=_t(),{register:d,handleSubmit:f,formState:{errors:h}}=Gi(),m=async x=>{const y=`login_${x.email}`;if(!Hv.isAllowed(y,5,3e5)){n("Too many login attempts. Please wait 5 minutes before trying again.");return}if(!P4(x.email).isValid){n("Please enter a valid email address");return}c("Form submitted with data:",x);try{n(""),i(!0),c("Attempting login...");const g=x.email.toLowerCase().trim();await o(g,x.password),Hv.reset(y),Bs.getInstance().logSecurityEvent({type:"login",userId:g,details:{success:!0}}),c("Login successful, navigating to dashboard"),u("/dashboard")}catch(g){console.error("Login error:",g),Bs.getInstance().logSecurityEvent({type:"login",userId:x.email,details:{success:!1,error:g.message}}),n(g.message||"Invalid email or password")}finally{i(!1)}},p=x=>{c("Form submit event triggered"),x.preventDefault(),f(m)(x)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),Lp.showBetaBadge,a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Lp.betaMessage})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:p,children:[r&&a.jsx(Ue,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),h.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:e?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),h.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oo,{}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})]})})]})})}function JM(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{forgotPassword:o,loading:l}=ge(),{register:c,handleSubmit:u,formState:{errors:d},getValues:f}=Gi(),h=async m=>{try{n(""),i(!0),await o(m.email),t(!0)}catch(p){console.error("Forgot password error:",p),n(p.message||"Failed to send reset email")}finally{i(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Yl,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Check your email"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to"," ",a.jsx("span",{className:"font-medium",children:f("email")})]})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-6",children:"Click the link in the email to reset your password. The link will expire in 1 hour."}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Us,{to:"/login",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-all duration-200",children:"Back to Sign In"}),a.jsx("button",{onClick:()=>t(!1),className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Send another email"})]})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Forgot your password?"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:u(h),children:[r&&a.jsx(Ue,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your email address",...c("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),d.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oo,{}),a.jsx("span",{children:"Sending reset email..."})]}):"Send reset email"}),a.jsx("div",{className:"text-center",children:a.jsxs(Us,{to:"/login",className:"flex items-center justify-center space-x-2 text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to sign in"})]})})]})})]})})}function XM(){const e=_t(),[t,r]=b.useState(!1),[n,s]=b.useState(!1),[i,o]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,h]=b.useState(null),[m,p]=b.useState(null),{resetPasswordWithToken:x,loading:y}=ge(),{register:v,handleSubmit:g,watch:w,formState:{errors:_}}=Gi(),[j,N]=b.useState(!1),[S,k]=b.useState(null),E=w("password");console.log(" ResetPassword Debug:",{error:i,success:l,accessToken:f,resetType:m,loading:y,windowLocationHash:window.location.hash,windowLocationHref:window.location.href}),b.useEffect(()=>{const O=(()=>{const I=window.location.hash;if(!I)return{};const C=new URLSearchParams(I.substring(1)),T={};for(const[A,L]of C.entries())T[A]=L;return T})();if(O.error){console.error("Supabase auth error from hash:",{error:O.error,error_code:O.error_code,error_description:O.error_description}),O.error_code==="otp_expired"?(console.log(" Setting error: OTP expired"),o("The password reset link has expired. Please request a new password reset.")):(console.log(" Setting error: Auth error -",O.error_description||O.error),o(`Authentication error: ${O.error_description||O.error}`));return}const z=O.access_token,R=O.type;if(!z||typeof z!="string"){k("Invalid reset token format"),o("Invalid or malformed reset link. Please request a new password reset.");return}if(z.split(".").length!==3){k("Invalid token structure"),o("Invalid reset link format. Please request a new password reset.");return}if(z.length<50){k("Token too short"),o("Invalid reset link. Please request a new password reset.");return}if(!/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+$/.test(z)){k("Invalid token characters"),o("Invalid reset link. Please request a new password reset.");return}if(R!=="recovery"){k("Invalid token type"),o("Invalid reset link type. Please request a new password reset.");return}h(z),p(R),N(!0)},[]),b.useEffect(()=>{},[]),b.useEffect(()=>{f&&m==="recovery"&&o("")},[f,m]);const P=async D=>{if(!f||!j){o("Invalid reset token");return}if(S){o(S);return}try{o(""),d(!0),await x(f,D.password),c(!0),setTimeout(()=>{e("/login")},3e3)}catch(O){console.error("Reset password error:",O),o(O.message||"Failed to reset password")}finally{d(!1)}};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Ot,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Password reset successful"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Reset your password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:g(P),children:[i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[a.jsx("div",{className:"font-bold",children:"Debug Error Display:"}),a.jsx("div",{children:i}),a.jsxs("div",{className:"text-xs mt-2",children:["Access Token: ",f?"Present":"Missing"," | Reset Type: ",m||"Missing"," | Hash: ",window.location.hash||"Empty"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:t?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your new password",...v("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),_.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Confirm your new password",...v("confirmPassword",{required:"Please confirm your password",validate:D=>D===E||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!n),children:n?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),_.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:u||!f||!j||!!S,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oo,{}),a.jsx("span",{children:"Updating password..."})]}):"Update password"})]})})]})})}function W0(){const{developerLog:e}=ge(),{user:t}=ge(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(0),h=b.useCallback(async(x=!1)=>{if(!t){n(null),i([]),l(!1);return}const y=Date.now();if(!x&&y-d<5e3){e(" Using cached subscription data");return}try{l(!0),u(null),e(" Fetching subscription data from database...");const{data:v,error:g}=await Q.from("stripe_customers").select("customer_id").eq("user_id",t.id).maybeSingle();g&&console.error(" Error checking stripe customer:",g),e(" Stripe customer data:",(v==null?void 0:v.customer_id)||"No customer found");const{data:w,error:_}=await Q.from("stripe_user_subscriptions").select("*").maybeSingle();e(" Raw stripe_user_subscriptions data:",w),e(" stripe_user_subscriptions error:",_),_?(console.error(" Error fetching subscription:",_),_.code==="42P01"||_.message.includes("does not exist")?(console.warn(" Stripe subscription view not accessible, user likely has no subscription"),n(null)):(u("Failed to load subscription data"),n(null))):(n(w||null),e(" Subscription data loaded:",w?`Found subscription with price_id: ${w.price_id}`:"No subscription"));const{data:j,error:N}=await Q.from("stripe_user_orders").select("*").order("order_date",{ascending:!1}).limit(10);N?(console.error(" Error fetching orders:",N),i([])):(i(j||[]),e(" Orders data loaded:",(j==null?void 0:j.length)||0,"orders"));const{data:S,error:k}=await Q.from("subscriptions").select("*").eq("user_id",t.id).maybeSingle();e(" Raw main subscriptions table data:",S),e(" Main subscriptions error:",k),k?console.error(" Error fetching main subscription:",k):(e(" Main subscription data - Plan:",(S==null?void 0:S.plan)||"No plan found",(S==null?void 0:S.status)||"No status"),e(" Full main subscription object:",S)),f(y)}catch(v){console.error(" Error fetching Stripe data:",v),u("Failed to load billing data"),n(null),i([])}finally{l(!1)}},[t,d,e]),m=b.useCallback(()=>(e(" Force refreshing subscription data..."),h(!0)),[h,e]),p=b.useCallback(async()=>{if(!(r!=null&&r.subscription_id))return{success:!1,error:"No active subscription found"};try{e(" Cancelling subscription:",r.subscription_id);const{data:x,error:y}=await Q.functions.invoke("stripe-manage-subscription",{body:{action:"cancel",subscription_id:r.subscription_id}});return y?(console.error(" Error cancelling subscription:",y),{success:!1,error:y.message||"Failed to cancel subscription"}):x.success?(e(" Subscription cancelled successfully"),await m(),{success:!0}):(console.error(" Subscription cancellation failed:",x.error),{success:!1,error:x.error||"Failed to cancel subscription"})}catch(x){return console.error(" Error cancelling subscription:",x),{success:!1,error:x.message||"An unexpected error occurred"}}},[r,m,e]);return b.useEffect(()=>{h()},[h]),{subscription:r,orders:s,loading:o,error:c,refetch:h,forceRefresh:m,cancelCurrentSubscription:p}}function ZM({toggleSidebar:e}){const{user:t,logout:r}=ge(),n=_t(),{subscription:s,loading:i}=W0(),[o,l]=b.useState(0),c=ae.useMemo(()=>i||!(s!=null&&s.price_id)?null:Ip.find(m=>m.priceId===s.price_id)||null,[s,i]);b.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{count:m,error:p}=await Q.from("team_invitations").select("*",{count:"exact",head:!0}).eq("email",t.email).eq("status","pending").gt("expires_at",new Date().toISOString());if(p){console.error("Error loading invitations count:",p);return}l(m||0)}catch(m){console.error("Error loading invitations count:",m)}},d=()=>{r(),n("/login")},f=()=>i||!c?null:c.interval==="year"?a.jsx(ds,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Ki,{className:"h-4 w-4 text-blue-500"}),h=()=>i?"Loading...":c?c.name:"Free Plan";return a.jsx("header",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-4 ",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"sm:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(uM,{className:"h-5 w-5"})}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[a.jsx(eM,{className:"h-5 w-5"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsxs("div",{className:"hidden sm:flex flex-col text-right",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),Lp.showBetaBadge,!i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[f(),a.jsx("span",{className:"text-xs text-gray-500",children:h()})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-gray-300 border-t-gray-600"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 cursor-pointer",children:a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center",children:a.jsx(Mp,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsxs("button",{onClick:()=>n("/settings"),className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[a.jsx(Qa,{className:"h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:d,className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Dp,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})})}function eI({isSidebarOpen:e,toggleSidebar:t}){const r=li(),{user:n,logout:s}=ge(),[i,o]=b.useState(!1),l=(n==null?void 0:n.role)==="admin",c=(n==null?void 0:n.teamRole)==="owner"||(n==null?void 0:n.teamRole)==="admin",u=()=>{o(!i)},d=()=>{s()},f=[{name:"Dashboard",icon:iM,path:"/dashboard",show:!0},{name:"Quiz Center",icon:ke,path:"/quiz",show:!0},{name:"Study Schedule",icon:Yt,path:"/schedule",show:!0},{name:"Achievements",icon:mr,path:"/achievements",show:!0},{name:"Leaderboard",icon:zt,path:"/leaderboard",show:!!(n!=null&&n.teamId)},{name:"Team",icon:Ge,path:"/team",show:c},{name:"Analytics",icon:sr,path:"/analytics",show:c},{name:"Billing",icon:sd,path:"/billing",show:(n==null?void 0:n.teamRole)==="owner"}],h=[{name:"Admin Panel",icon:xM,path:"/admin",show:l},{name:"User Management",icon:Ge,path:"/admin/users",show:l},{name:"Question Management",icon:ke,path:"/admin/questions",show:l},{name:"Plan Management",icon:gS,path:"/admin/plans",show:l},{name:"Achievement Management",icon:mr,path:"/admin/achievements",show:l},{name:"Settings",icon:Qa,path:"/settings",show:l}],m=p=>r.pathname===p;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transition-transform duration-300 transform ${e?"translate-x-0":"-translate-x-full"} sm:hidden`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Us,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${m(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-8 mb-2 px-3",children:a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"})}),a.jsx("nav",{className:"space-y-1",children:h.filter(p=>p.show).map(p=>a.jsxs(Us,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${m(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:d,className:"flex items-center space-x-3 px-3 py-2 w-full text-left rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Dp,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})})]})]}),a.jsxs("div",{className:`hidden sm:flex flex-col h-full ${i?"w-20":"w-64"} bg-white border-r border-gray-200 transition-all duration-300`,children:[a.jsxs("div",{className:`flex items-center ${i?"justify-center":"justify-between"} h-16 px-4 border-b border-gray-200`,children:[!i&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),i&&a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:i?a.jsx(L0,{className:"h-5 w-5"}):a.jsx(pS,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Us,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${m(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`mt-8 mb-2 ${i?"text-center":"px-3"}`,children:[!i&&a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"}),i&&a.jsx("div",{className:"h-px bg-gray-200 my-2"})]}),a.jsx("nav",{className:"space-y-1",children:h.filter(p=>p.show).map(p=>a.jsxs(Us,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${m(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:d,className:`flex items-center rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200 ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2 w-full text-left"}`,title:i?"Sign Out":"",children:[a.jsx(Dp,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:"Sign Out"})]})})]})]})}function he({children:e,hideHeaderAndSidebar:t=!1}){const[r,n]=b.useState(!1),s=()=>{n(!r)};return t?a.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(eI,{isSidebarOpen:r,toggleSidebar:s}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 sm:hidden",onClick:s}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(ZM,{toggleSidebar:s}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:e})]})]})}function He({title:e,value:t,subtitle:r,icon:n,iconColor:s="text-indigo-600",trend:i,className:o=""}){const l=()=>{if(!i)return"";switch(i.type){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:`bg-white p-4 sm:p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 ${o}`,children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(n,{className:`h-5 w-5 sm:h-6 sm:w-6 ${s}`})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:e}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:t}),r&&a.jsx("p",{className:"text-xs text-gray-500",children:r})]})]}),i&&a.jsx("div",{className:"mt-3 sm:mt-4",children:a.jsx("span",{className:`text-xs sm:text-sm font-medium ${l()}`,children:i.value})})]})}function K0(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),h=b.useCallback(async()=>{if(!e){t(" useGamificationData: No user authenticated, skipping data fetch"),n(null),i([]),l([]),u(!1);return}t(" useGamificationData: Starting gamification data fetch for user:",e.id),u(!0),f(null);try{const{data:y,error:v}=await Q.from("user_stats").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;t(" useGamificationData: User stats fetched (raw):",y);const{data:g,error:w}=await Q.from("quiz_sessions").select("completed_at").eq("user_id",e.id).eq("status","completed").order("completed_at",{ascending:!1});if(w)throw w;const _=xf(g||[]);t(" useGamificationData: Calculated current streak:",_);const j={...y||{user_id:e.id,total_xp:0,current_level:1,longest_streak:0},current_streak:_};n(j),t(" useGamificationData: Final user stats:",j);const{data:N,error:S}=await Q.from("user_achievements").select("*").eq("user_id",e.id);if(S)throw S;i(N||[]),t(" useGamificationData: User achievements fetched:",(N==null?void 0:N.length)||0);const{data:k,error:E}=await Q.from("achievements").select("*");if(E)throw E;l(k||[]),t(" useGamificationData: All achievements fetched:",(k==null?void 0:k.length)||0)}catch(y){console.error(" useGamificationData: Error fetching gamification data:",y),f(y.message||"Failed to load gamification data"),n(null),i([]),l([])}finally{u(!1)}},[e,t]),m=b.useCallback(async y=>{try{t(" Creating new achievement...");const{data:v,error:g}=await Q.from("achievements").insert([y]).select().single();if(g)throw t(" Error creating achievement:",g),g;return t(" Achievement created successfully:",v),l(w=>[...w,v]),v}catch(v){throw t(" Error creating achievement:",v),v}},[t]),p=b.useCallback(async(y,v)=>{try{t(" Updating achievement:",y);const{data:g,error:w}=await Q.from("achievements").update(v).eq("id",y).select().single();if(w)throw t(" Error updating achievement:",w),w;return t(" Achievement updated successfully:",g),l(_=>_.map(j=>j.id===y?g:j)),g}catch(g){throw t(" Error updating achievement:",g),g}},[t]),x=b.useCallback(async y=>{try{t(" Deleting achievement:",y);const{error:v}=await Q.from("achievements").delete().eq("id",y);if(v)throw t(" Error deleting achievement:",v),v;t(" Achievement deleted successfully"),l(g=>g.filter(w=>w.id!==y))}catch(v){throw t(" Error deleting achievement:",v),v}},[t]);return b.useEffect(()=>{h()},[h]),{userStats:r,userAchievements:s,achievements:o,loading:c,error:d,refreshGamificationData:h,createAchievement:m,updateAchievement:p,deleteAchievement:x}}function MS(e){const[t,r,n]=e.split("-").map(Number);return new Date(Date.UTC(t,r-1,n,0,0,0,0))}function Wr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function lo(e,t={}){const r={timeZone:"Europe/London",...t};return e.toLocaleDateString("en-GB",r)}function tI(e){return e.toISOString().split("T")[0]}function Cb(e,t){const r=Wr(e),n=Wr(t);return r.getTime()===n.getTime()}function H0(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),d=g=>{t(" ensureStudyItemsArray: Raw assignment from DB:",g);const w={...g,date:typeof g.date=="string"?MS(g.date):g.date,study_items:g.study_items||[]};return t(" ensureStudyItemsArray: Normalized assignment:",w),w},f=d,h=b.useCallback(async()=>{if(e!=null&&e.id)try{t(" Loading team members for user:",e.id);const{data:g,error:w}=await Q.rpc("get_team_members_for_user",{p_user_id:e.id});if(w){console.error(" Error loading team members:",w),u("Failed to load team members");return}if(t(" Team members function result:",g),!(g!=null&&g.success)){console.error(" Team members function failed:",g==null?void 0:g.error),u("Failed to load team members");return}const _=g.team_members||[];t(" Team members loaded:",_),i(_)}catch(g){console.error(" Error loading team members:",g),u("Failed to load team members")}},[e==null?void 0:e.id,t]),m=b.useCallback(async()=>{if(e!=null&&e.teamId)try{t(" Loading study assignments for team:",e.teamId);const{data:g,error:w}=await Q.from("study_assignments").select("*").eq("team_id",e.teamId).order("date",{ascending:!0});if(w){console.error(" Error loading assignments:",w),u("Failed to load assignments");return}t(" Raw assignments data from DB:",g);const _=[];for(const j of g||[]){const N=d(j);if(t(" Processing assignment:",{id:j.id,completed:j.completed,date:j.date,study_items:j.study_items}),j.completed)try{t(" Fetching quiz session data for completed assignment:",j.id);const{data:S,error:k}=await Q.from("quiz_sessions").select("id, total_points, max_points, questions, estimated_minutes").eq("assignment_id",j.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!k&&S?(t(" Found quiz session data for assignment:",j.id,S),N.quiz_session_id=S.id,N.total_points_earned=S.total_points,N.max_points_possible=S.max_points,N.total_questions_answered=Array.isArray(S.questions)?S.questions.length:0,N.total_time_spent_minutes=S.estimated_minutes,t(" Assignment populated with quiz data:",{assignmentId:j.id,quiz_session_id:N.quiz_session_id,total_points_earned:N.total_points_earned,max_points_possible:N.max_points_possible,total_questions_answered:N.total_questions_answered,total_time_spent_minutes:N.total_time_spent_minutes})):t(" No quiz session found for completed assignment:",j.id,k)}catch(S){t(" Error fetching quiz session for assignment:",j.id,S)}else t(" Assignment not completed, skipping quiz session fetch:",j.id);_.push(N)}t(" Transformed assignments:",_),n(_)}catch(g){console.error(" Error loading assignments:",g),u("Failed to load assignments")}},[e==null?void 0:e.teamId,t]),p=b.useCallback(async g=>{try{l(!0),u(null),t(" Saving assignment:",g);const w={id:g.id,user_id:g.user_id,team_id:g.team_id,date:tI(g.date),study_items:g.study_items,description:g.description,created_by:g.created_by||(e==null?void 0:e.id),completed:g.completed||!1,completed_at:g.completed_at},{data:_}=await Q.from("study_assignments").select("id").eq("id",g.id).maybeSingle();if(_){t(" Updating existing assignment");const{error:j}=await Q.from("study_assignments").update({study_items:w.study_items,description:w.description,completed:w.completed,completed_at:w.completed_at,updated_at:new Date().toISOString()}).eq("id",g.id);if(j)throw console.error(" Error updating assignment:",j),j;n(N=>N.map(S=>S.id===g.id?g:S))}else{t(" Creating new assignment");const{error:j}=await Q.from("study_assignments").insert([w]);if(j)throw console.error(" Error creating assignment:",j),j;n(N=>[...N,g])}t(" Assignment saved successfully")}catch(w){throw console.error(" Error saving assignment:",w),u("Failed to save assignment"),w}finally{l(!1)}},[e==null?void 0:e.id,t]),x=b.useCallback(async g=>{try{l(!0),u(null),t(" Deleting assignment:",g);const{error:w}=await Q.from("study_assignments").delete().eq("id",g);if(w)throw console.error(" Error deleting assignment:",w),w;n(_=>_.filter(j=>j.id!==g)),t(" Assignment deleted successfully")}catch(w){throw console.error(" Error deleting assignment:",w),u("Failed to delete assignment"),w}finally{l(!1)}},[t]),y=b.useCallback(async g=>{if(!(e!=null&&e.teamId)||!g)return null;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g))throw new Error("Invalid assignment ID format");try{t(" Loading assignment by ID:",g);const{data:_,error:j}=await Q.from("study_assignments").select("*").eq("id",g).eq("team_id",e.teamId).maybeSingle();if(j)throw console.error(" Error loading assignment:",j),j;if(!_)return console.warn(" Assignment not found:",g),null;if(_.team_id!==e.teamId)throw new Error("Unauthorized access to assignment");if(!(_.user_id===e.id||e.teamRole==="owner"||e.teamRole==="admin"))throw new Error("Insufficient permissions to view assignment");return t(" Assignment loaded:",_),d(_)}catch(_){throw console.error(" Error loading assignment by ID:",_),_}},[e==null?void 0:e.teamId,t]),v=b.useCallback(async()=>{if(!(e!=null&&e.teamId)){i([]),n([]);return}try{l(!0),u(null),await Promise.all([h(),m()])}catch(g){console.error(" Error loading data:",g),u("Failed to load data")}finally{l(!1)}},[e==null?void 0:e.teamId,h,m]);return b.useEffect(()=>{v()},[v]),{assignments:r,teamMembers:s,loading:o,error:c,normalizeAssignment:f,saveAssignment:p,deleteAssignment:x,getAssignmentById:y,loadAssignments:v}}function sn({columns:e,data:t,emptyState:r,className:n="",loading:s=!1,onRowClick:i,getRowClassName:o}){const l=t||[],c=r==null?void 0:r.icon;return s?a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:e.map(u=>a.jsx("th",{className:`px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${u.headerClassName||""}`,style:u.width?{width:u.width}:void 0,children:u.header},u.key))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:e.length,className:"px-6 py-12 text-center",children:r?a.jsxs(a.Fragment,{children:[c&&a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),r.action]}):a.jsx("p",{className:"text-gray-500",children:"No data available"})})}):l.map((u,d)=>a.jsx("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${i?"cursor-pointer":""} ${o?o(u,d):""}`,onClick:()=>i==null?void 0:i(u,d),children:e.map(f=>a.jsx("td",{className:`px-4 sm:px-6 py-4 ${f.className||""}`,children:f.render?f.render(u,d):u[f.key]},f.key))},d))})]})})})}function IS({allAssignments:e,loading:t,user:r,questions:n,getSessionForAssignment:s,developerLog:i}){var f;const o=_t(),l=b.useMemo(()=>{const h=Wr(new Date),m=new Date(h);m.setDate(h.getDate()-h.getDay());const p=new Date(m);return p.setDate(m.getDate()+6),e.filter(x=>{const y=Wr(x.date);return y>=m&&y<=p})},[e]),c=h=>{o(`/quiz/study-assignment/${h.id}`,{state:{selectedStudyItems:h.study_items}})},u=ae.useCallback(h=>{var m;return wM(h,n,((m=r==null?void 0:r.subscription)==null?void 0:m.plan)||"free",i)},[n,(f=r==null?void 0:r.subscription)==null?void 0:f.plan,i]),d=ae.useMemo(()=>[{key:"day",header:"Day",render:h=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:lo(h.date,{weekday:"long"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:lo(h.date,{month:"short",day:"numeric"})})]}),className:"whitespace-nowrap"},{key:"book_chapters",header:"Book and Chapters",render:h=>a.jsxs("div",{className:"text-sm text-gray-900 break-words",children:[ao(h.study_items)," (",u(h.study_items)," Qs)"]})},{key:"questions_count",header:"Questions",render:h=>a.jsx("div",{className:"text-center",children:h.completed&&h.total_questions_answered!==void 0?(i==null||i(" Completed assignment questions data:",{assignmentId:h.id,total_questions_answered:h.total_questions_answered,completed:h.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:h.total_questions_answered})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:u(h.study_items)})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"score",header:"Score",render:h=>a.jsx("div",{className:"text-center",children:h.completed&&h.total_points_earned!==void 0&&h.max_points_possible!==void 0?(()=>{i==null||i(" Completed assignment score data:",{assignmentId:h.id,total_points_earned:h.total_points_earned,max_points_possible:h.max_points_possible,completed:h.completed});const m=h.max_points_possible>0?Math.round(h.total_points_earned/h.max_points_possible*100):0;return a.jsxs("div",{className:`font-bold text-lg ${m>=90?"text-green-600":m>=70?"text-blue-600":"text-red-600"}`,children:[m,"%"]})})():a.jsx("span",{className:"text-gray-400",children:""})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"time",header:"Time",render:h=>a.jsx("div",{className:"text-center",children:h.completed&&h.total_time_spent_minutes!==void 0?(i==null||i(" Completed assignment time data:",{assignmentId:h.id,total_time_spent_minutes:h.total_time_spent_minutes,completed:h.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[h.total_time_spent_minutes,"m"]})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-gray-400",children:""})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"status",header:"Status",render:h=>a.jsx("div",{className:"flex items-center space-x-2",children:h.completed?a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Completed"}),h.total_points_earned!==void 0&&h.max_points_possible!==void 0&&a.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(h.total_points_earned/h.max_points_possible*100),"% score)"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"}),(()=>{const m=Wr(new Date),x=Wr(h.date).getTime()-m.getTime(),y=Math.ceil(x/(1e3*60*60*24));return y===0?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Today)"}):y===1?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Tomorrow)"}):y>1?a.jsxs("span",{className:"text-xs text-gray-500",children:["(Due in ",y," days)"]}):a.jsx("span",{className:"text-xs text-red-500",children:"(Overdue)"})})()]})}),className:"hidden md:table-cell",headerClassName:"hidden md:table-cell"},{key:"start",header:"Start",render:h=>a.jsx("div",{className:"text-center",children:h.completed?a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Completed"}):r?(()=>{const m=s(h.id,r.id);return m?a.jsx("button",{onClick:()=>o(`/quiz/runner/${m.id}`),className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition-colors duration-200",children:"Resume"}):a.jsx("button",{onClick:()=>c(h),className:"bg-indigo-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-indigo-700 transition-colors duration-200",children:"Start"})})():null}),className:"text-center",headerClassName:"text-center"}],[u,r,s,o,c,i]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Weekly Schedule"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Study assignments for this week"})]})]}),a.jsx(sn,{columns:d,data:l,loading:t,emptyState:{icon:Yt,title:"No Assignments This Week",description:"You don't have any study assignments scheduled for this week. Check your full schedule or contact your team admin."}})]})}function rI(){const{user:e,developerLog:t}=ge();ae.useEffect(()=>{var x,y;t(" Dashboard: Component loaded with user:",e),t(" Dashboard: User subscription plan:",(x=e==null?void 0:e.subscription)==null?void 0:x.plan),t(" Dashboard: User plan settings:",e==null?void 0:e.planSettings),t(" Dashboard: User question tier access:",(y=e==null?void 0:e.planSettings)==null?void 0:y.question_tier_access)},[e,t]);const{userStats:r,userAchievements:n,achievements:s,loading:i,error:o}=K0(),{assignments:l,loading:c}=H0(),{getSessionForAssignment:u}=aa(),{questions:d,loading:f}=ia();ae.useEffect(()=>{if(t(" Dashboard: Questions loaded from context:",d.length,"total questions"),t(" Dashboard: Questions loading state:",f),d.length>0){const x=d.reduce((v,g)=>(v[g.tier]=(v[g.tier]||0)+1,v),{});t(" Dashboard: Questions by tier:",x);const y=d.reduce((v,g)=>(v[g.book_of_bible]=(v[g.book_of_bible]||0)+1,v),{});t(" Dashboard: Questions by book:",y)}},[d,f,t]);const h=_t();ae.useEffect(()=>{var x;t("*** Dashboard render: questions.length =",d.length),t("Dashboard render: questions.length =",d.length),t("Dashboard render: user subscription plan =",(x=e==null?void 0:e.subscription)==null?void 0:x.plan),t("Dashboard render: user plan settings =",e==null?void 0:e.planSettings)},[d,e,t]);const p=r?PM(r.total_xp,r.current_level):{current:0,needed:1e3,percentage:0};return a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[f&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your progress and recent activity."})]}),!f&&a.jsx("div",{className:"mb-8",children:a.jsx(IS,{allAssignments:l.filter(x=>x.user_id===(e==null?void 0:e.id)),loading:c,user:e,questions:d,getSessionForAssignment:u,developerLog:t})}),!i&&!o&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Progress"}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[a.jsx(He,{title:"Level",value:r.current_level,subtitle:`${r.total_xp.toLocaleString()} total XP`,icon:Ki,iconColor:"text-yellow-600"}),a.jsx(He,{title:"Longest Streak",value:`${r.longest_streak} days`,subtitle:"consecutive study days",icon:Pn,iconColor:"text-orange-600"}),a.jsx(He,{title:"Current Streak",value:`${r.current_streak||0} day${(r.current_streak||0)!==1?"s":""}`,subtitle:"consecutive study days",icon:no,iconColor:"text-green-600"}),a.jsx(He,{title:"Achievements",value:n.length,subtitle:"unlocked",icon:mr,iconColor:"text-purple-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Level Progress"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Level ",r.current_level," (",Math.round(p.percentage),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[r.total_xp.toLocaleString()," XP"]}),a.jsxs("span",{children:[p.needed," XP to Level ",r.current_level+1]})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx(zt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progress Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Complete your first quiz to start tracking your progress, XP, and study streak!"}),a.jsx("button",{onClick:()=>h("/quiz"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[!i&&!o&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Achievements"}),a.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((x,y)=>{const v=s.find(g=>g.id===x.achievement_id);return a.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(zt,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(v==null?void 0:v.name)||"Achievement Unlocked"}),(v==null?void 0:v.description)&&a.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.description}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(x.unlocked_at).toLocaleDateString()})]})]},`${x.user_id}-${x.achievement_id}`)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Us,{to:"/quiz",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Start Quiz"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Begin a new quiz session"})]}),a.jsx(db,{className:"h-4 w-4 text-gray-400"})]})}),a.jsx(Us,{to:"/schedule",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"View Schedule"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Check your study assignments"})]}),a.jsx(db,{className:"h-4 w-4 text-gray-400"})]})})]})]})]})]})})}function nI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function sI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function iI(e){return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function aI(e){return(e==null?void 0:e.role)==="admin"}function oI(){const{user:e,updateUserProfile:t,updatePassword:r,loading:n,isDeveloperMode:s,toggleDeveloperMode:i}=ge(),[o,l]=b.useState("profile"),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[h,m]=b.useState(null),[p,x]=b.useState(null),[y,v]=b.useState(null),[g,w]=b.useState(null),_=Gi({defaultValues:{name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||""}});ae.useEffect(()=>{e&&_.reset({name:e.name,email:e.email})},[e,_]);const j=Gi(),N=async P=>{try{x(null),m(null),await t({name:P.name,email:P.email}),m("Profile updated successfully!"),setTimeout(()=>m(null),3e3)}catch(D){console.error("Error updating profile:",D),x(D.message||"Failed to update profile")}},S=async P=>{try{w(null),v(null),await r(P.newPassword),v("Password updated successfully!"),j.reset(),setTimeout(()=>v(null),3e3)}catch(D){console.error("Error updating password:",D),w(D.message||"Failed to update password")}},E=[{id:"profile",name:"Profile",icon:Mp},{id:"security",name:"Security",icon:_n},{id:"developer",name:"Developer",icon:Qa}].filter(P=>P.id==="developer"?aI(e):!0);return a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:E.map(P=>a.jsxs("button",{onClick:()=>l(P.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o===P.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(P.icon,{className:"h-4 w-4"}),a.jsx("span",{children:P.name})]},P.id))})}),a.jsxs("div",{className:"p-6",children:[o==="profile"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),a.jsxs("form",{onSubmit:_.handleSubmit(N),className:"space-y-6",children:[h&&a.jsx(Ue,{type:"success",message:h,className:"mb-6"}),p&&a.jsx(Ue,{type:"error",message:p,className:"mb-6"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"h-20 w-20 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(Mp,{className:"h-8 w-8 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Change Avatar"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"JPG, GIF or PNG. 1MB max."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("name",{required:"Name is required"})}),_.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nickname (Public Display Name)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("nickname"),placeholder:"Your public display name for leaderboards"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be shown on leaderboards instead of your full name. Leave empty to use your full name."}),_.formState.errors.nickname&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.nickname.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("email",{required:"Email is required"})}),_.formState.errors.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.email.message})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(oo,{}),a.jsx(F0,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Saving...":"Save Changes"})]})})]})]}),o==="security"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Security Settings"}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_n,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]})]}),a.jsx("button",{className:"mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Enable 2FA"})]}),y&&a.jsx(Ue,{type:"success",message:y}),g&&a.jsx(Ue,{type:"error",message:g}),a.jsxs("form",{onSubmit:j.handleSubmit(S),className:"space-y-6",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Password Security"}),a.jsx("p",{children:"Since you're already authenticated, you can directly set a new password without entering your current one."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("newPassword",{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>u(!c),children:c?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.newPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.newPassword.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("confirmPassword",{required:"Please confirm your password",validate:P=>P===j.watch("newPassword")||"The passwords do not match"})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>f(!d),children:d?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.confirmPassword.message})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(oo,{}),a.jsx(xS,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Updating...":"Update Password"})]})})]})]})]}),o==="developer"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Developer Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Developer Mode"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable detailed console logging for debugging purposes. This will show internal application logs in the browser console."})]}),a.jsx("button",{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${s?"bg-indigo-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${s?"translate-x-6":"translate-x-1"}`})})]}),s&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium",children:"Developer Mode Active"}),a.jsx("p",{children:"Console logging is now enabled. Open your browser's developer tools (F12) to view detailed logs."})]})]})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"About Developer Mode"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-blue-700",children:[a.jsx("li",{children:" Shows authentication flow logs"}),a.jsx("li",{children:" Displays API request/response details"}),a.jsx("li",{children:" Logs component state changes"}),a.jsx("li",{children:" Helps troubleshoot application issues"}),a.jsx("li",{children:" Setting persists across browser sessions"})]})]})]})})]})]})]})]})]})})}function lI(e){switch(e){case"owner":return"";case"admin":return"";default:return""}}function cI(e){switch(e){case"owner":return ds;case"admin":return _n;default:return Ge}}function $S(){const{user:e,logout:t,developerLog:r}=ge(),[n,s]=b.useState([]),[i,o]=b.useState([]),[l,c]=b.useState(!1),[u,d]=b.useState(null),f=b.useCallback(()=>nI(e),[e]),h=b.useCallback(async(j,N,S,k)=>{r(" Processing member:",{memberId:j,userId:j,canViewDetails:k});try{const{data:E,error:P}=await Q.rpc("get_team_member_profile",{p_user_id:j,p_team_id:N});if(P){console.warn("get_team_member_profile function not available, falling back to basic approach:",P);const{data:D,error:O}=await Q.rpc("get_user_name_by_id",{p_user_id:j});return O&&console.warn(`Error getting name for user ${j}:`,O),j===(S==null?void 0:S.id)?{id:j,name:S.name||D||"Unknown User",email:S.email||"Email not available",lastActive:"Recently"}:{id:j,name:D||"Unknown User",email:k?"Run MANUAL_DB_FUNCTION.sql to enable email access":"Email restricted",lastActive:"Recently"}}else{if(E&&typeof E=="object"&&!E.error)return{id:E.id||j,name:E.name||"Unknown User",email:E.email||"Email not available",lastActive:"Recently"};{console.warn("get_team_member_profile returned error:",E);const{data:D,error:O}=await Q.rpc("get_user_name_by_id",{p_user_id:j});return{id:j,name:j===(S==null?void 0:S.id)?S.name:D||"Unknown User",email:j===(S==null?void 0:S.id)?S.email:k?"Contact admin for email access":"Email restricted",lastActive:"Recently"}}}}catch{return{id:j,name:j===(S==null?void 0:S.id)?S.name:"Team Member",email:j===(S==null?void 0:S.id)?S.email:"Email restricted",lastActive:"Recently"}}},[r]),m=b.useCallback(async()=>{if(e!=null&&e.teamId)try{c(!0),d(null);const{data:j,error:N}=await Q.from("team_members").select(`
          id,
          user_id,
          team_id,
          role,
          status,
          joined_at
        `).eq("team_id",e.teamId);if(N){console.error("Error loading team members:",N),d("Failed to load team members");return}r(" Raw team members data:",{teamId:e.teamId,membersCount:(j==null?void 0:j.length)||0,membersData:j});const S=[];r(" Starting member transformation. Processing",(j==null?void 0:j.length)||0,"members");for(const k of j||[]){const E=await h(k.user_id,e.teamId,e,f());S.push({id:k.id,userId:k.user_id,teamId:k.team_id,role:k.role,status:k.status,joinedAt:k.joined_at,user:E})}if(r(" Final transformed members:",{originalCount:(j==null?void 0:j.length)||0,transformedCount:S.length,members:S.map(k=>({id:k.id,userId:k.userId,role:k.role,status:k.status,userName:k.user.name,userEmail:k.user.email}))}),s(S),f()){const{data:k,error:E}=await Q.from("team_invitations").select("*").eq("team_id",e.teamId).eq("status","pending").gt("expires_at",new Date().toISOString());if(E)console.error("Error loading team invitations:",E);else{const P=(k||[]).map(D=>({id:D.id,teamId:D.team_id,email:D.email,role:D.role,invitedBy:D.invited_by,token:D.token,status:D.status,expiresAt:D.expires_at,createdAt:D.created_at}));o(P)}}else o([])}catch(j){console.error("Error loading team data:",j),d("Failed to load team data")}finally{c(!1)}},[e==null?void 0:e.teamId,e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.email,f,h,r]),p=b.useCallback(async j=>{try{c(!0),d(null),r(" Suspending team member:",j);const N=n.find(k=>k.id===j);if(!N)return{success:!1,error:"Member not found"};if(N.role==="owner")return{success:!1,error:"Cannot suspend the team owner"};const{error:S}=await Q.from("team_members").update({status:"suspended",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error(" Error suspending member:",S),{success:!1,error:"Failed to suspend member"}):(r(" Member suspended successfully"),N.userId===(e==null?void 0:e.id)&&(r(" User suspended themselves, logging out..."),setTimeout(()=>{t()},1e3)),await m(),{success:!0})}catch(N){return console.error(" Error suspending member:",N),{success:!1,error:"Failed to suspend member"}}finally{c(!1)}},[n,e==null?void 0:e.id,t,m,r]),x=b.useCallback(async j=>{try{if(c(!0),d(null),r(" Reinstating team member:",j),!n.find(k=>k.id===j))return{success:!1,error:"Member not found"};const{error:S}=await Q.from("team_members").update({status:"active",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error(" Error reinstating member:",S),{success:!1,error:"Failed to reinstate member"}):(r(" Member reinstated successfully"),await m(),{success:!0})}catch(N){return console.error(" Error reinstating member:",N),{success:!1,error:"Failed to reinstate member"}}finally{c(!1)}},[n,m,r]),y=b.useCallback(async(j,N)=>{if(!(e!=null&&e.teamId)||!j.trim())return{success:!1,error:"Please enter a valid email address"};try{c(!0),d(null);const{data:S,error:k}=await Q.rpc("invite_team_member",{p_team_id:e.teamId,p_email:j.trim(),p_role:N});if(k)return console.error("Error calling invite_team_member function:",k),{success:!1,error:"Failed to send invitation. Please try again."};if(!S.success)return{success:!1,error:S.error||"Failed to send invitation"};r(" Invitation created successfully:",S);try{await Q.functions.invoke("send-email-brevo",{body:{to:j.trim(),subject:`You're invited to join ${e.teamName||"a team"} on PBE Journey!`,htmlContent:`
              <p>Hello,</p>
              <p>You have been invited by ${e.name} to join their team on PBE Journey as a ${N}.</p>
              <p>Click the link below to accept your invitation:</p>
              <p><a href="${S.invitation_link}">${S.invitation_link}</a></p>
              <p>This link will expire in 7 days.</p>
              <p>Best regards,<br>The PBE Journey Team</p>
            `}})}catch(E){console.error(" Failed to send invitation email via Brevo:",E)}return await m(),{success:!0,invitationLink:S.invitation_link}}catch(S){return console.error(" Error inviting member:",S),{success:!1,error:"An unexpected error occurred. Please try again."}}finally{c(!1)}},[e==null?void 0:e.teamId,m,r]),v=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await Q.from("team_invitations").update({expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),updated_at:new Date().toISOString()}).eq("id",j);return N?(console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}):(await m(),{success:!0})}catch(N){return console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}}finally{c(!1)}},[m]),g=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await Q.from("team_invitations").delete().eq("id",j);return N?(console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}):(await m(),{success:!0})}catch(N){return console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}}finally{c(!1)}},[m]),w=b.useCallback(j=>`${window.location.origin}/invitations/accept?token=${j}`,[]),_={totalMembers:n.length,admins:n.filter(j=>j.role==="admin"||j.role==="owner").length,pendingInvites:i.length,activeMembers:n.filter(j=>j.status==="active").length};return b.useEffect(()=>{e!=null&&e.teamId?m():(s([]),o([]))},[e==null?void 0:e.teamId,m]),{teamMembers:n,teamInvitations:i,teamStats:_,loading:l,error:u,setError:d,inviteMember:y,suspendMember:p,reinstateMember:x,resendInvitation:v,cancelInvitation:g,generateInvitationLink:w,getRoleIcon:lI,loadTeamData:m}}function uI({teamId:e,userId:t,startDate:r,endDate:n}){const{developerLog:s}=ge(),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){s(" useAnalyticsData: No teamId provided, skipping data fetch"),c(!1),o(null);return}s(" useAnalyticsData: Starting data fetch with params:",{teamId:e,userId:t,startDate:r,endDate:n}),c(!0),d(null);try{let h=Q.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed");if(t?(s(" useAnalyticsData: Filtering by userId:",t),h=h.eq("user_id",t)):s(" useAnalyticsData: Fetching data for all team members"),r&&(h=h.gte("completed_at",r.toISOString())),n){const O=new Date(n);O.setDate(O.getDate()+1),h=h.lt("completed_at",O.toISOString())}const{data:m,error:p}=await h;if(p)throw p;s(" useAnalyticsData: Fetched sessions for analytics:",m),s(" useAnalyticsData: Sessions fetched:",(m==null?void 0:m.length)||0,"sessions"),s(" useAnalyticsData: Sessions data:",m);const x=(m==null?void 0:m.map(O=>O.id))||[];s(" useAnalyticsData: Completed session IDs for analytics:",x),s(" useAnalyticsData: Completed session IDs:",x);let y=Q.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, answered_at");if(x.length>0)y=y.in("quiz_session_id",x);else{s(" useAnalyticsData: No completed sessions found, returning empty data"),o({totalQuizzesCompleted:0,totalQuestionsAnswered:0,averageScore:0,totalTimeSpentMinutes:0,studyStreak:0,totalPointsEarned:0,totalPossiblePoints:0}),c(!1);return}if(t&&(y=y.eq("user_id",t)),r&&(y=y.gte("answered_at",r.toISOString())),n){const O=new Date(n);O.setDate(O.getDate()+1),y=y.lt("answered_at",O.toISOString())}const{data:v,error:g}=await y;if(g)throw g;s(" useAnalyticsData: Fetched question logs for analytics:",v),s(" useAnalyticsData: Question logs fetched:",(v==null?void 0:v.length)||0,"logs"),s(" useAnalyticsData: Question logs data:",v);const w=(m==null?void 0:m.length)||0,_=(v==null?void 0:v.length)||0;let j=0,N=0;v==null||v.forEach(O=>{j+=O.points_earned,N+=O.total_points_possible});const S=N>0?j/N*100:0,k=(m==null?void 0:m.reduce((O,z)=>O+(z.estimated_minutes||0),0))||0;s(" useAnalyticsData: Study time from estimated_minutes:",k);const E=(m==null?void 0:m.map(O=>({completed_at:O.completed_at})))||[],P=xf(E),D={totalQuizzesCompleted:w,totalQuestionsAnswered:_,averageScore:S,totalTimeSpentMinutes:k,studyStreak:P,totalPointsEarned:j,totalPossiblePoints:N};s(" useAnalyticsData: Calculated analytics data:",D),o(D)}catch(h){console.error("Error fetching analytics data:",h),d(h.message||"Failed to load analytics data"),o(null)}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function dI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useKnowledgeGapsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useKnowledgeGapsData: Starting knowledge gaps analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=Q.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log(" useKnowledgeGapsData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const j=new Date(n);j.setDate(j.getDate()+1),f=f.lt("completed_at",j.toISOString())}const{data:h,error:m}=await f;if(m)throw m;console.log(" useKnowledgeGapsData: Found completed sessions:",(h==null?void 0:h.length)||0);const p=(h==null?void 0:h.map(j=>j.id))||[];if(p.length===0){console.log(" useKnowledgeGapsData: No completed sessions found, returning empty data"),i([]),l(!1);return}let x=Q.from("quiz_question_logs").select(`
          points_earned,
          total_points_possible,
          is_correct,
          questions!inner (
            book_of_bible,
            chapter,
            tier
          )
        `).in("quiz_session_id",p);t&&(x=x.eq("user_id",t));const{data:y,error:v}=await x;if(v)throw v;if(console.log(" useKnowledgeGapsData: Question logs fetched:",(y==null?void 0:y.length)||0),!y||y.length===0){i([]),l(!1);return}const g=new Map;y.forEach(j=>{const N=j.questions;if(!N)return;const S=`book:${N.book_of_bible}`;g.has(S)||g.set(S,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"book",book:N.book_of_bible});const k=g.get(S);k.totalAttempts++,k.totalPointsEarned+=j.points_earned,k.totalPointsPossible+=j.total_points_possible,j.is_correct&&k.correctAnswers++;const E=`chapter:${N.book_of_bible}:${N.chapter}`;g.has(E)||g.set(E,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"chapter",book:N.book_of_bible,chapter:N.chapter});const P=g.get(E);P.totalAttempts++,P.totalPointsEarned+=j.points_earned,P.totalPointsPossible+=j.total_points_possible,j.is_correct&&P.correctAnswers++;const D=`tier:${N.tier}`;g.has(D)||g.set(D,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"tier",tier:N.tier});const O=g.get(D);O.totalAttempts++,O.totalPointsEarned+=j.points_earned,O.totalPointsPossible+=j.total_points_possible,j.is_correct&&O.correctAnswers++});const w=[];g.forEach((j,N)=>{var E,P;if(j.totalAttempts<3)return;const S=j.totalPointsPossible>0?j.totalPointsEarned/j.totalPointsPossible*100:0;if(S>=90)return;let k="";if(j.type==="book"?k=j.book:j.type==="chapter"?k=`${j.book} Chapter ${j.chapter}`:j.type==="tier"&&(k=`${(E=j.tier)==null?void 0:E.charAt(0).toUpperCase()}${(P=j.tier)==null?void 0:P.slice(1)} Questions`),r&&(x=x.gte("answered_at",r.toISOString())),n){const D=new Date(n);D.setDate(D.getDate()+1),x=x.lt("answered_at",D.toISOString())}w.push({topic:k,type:j.type,averageScore:S,totalQuestions:j.totalAttempts,totalAttempts:j.totalAttempts,correctAnswers:j.correctAnswers,incorrectAnswers:j.totalAttempts-j.correctAnswers,book:j.book,chapter:j.chapter,tier:j.tier})}),w.sort((j,N)=>j.averageScore-N.averageScore);const _=w.slice(0,10);console.log(" useKnowledgeGapsData: Knowledge gaps analysis complete:",_.length,"gaps found"),i(_)}catch(f){console.error(" Error fetching knowledge gaps data:",f),u(f.message||"Failed to load knowledge gaps data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function fI({teamId:e,userId:t,timeframe:r="weekly",startDate:n,endDate:s}){const[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){console.log(" useProgressionData: No teamId provided, skipping data fetch"),c(!1),o([]);return}console.log(" useProgressionData: Starting progression analysis with params:",{teamId:e,userId:t,timeframe:r,startDate:n,endDate:s}),c(!0),d(null);try{const h=s||new Date,m=n||(()=>{const v=new Date(h);return r==="weekly"?v.setDate(v.getDate()-12*7):v.setMonth(v.getMonth()-12),v})(),p=[];let x=12;if(n&&s){const v=s.getTime()-n.getTime();r==="weekly"?x=Math.ceil(v/(7*24*60*60*1e3)):x=Math.ceil(v/(30*24*60*60*1e3)),x=Math.min(Math.max(x,1),24)}for(let v=x-1;v>=0;v--){let g,w,_;if(r==="weekly"){const j=new Date(h);j.setDate(h.getDate()-(h.getDay()+v*7)),j.setHours(0,0,0,0);const N=new Date(j);N.setDate(j.getDate()+6),N.setHours(23,59,59,999),g=j,w=N,_=`Week of ${j.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const j=new Date(h.getFullYear(),h.getMonth()-v,1),N=new Date(h.getFullYear(),h.getMonth()-v+1,0,23,59,59,999);g=j,w=N,_=j.toLocaleDateString("en-US",{month:"short",year:"numeric"})}n&&w<n||s&&g>s||p.push({start:g,end:w,label:_})}console.log(" useProgressionData: Analyzing",p.length,"periods within date range");const y=[];for(const v of p){console.log(` useProgressionData: Processing period: ${v.label}`);let g=Q.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed").gte("completed_at",v.start.toISOString()).lte("completed_at",v.end.toISOString());t&&(g=g.eq("user_id",t));const{data:w,error:_}=await g;if(_)throw _;const j=(w==null?void 0:w.map(F=>F.id))||[];let N=[];if(j.length>0){let F=Q.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, is_correct").gte("answered_at",v.start.toISOString()).lte("answered_at",v.end.toISOString()).in("quiz_session_id",j);t&&(F=F.eq("user_id",t));const{data:I,error:C}=await F;if(C)throw C;N=I||[]}const S=(w==null?void 0:w.length)||0,k=(N==null?void 0:N.length)||0;let E=0,P=0,D=0,O=0;N==null||N.forEach(F=>{E+=F.points_earned,P+=F.total_points_possible,F.is_correct?D++:O++});const z=P>0?E/P*100:0,R=(w==null?void 0:w.reduce((F,I)=>F+(I.estimated_minutes||0),0))||0,B={period:v.label,periodStart:v.start,periodEnd:v.end,totalQuizzesCompleted:S,totalQuestionsAnswered:k,totalPointsEarned:E,totalPossiblePoints:P,averageScore:z,totalTimeSpentMinutes:R,correctAnswers:D,incorrectAnswers:O};y.push(B),console.log(` useProgressionData: Period ${v.label} processed:`,B)}console.log(" useProgressionData: Progression analysis complete:",y.length,"data points"),o(y)}catch(h){console.error(" Error fetching progression data:",h),d(h.message||"Failed to load progression data"),o([])}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function hI({userId:e,startDate:t,endDate:r}){const[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{if(!e){s([]),o(!1),c(null);return}o(!0),c(null);try{console.log(" useQuizHistoryData: Fetching quiz history for user:",e,"with date range:",t,r);let d=Q.from("quiz_sessions").select(`
          id,
          title,
          type,
          completed_at,
          total_points,
          max_points,
          estimated_minutes,
          questions
        `).eq("user_id",e).eq("status","completed");if(t&&(d=d.gte("completed_at",t.toISOString())),r){const p=new Date(r);p.setDate(p.getDate()+1),d=d.lt("completed_at",p.toISOString())}d=d.order("completed_at",{ascending:!1});const{data:f,error:h}=await d;if(h)throw console.error(" useQuizHistoryData: Error fetching quiz sessions:",h),h;console.log(" useQuizHistoryData: Fetched",(f==null?void 0:f.length)||0,"quiz history entries.");const m=(f||[]).map(p=>({...p,questions_count:Array.isArray(p.questions)?p.questions.length:0}));s(m)}catch(d){console.error(" useQuizHistoryData: Failed to fetch quiz history:",d),c(d.message||"Failed to load quiz history"),s([])}finally{o(!1)}},[e,t,r]);return b.useEffect(()=>{u()},[u]),{data:n,loading:i,error:l,refreshData:u}}function mI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useStudyScheduleAnalysisData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useStudyScheduleAnalysisData: Starting study schedule analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=Q.from("study_assignments").select("*").eq("team_id",e);t&&(console.log(" useStudyScheduleAnalysisData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("date",r.toISOString().split("T")[0])),n&&(f=f.lte("date",n.toISOString().split("T")[0])),f=f.order("date",{ascending:!1});const{data:h,error:m}=await f;if(m)throw console.error(" useStudyScheduleAnalysisData: Error fetching assignments:",m),m;console.log(" useStudyScheduleAnalysisData: Fetched assignments:",(h==null?void 0:h.length)||0);const p=[];for(const x of h||[]){const y={...x,date:typeof x.date=="string"?MS(x.date):x.date,study_items:x.study_items||[]};if(x.completed)try{const{data:v,error:g}=await Q.from("quiz_sessions").select("id, total_points, max_points, questions, estimated_minutes").eq("assignment_id",x.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!g&&v&&(y.quiz_session_id=v.id,y.total_points_earned=v.total_points,y.max_points_possible=v.max_points,y.total_questions_answered=Array.isArray(v.questions)?v.questions.length:0,y.total_time_spent_minutes=v.estimated_minutes)}catch(v){console.warn(" Could not fetch quiz session data for assignment:",x.id,v)}p.push(y)}console.log(" useStudyScheduleAnalysisData: Transformed assignments:",p.length),i(p)}catch(f){console.error(" useStudyScheduleAnalysisData: Error fetching study schedule data:",f),u(f.message||"Failed to load study schedule data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function pI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useQuestionPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useQuestionPerformanceData: Starting question performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=Q.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log(" useQuestionPerformanceData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),f=f.lt("completed_at",_.toISOString())}const{data:h,error:m}=await f;if(m)throw m;console.log(" useQuestionPerformanceData: Found completed sessions:",(h==null?void 0:h.length)||0);const p=(h==null?void 0:h.map(_=>_.id))||[];if(p.length===0){console.log(" useQuestionPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}let x=Q.from("quiz_question_logs").select(`
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          questions!inner (
            id,
            question,
            answer,
            book_of_bible,
            chapter,
            tier,
            points
          )
        `).in("quiz_session_id",p);if(t&&(x=x.eq("user_id",t)),r&&(x=x.gte("answered_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),x=x.lt("answered_at",_.toISOString())}const{data:y,error:v}=await x;if(v)throw v;if(console.log(" useQuestionPerformanceData: Question logs fetched:",(y==null?void 0:y.length)||0),!y||y.length===0){i([]),l(!1);return}const g=new Map;y.forEach(_=>{const j=_.question_id,N=_.questions;if(!N)return;g.has(j)||g.set(j,{question:N,totalAttempts:0,correctAttempts:0,totalTimeSpent:0,totalPointsEarned:0,totalPointsPossible:0});const S=g.get(j);S.totalAttempts++,S.totalTimeSpent+=_.time_spent,S.totalPointsEarned+=_.points_earned,S.totalPointsPossible+=_.total_points_possible,_.is_correct&&S.correctAttempts++});const w=[];g.forEach((_,j)=>{const N=_.totalAttempts>0?Math.round(_.correctAttempts/_.totalAttempts*100):0,S=_.totalAttempts>0?Math.round(_.totalTimeSpent/_.totalAttempts):0;w.push({question_id:j,question_text:_.question.question,answer_text:_.question.answer,book_of_bible:_.question.book_of_bible,chapter:_.question.chapter,tier:_.question.tier,points:_.question.points,total_attempts:_.totalAttempts,correct_attempts:_.correctAttempts,incorrect_attempts:_.totalAttempts-_.correctAttempts,accuracy_rate:N,average_time_spent:S,total_points_earned:_.totalPointsEarned,total_points_possible:_.totalPointsPossible})}),w.sort((_,j)=>_.accuracy_rate-j.accuracy_rate),console.log(" useQuestionPerformanceData: Question performance analysis complete:",w.length,"questions analyzed"),i(w)}catch(f){console.error(" Error fetching question performance data:",f),u(f.message||"Failed to load question performance data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function gI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useEngagementData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useEngagementData: Starting engagement analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=n||new Date,h=r||(()=>{const S=new Date(f);return S.setDate(S.getDate()-30),S})();let m=Q.from("quiz_sessions").select("id, completed_at, estimated_minutes").eq("team_id",e).eq("status","completed").gte("completed_at",h.toISOString()).lte("completed_at",f.toISOString());t&&(console.log(" useEngagementData: Filtering by userId:",t),m=m.eq("user_id",t));const{data:p,error:x}=await m;if(x)throw x;console.log(" useEngagementData: Found completed sessions:",(p==null?void 0:p.length)||0);const y=(p==null?void 0:p.map(S=>S.id))||[];let v=[];if(y.length>0){let S=Q.from("quiz_question_logs").select("answered_at, time_spent").in("quiz_session_id",y).gte("answered_at",h.toISOString()).lte("answered_at",f.toISOString());t&&(S=S.eq("user_id",t));const{data:k,error:E}=await S;if(E)throw E;v=k||[]}console.log(" useEngagementData: Question logs fetched:",v.length);const g=new Map;p==null||p.forEach(S=>{const k=new Date(S.completed_at),E=k.toISOString().split("T")[0];g.has(E)||g.set(E,{date:E,dateObj:k,quizzesCompleted:0,questionsAnswered:0,timeSpentMinutes:0,sessionTimes:[]});const P=g.get(E);P.quizzesCompleted++,P.timeSpentMinutes+=S.estimated_minutes||0,P.sessionTimes.push(S.estimated_minutes||0)}),v.forEach(S=>{const E=new Date(S.answered_at).toISOString().split("T")[0];if(g.has(E)){const P=g.get(E);P.questionsAnswered++}});const w=[],_=Array.from(g.keys()).sort();let j=0,N=new Date(f);N.setDate(N.getDate()+1),_.forEach((S,k)=>{const E=g.get(S),P=E.sessionTimes.length>0?Math.round(E.sessionTimes.reduce((z,R)=>z+R,0)/E.sessionTimes.length):0,D=new Date(S),O=new Date(N);O.setDate(O.getDate()-1),E.quizzesCompleted>0?(D.toDateString()===O.toDateString()?j++:j=1,N=D):j=0,w.push({date:S,dateObj:E.dateObj,quizzesCompleted:E.quizzesCompleted,questionsAnswered:E.questionsAnswered,timeSpentMinutes:E.timeSpentMinutes,averageSessionTime:P,studyStreak:j})}),w.sort((S,k)=>k.dateObj.getTime()-S.dateObj.getTime()),console.log(" useEngagementData: Engagement analysis complete:",w.length,"data points"),i(w)}catch(f){console.error(" Error fetching engagement data:",f),u(f.message||"Failed to load engagement data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function xI(e,t,r,n=12){const s=r||new Date;t||(()=>{const l=new Date(s);return e==="weekly"?l.setDate(l.getDate()-n*7):l.setMonth(l.getMonth()-n),l})();const i=[];let o=n;if(t&&r){const l=r.getTime()-t.getTime();e==="weekly"?o=Math.ceil(l/(7*24*60*60*1e3)):o=Math.ceil(l/(30*24*60*60*1e3)),o=Math.min(Math.max(o,1),24)}for(let l=o-1;l>=0;l--){let c,u,d;if(e==="weekly"){const f=new Date(s);f.setDate(s.getDate()-(s.getDay()+l*7)),f.setHours(0,0,0,0);const h=new Date(f);h.setDate(f.getDate()+6),h.setHours(23,59,59,999),c=f,u=h,d=`Week of ${f.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const f=new Date(s.getFullYear(),s.getMonth()-l,1),h=new Date(s.getFullYear(),s.getMonth()-l+1,0,23,59,59,999);c=f,u=h,d=f.toLocaleDateString("en-US",{month:"short",year:"numeric"})}t&&u<t||r&&c>r||i.push({start:c,end:u,label:d})}return i}async function zS(e){let t=Q.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes, user_id").eq("team_id",e.teamId).eq("status","completed");if(e.userId&&(t=t.eq("user_id",e.userId)),e.startDate&&(t=t.gte("completed_at",e.startDate.toISOString())),e.endDate){const r=new Date(e.endDate);r.setDate(r.getDate()+1),t=t.lt("completed_at",r.toISOString())}return await t}async function LS(e,t,r=!1){if(e.length===0)return{data:[],error:null};const n=r?`points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id,
       questions!inner (book_of_bible, chapter, tier, question, answer, points)`:"points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id";let s=Q.from("quiz_question_logs").select(n).in("quiz_session_id",e);if(t.userId&&(s=s.eq("user_id",t.userId)),t.startDate&&(s=s.gte("answered_at",t.startDate.toISOString())),t.endDate){const i=new Date(t.endDate);i.setDate(i.getDate()+1),s=s.lt("answered_at",i.toISOString())}return await s}function yI(e,t){return t>0?e/t*100:0}function vI(e,t=[]){let r=Math.round(e/60);return e<30&&t.length>0&&(r=t.reduce((s,i)=>s+(i.estimated_minutes||0),0)),r}function Ab(e){return new Set(e).size}function RS(e,t){return console.error(` ${t}:`,e),e.message||`Failed to load ${t.toLowerCase()}`}function Wa(e,t,r){console.log(` ${e}:`,t)}function bI({teamId:e,timeframe:t="weekly",startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useTeamPerformanceTrendsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useTeamPerformanceTrendsData: Starting team performance trends analysis with params:",{teamId:e,timeframe:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=xI(t,r,n);Wa("useTeamPerformanceTrendsData: Analyzing periods",{periodsCount:f.length,timeframe:t});const h=[],m={teamId:e,startDate:r,endDate:n};for(const p of f){Wa(`Processing period: ${p.label}`,{period:p});const x={...m,startDate:p.start,endDate:p.end},{data:y,error:v}=await zS(x);if(v)throw v;const g=(y==null?void 0:y.map(B=>B.id))||[],{data:w,error:_}=await LS(g,x);if(_)throw _;const j=(y==null?void 0:y.length)||0,N=(w==null?void 0:w.length)||0;let S=0,k=0,E=0;(w||[]).forEach(B=>{S+=B.points_earned,k+=B.total_points_possible,E+=B.time_spent});const P=yI(S,k),D=vI(E,y||[]),O=Ab((y||[]).map(B=>new Date(B.completed_at).toDateString())),z=Ab((y||[]).map(B=>B.user_id)),R={period:p.label,periodStart:p.start,periodEnd:p.end,totalQuizzesCompleted:j,totalQuestionsAnswered:N,totalPointsEarned:S,totalPossiblePoints:k,averageScore:P,totalTimeSpentMinutes:D,activeDays:O,activeMembers:z};h.push(R)}Wa("useTeamPerformanceTrendsData: Analysis complete",{dataPointsCount:h.length}),i(h)}catch(f){u(RS(f,"useTeamPerformanceTrendsData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function wI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log(" useBookChapterPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log(" useBookChapterPerformanceData: Starting book/chapter performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f={teamId:e,userId:t,startDate:r,endDate:n},{data:h,error:m}=await zS(f);if(m)throw m;Wa("useBookChapterPerformanceData: Sessions fetched",{sessionsCount:(h==null?void 0:h.length)||0});const p=(h==null?void 0:h.map(w=>w.id))||[];if(p.length===0){console.log(" useBookChapterPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}const{data:x,error:y}=await LS(p,f,!0);if(y)throw y;if(Wa("useBookChapterPerformanceData: Question logs fetched",{logsCount:(x==null?void 0:x.length)||0}),!x||x.length===0){i([]),l(!1);return}const v=new Map;x.forEach(w=>{const _=w.questions;if(!_)return;const j=`${_.book_of_bible}:${_.chapter}`;v.has(j)||v.set(j,{book_of_bible:_.book_of_bible,chapter:_.chapter,total_attempts:0,correct_attempts:0,total_time_spent:0,total_points_earned:0,total_points_possible:0});const N=v.get(j);N.total_attempts++,N.total_time_spent+=w.time_spent,N.total_points_earned+=w.points_earned,N.total_points_possible+=w.total_points_possible,w.is_correct&&N.correct_attempts++});const g=[];v.forEach(w=>{const _=w.total_attempts>0?Math.round(w.correct_attempts/w.total_attempts*100):0,j=w.total_attempts>0?Math.round(w.total_time_spent/w.total_attempts):0,N=w.total_points_possible>0?Math.round(w.total_points_earned/w.total_points_possible*100):0;g.push({book_of_bible:w.book_of_bible,chapter:w.chapter,total_attempts:w.total_attempts,correct_attempts:w.correct_attempts,incorrect_attempts:w.total_attempts-w.correct_attempts,accuracy_rate:_,average_time_spent:j,total_points_earned:w.total_points_earned,total_points_possible:w.total_points_possible,points_efficiency:N})}),g.sort((w,_)=>w.accuracy_rate-_.accuracy_rate),Wa("useBookChapterPerformanceData: Analysis complete",{dataPointsCount:g.length}),i(g)}catch(f){u(RS(f,"useBookChapterPerformanceData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}const FS=b.createContext(void 0);function jI({children:e,value:t}){return a.jsx(FS.Provider,{value:t,children:e})}function ui(){const e=b.useContext(FS);if(e===void 0)throw new Error("useAnalyticsContext must be used within an AnalyticsProvider");return e}function Rp({teamMembers:e,selectedMemberId:t,onSelectMember:r,selectedMemberInfo:n,disabled:s=!1,includeAllTeamOption:i=!1}){var o,l;return e.length===0&&!i?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to manage study schedules."})]})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:s?`${n==null?void 0:n.user.name}'s Study Schedule`:"Viewing Performance For:"}),s?a.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-base font-medium text-gray-900 min-w-64 capitalize",children:[n==null?void 0:n.role," Access"]}):a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t===void 0?"":t,onChange:c=>r(c.target.value===""?void 0:c.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 text-base font-medium text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 w-full sm:min-w-64",disabled:s,children:[i&&a.jsx("option",{value:"",children:"All Team"}),t&&e.find(c=>c.userId===t)&&a.jsxs("option",{value:t,children:[(o=e.find(c=>c.userId===t))==null?void 0:o.user.name," (",(l=e.find(c=>c.userId===t))==null?void 0:l.role,")"]},t),e.filter(c=>c.role==="member"&&c.userId!==t).map(c=>a.jsxs("option",{value:c.userId,children:[c.user.name," (",c.role,")"]},c.userId))]}),a.jsx(tM,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]})})})}function qS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=qS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function we(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=qS(e))&&(n&&(n+=" "),n+=t);return n}var vf={},US={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(US);var G0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(G0);var Y0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Y0);var bf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(bf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=US,r=G0,n=Y0,s=bf;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(vf);var _I=vf.get;const Yi=Qn(_I);var BS={exports:{}},ze={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=Symbol.for("react.transitional.element"),X0=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Nf=Symbol.for("react.consumer"),Sf=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Af=Symbol.for("react.lazy"),NI=Symbol.for("react.view_transition"),SI=Symbol.for("react.client.reference");function an(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case J0:switch(e=e.type,e){case wf:case _f:case jf:case Pf:case Ef:case NI:return e;default:switch(e=e&&e.$$typeof,e){case Sf:case kf:case Af:case Cf:return e;case Nf:return e;default:return t}}case X0:return t}}}ze.ContextConsumer=Nf;ze.ContextProvider=Sf;ze.Element=J0;ze.ForwardRef=kf;ze.Fragment=wf;ze.Lazy=Af;ze.Memo=Cf;ze.Portal=X0;ze.Profiler=_f;ze.StrictMode=jf;ze.Suspense=Pf;ze.SuspenseList=Ef;ze.isContextConsumer=function(e){return an(e)===Nf};ze.isContextProvider=function(e){return an(e)===Sf};ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===J0};ze.isForwardRef=function(e){return an(e)===kf};ze.isFragment=function(e){return an(e)===wf};ze.isLazy=function(e){return an(e)===Af};ze.isMemo=function(e){return an(e)===Cf};ze.isPortal=function(e){return an(e)===X0};ze.isProfiler=function(e){return an(e)===_f};ze.isStrictMode=function(e){return an(e)===jf};ze.isSuspense=function(e){return an(e)===Pf};ze.isSuspenseList=function(e){return an(e)===Ef};ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wf||e===_f||e===jf||e===Pf||e===Ef||typeof e=="object"&&e!==null&&(e.$$typeof===Af||e.$$typeof===Cf||e.$$typeof===Sf||e.$$typeof===Nf||e.$$typeof===kf||e.$$typeof===SI||e.getModuleId!==void 0)};ze.typeOf=an;BS.exports=ze;var kI=BS.exports,pr=e=>e===0?0:e>0?1:-1,Dr=e=>typeof e=="number"&&e!=+e,Ci=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,le=e=>(typeof e=="number"||e instanceof Number)&&!Dr(e),qn=e=>le(e)||typeof e=="string",PI=0,co=e=>{var t=++PI;return"".concat(e||"").concat(t)},Sn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!le(t)&&typeof t!="string")return n;var i;if(Ci(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Dr(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},QS=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},pn=(e,t)=>le(e)&&le(t)?r=>e+r*(t-e):()=>t;function VS(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Yi(n,t))===r)}var $e=e=>e===null||typeof e>"u",bc=e=>$e(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),EI=["viewBox","children"],CI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Tb=["points","pathLength"],nm={svg:EI,polygon:Tb,polyline:Tb},Z0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ex=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Z0.includes(s)&&(n[s]=i=>r[s](r,i))}),n},AI=(e,t,r)=>n=>(e(t,r,n),null),tx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Z0.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=AI(i,t,r))}),n},Ob=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Db=null,sm=null,WS=e=>{if(e===Db&&Array.isArray(sm))return sm;var t=[];return b.Children.forEach(e,r=>{$e(r)||(kI.isFragment(r)?t=t.concat(WS(r.props.children)):t.push(r))}),sm=t,Db=e,t};function rx(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>Ob(s)):n=[Ob(t)],WS(e).forEach(s=>{var i=Yi(s,"type.displayName")||Yi(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var KS=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,TI=(e,t,r,n)=>{var s,i=(s=n&&(nm==null?void 0:nm[n]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||CI.includes(t))||r&&Z0.includes(t)},Pe=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;TI((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},OI=["children","width","height","viewBox","className","style","title","desc"];function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fp.apply(null,arguments)}function DI(e,t){if(e==null)return{};var r,n,s=MI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HS=b.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=DI(e,OI),f=i||{width:n,height:s,x:0,y:0},h=we("recharts-surface",o);return b.createElement("svg",Fp({},Pe(d,!0,"svg"),{className:h,width:n,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),II=["children","className"];function qp(){return qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qp.apply(null,arguments)}function $I(e,t){if(e==null)return{};var r,n,s=zI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mr=b.forwardRef((e,t)=>{var{children:r,className:n}=e,s=$I(e,II),i=we("recharts-layer",n);return b.createElement("g",qp({className:i},Pe(s,!0),{ref:t}),r)}),LI=b.createContext(null);function Fe(e){return function(){return e}}const GS=Math.cos,ld=Math.sin,En=Math.sqrt,cd=Math.PI,Tf=2*cd,Up=Math.PI,Bp=2*Up,wi=1e-6,RI=Bp-wi;function YS(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function FI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YS;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class qI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YS:FI(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>wi)if(!(Math.abs(f*c-u*d)>wi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,p=s-l,x=c*c+u*u,y=m*m+p*p,v=Math.sqrt(x),g=Math.sqrt(h),w=i*Math.tan((Up-Math.acos((x+h-y)/(2*v*g)))/2),_=w/g,j=w/v;Math.abs(_-1)>wi&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,f=1^o,h=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>wi||Math.abs(this._y1-d)>wi)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Bp+Bp),h>RI?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>wi&&this._append`A${n},${n},0,${+(h>=Up)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function nx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new qI(t)}function sx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JS(e){this._context=e}JS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Of(e){return new JS(e)}function XS(e){return e[0]}function ZS(e){return e[1]}function ek(e,t){var r=Fe(!0),n=null,s=Of,i=null,o=nx(l);e=typeof e=="function"?e:e===void 0?XS:Fe(e),t=typeof t=="function"?t:t===void 0?ZS:Fe(t);function l(c){var u,d=(c=sx(c)).length,f,h=!1,m;for(n==null&&(i=s(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Fe(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Fe(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Fe(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function tu(e,t,r){var n=null,s=Fe(!0),i=null,o=Of,l=null,c=nx(u);e=typeof e=="function"?e:e===void 0?XS:Fe(+e),t=typeof t=="function"?t:Fe(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ZS:Fe(+r);function u(f){var h,m,p,x=(f=sx(f)).length,y,v=!1,g,w=new Array(x),_=new Array(x);for(i==null&&(l=o(g=c())),h=0;h<=x;++h){if(!(h<x&&s(y=f[h],h,f))===v)if(v=!v)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=h-1;p>=m;--p)l.point(w[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(w[h]=+e(y,h,f),_[h]=+t(y,h,f),l.point(n?+n(y,h,f):w[h],r?+r(y,h,f):_[h]))}if(g)return l=null,g+""||null}function d(){return ek().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Fe(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Fe(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Fe(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Fe(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Fe(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Fe(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Fe(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class tk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function UI(e){return new tk(e,!0)}function BI(e){return new tk(e,!1)}const ix={draw(e,t){const r=En(t/cd);e.moveTo(r,0),e.arc(0,0,r,0,Tf)}},QI={draw(e,t){const r=En(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},rk=En(1/3),VI=rk*2,WI={draw(e,t){const r=En(t/VI),n=r*rk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},KI={draw(e,t){const r=En(t),n=-r/2;e.rect(n,n,r,r)}},HI=.8908130915292852,nk=ld(cd/10)/ld(7*cd/10),GI=ld(Tf/10)*nk,YI=-GS(Tf/10)*nk,JI={draw(e,t){const r=En(t*HI),n=GI*r,s=YI*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Tf*i/5,l=GS(o),c=ld(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},im=En(3),XI={draw(e,t){const r=-En(t/(im*3));e.moveTo(0,r*2),e.lineTo(-im*r,-r),e.lineTo(im*r,-r),e.closePath()}},Fr=-.5,qr=En(3)/2,Qp=1/En(12),ZI=(Qp/2+1)*3,e$={draw(e,t){const r=En(t/ZI),n=r/2,s=r*Qp,i=n,o=r*Qp+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Fr*n-qr*s,qr*n+Fr*s),e.lineTo(Fr*i-qr*o,qr*i+Fr*o),e.lineTo(Fr*l-qr*c,qr*l+Fr*c),e.lineTo(Fr*n+qr*s,Fr*s-qr*n),e.lineTo(Fr*i+qr*o,Fr*o-qr*i),e.lineTo(Fr*l+qr*c,Fr*c-qr*l),e.closePath()}};function t$(e,t){let r=null,n=nx(s);e=typeof e=="function"?e:Fe(e||ix),t=typeof t=="function"?t:Fe(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Fe(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Fe(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function ud(){}function dd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function sk(e){this._context=e}sk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r$(e){return new sk(e)}function ik(e){this._context=e}ik.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function n$(e){return new ik(e)}function ak(e){this._context=e}ak.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function s$(e){return new ak(e)}function ok(e){this._context=e}ok.prototype={areaStart:ud,areaEnd:ud,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function i$(e){return new ok(e)}function Mb(e){return e<0?-1:1}function Ib(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(Mb(i)+Mb(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function $b(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function am(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function fd(e){this._context=e}fd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:am(this,this._t0,$b(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,am(this,$b(this,r=Ib(this,e,t)),r);break;default:am(this,this._t0,r=Ib(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function lk(e){this._context=new ck(e)}(lk.prototype=Object.create(fd.prototype)).point=function(e,t){fd.prototype.point.call(this,t,e)};function ck(e){this._context=e}ck.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function a$(e){return new fd(e)}function o$(e){return new lk(e)}function uk(e){this._context=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=zb(e),s=zb(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zb(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function l$(e){return new uk(e)}function Df(e,t){this._context=e,this._t=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function c$(e){return new Df(e,.5)}function u$(e){return new Df(e,0)}function d$(e){return new Df(e,1)}function uo(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Vp(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function f$(e,t){return e[t]}function h$(e){const t=[];return t.key=e,t}function m$(){var e=Fe([]),t=Vp,r=uo,n=f$;function s(i){var o=Array.from(e.apply(this,arguments),h$),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=sx(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Fe(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Fe(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Vp:typeof i=="function"?i:Fe(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??uo,s):r},s}function p$(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}uo(e,t)}}function g$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}uo(e,t)}}function x$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,p=0;p<l;++p){var x=e[t[p]],y=x[n][1]||0,v=x[n-1][1]||0;m+=y-v}c+=f,u+=m*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,uo(e,t)}}var y$=["type","size","sizeType"];function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wp.apply(null,arguments)}function Lb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lb(Object(r),!0).forEach(function(n){v$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v$(e,t,r){return(t=b$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b$(e){var t=w$(e,"string");return typeof t=="symbol"?t:t+""}function w$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j$(e,t){if(e==null)return{};var r,n,s=_$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dk={symbolCircle:ix,symbolCross:QI,symbolDiamond:WI,symbolSquare:KI,symbolStar:JI,symbolTriangle:XI,symbolWye:e$},N$=Math.PI/180,S$=e=>{var t="symbol".concat(bc(e));return dk[t]||ix},k$=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*N$;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},P$=(e,t)=>{dk["symbol".concat(bc(e))]=t},fk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=j$(e,y$),i=Rb(Rb({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var f=S$(t),h=t$().type(f).size(k$(r,n,t));return h()},{className:l,cx:c,cy:u}=i,d=Pe(i,!0);return c===+c&&u===+u&&r===+r?b.createElement("path",Wp({},d,{className:we("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};fk.registerSymbol=P$;var hk={},mk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(mk);var ax={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(ax);var pk={},Mf={},gk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(gk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Mf);var xk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(xk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mf,r=xk;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(pk);var yk={},vk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vf;function r(n){return function(s){return t.get(s,n)}}e.property=r})(vk);var bk={},om={},lm={},ox={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ox);var lx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(lx);var If={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(If);var Fb;function E$(){return Fb||(Fb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx(),r=ox,n=lx,s=If;function i(f,h,m){return typeof m!="function"?t.isMatch(f,h):o(f,h,function p(x,y,v,g,w,_){const j=m(x,y,v,g,w,_);return j!==void 0?!!j:o(x,y,p,_)},new Map)}function o(f,h,m,p){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,m,p);case"function":return Object.keys(h).length>0?o(f,{...h},m,p):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function l(f,h,m,p){if(h==null)return!0;if(Array.isArray(h))return u(f,h,m,p);if(h instanceof Map)return c(f,h,m,p);if(h instanceof Set)return d(f,h,m,p);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(p&&p.has(h))return p.get(h)===f;p&&p.set(h,f);try{for(let y=0;y<x.length;y++){const v=x[y];if(!n.isPrimitive(f)&&!(v in f)||h[v]===void 0&&f[v]!==void 0||h[v]===null&&f[v]!==null||!m(f[v],h[v],v,f,h,p))return!1}return!0}finally{p&&p.delete(h)}}function c(f,h,m,p){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,y]of h.entries()){const v=f.get(x);if(m(v,y,x,f,h,p)===!1)return!1}return!0}function u(f,h,m,p){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let y=0;y<h.length;y++){const v=h[y];let g=!1;for(let w=0;w<f.length;w++){if(x.has(w))continue;const _=f[w];let j=!1;if(m(_,v,y,f,h,p)&&(j=!0),j){x.add(w),g=!0;break}}if(!g)return!1}return!0}function d(f,h,m,p){return h.size===0?!0:f instanceof Set?u([...f],[...h],m,p):!1}e.isMatchWith=i,e.isSetMatch=d}(lm)),lm}var qb;function cx(){return qb||(qb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E$();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(om)),om}var wk={},ux={},dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(dx);var $f={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})($f);var zf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",m="[object Object]",p="[object Error]",x="[object DataView]",y="[object Uint8Array]",v="[object Uint8ClampedArray]",g="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",k="[object BigInt64Array]",E="[object Float32Array]",P="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=x,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=E,e.float64ArrayTag=P,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=S,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=g,e.uint32ArrayTag=w,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=v})(zf);var jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dx,r=$f,n=zf,s=lx,i=jk;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,m=new Map,p=void 0){const x=p==null?void 0:p(d,f,h,m);if(x!=null)return x;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const y=new Array(d.length);m.set(d,y);for(let v=0;v<d.length;v++)y[v]=l(d[v],v,h,m,p);return Object.hasOwn(d,"index")&&(y.index=d.index),Object.hasOwn(d,"input")&&(y.input=d.input),y}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const y=new RegExp(d.source,d.flags);return y.lastIndex=d.lastIndex,y}if(d instanceof Map){const y=new Map;m.set(d,y);for(const[v,g]of d)y.set(v,l(g,v,h,m,p));return y}if(d instanceof Set){const y=new Set;m.set(d,y);for(const v of d)y.add(l(v,void 0,h,m,p));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const y=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,y);for(let v=0;v<d.length;v++)y[v]=l(d[v],v,h,m,p);return y}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const y=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,y),c(y,d,h,m,p),y}if(typeof File<"u"&&d instanceof File){const y=new File([d],d.name,{type:d.type});return m.set(d,y),c(y,d,h,m,p),y}if(d instanceof Blob){const y=new Blob([d],{type:d.type});return m.set(d,y),c(y,d,h,m,p),y}if(d instanceof Error){const y=new d.constructor;return m.set(d,y),y.message=d.message,y.name=d.name,y.stack=d.stack,y.cause=d.cause,c(y,d,h,m,p),y}if(typeof d=="object"&&u(d)){const y=Object.create(Object.getPrototypeOf(d));return m.set(d,y),c(y,d,h,m,p),y}return d}function c(d,f,h=d,m,p){const x=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<x.length;y++){const v=x[y],g=Object.getOwnPropertyDescriptor(d,v);(g==null||g.writable)&&(d[v]=l(f[v],v,h,m,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(ux);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ux;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(wk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx(),r=wk;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(bk);var _k={},Nk={},Sk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ux,r=zf;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Sk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Nk);var kk={},fx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(fx);var Pk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$f;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Pk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G0,r=fx,n=Pk,s=bf;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(kk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cx(),r=Y0,n=Nk,s=vf,i=kk;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(_k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ax,r=vk,n=bk,s=_k;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(yk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk,r=ax,n=pk,s=yk;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(hk);var C$=hk.uniqBy;const Ub=Qn(C$);function A$(e,t,r){return t===!0?Ub(e,r):typeof t=="function"?Ub(e,t):e}var Ek={exports:{}},Ck={},Ak={exports:{}},Tk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=b;function T$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var O$=typeof Object.is=="function"?Object.is:T$,D$=fo.useState,M$=fo.useEffect,I$=fo.useLayoutEffect,$$=fo.useDebugValue;function z$(e,t){var r=t(),n=D$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return I$(function(){s.value=r,s.getSnapshot=t,cm(s)&&i({inst:s})},[e,r,t]),M$(function(){return cm(s)&&i({inst:s}),e(function(){cm(s)&&i({inst:s})})},[e]),$$(r),r}function cm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!O$(e,r)}catch{return!0}}function L$(e,t){return t()}var R$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?L$:z$;Tk.useSyncExternalStore=fo.useSyncExternalStore!==void 0?fo.useSyncExternalStore:R$;Ak.exports=Tk;var F$=Ak.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=b,q$=F$;function U$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var B$=typeof Object.is=="function"?Object.is:U$,Q$=q$.useSyncExternalStore,V$=Lf.useRef,W$=Lf.useEffect,K$=Lf.useMemo,H$=Lf.useDebugValue;Ck.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=V$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=K$(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return f=p}return f=m}if(p=f,B$(d,m))return p;var x=n(m);return s!==void 0&&s(p,x)?(d=m,p):(d=m,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=Q$(e,i[0],i[1]);return W$(function(){o.hasValue=!0,o.value=l},[l]),H$(l),l};Ek.exports=Ck;var G$=Ek.exports,hx=b.createContext(null),Y$=e=>e,xt=()=>{var e=b.useContext(hx);return e?e.store.dispatch:Y$},Cu=()=>{},J$=()=>Cu,X$=(e,t)=>e===t;function de(e){var t=b.useContext(hx);return G$.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:J$,t?t.store.getState:Cu,t?t.store.getState:Cu,t?e:Cu,X$)}function Z$(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function e3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function t3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Bb=e=>Array.isArray(e)?e:[e];function r3(e){const t=Array.isArray(e[0])?e[0]:e;return t3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function n3(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var s3=class{constructor(e){this.value=e}deref(){return this.value}},i3=typeof WeakRef<"u"?WeakRef:s3,a3=0,Qb=1;function ru(){return{s:a3,v:void 0,o:null,p:null}}function Ok(e,t={}){let r=ru();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const y=x.get(p);y===void 0?(l=ru(),x.set(p,l)):l=y}else{let x=l.p;x===null&&(l.p=x=new Map);const y=x.get(p);y===void 0?(l=ru(),x.set(p,l)):l=y}}const u=l;let d;if(l.s===Qb)d=l.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=s==null?void 0:s.deref)==null?void 0:f.call(s))??s;h!=null&&n(h,d)&&(d=h,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new i3(d):d}return u.s=Qb,u.v=d,d}return o.clearCache=()=>{r=ru(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function o3(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),Z$(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:m=Ok,argsMemoizeOptions:p=[],devModeChecks:x={}}=d,y=Bb(h),v=Bb(p),g=r3(s),w=f(function(){return i++,u.apply(null,arguments)},...y),_=m(function(){o++;const N=n3(g,arguments);return l=w.apply(null,N),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var V=o3(Ok),l3=Object.assign((e,t=V)=>{e3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>l3}),Dk={},Mk={},Ik={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(Ik);var $k={},mx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(mx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})($k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ik,r=$k,n=bf;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,p)=>{let x=m;for(let y=0;y<p.length&&x!=null;++y)x=x[p[y]];return x},d=(m,p)=>p==null||m==null?p:typeof m=="object"&&"key"in m?Object.hasOwn(p,m.key)?p[m.key]:u(p,m.path):typeof m=="function"?m(p):Array.isArray(m)?u(p,m):typeof p=="object"?p[m]:p,f=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:f.map(p=>d(p,m))})).slice().sort((m,p)=>{for(let x=0;x<f.length;x++){const y=t.compareValues(m.criteria[x],p.criteria[x],l[x]);if(y!==0)return y}return 0}).map(m=>m.original)}e.orderBy=s})(Mk);var zk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(zk);var px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fx,r=Mf,n=ox,s=If;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(px);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mk,r=zk,n=px;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(Dk);var c3=Dk.sortBy;const Rf=Qn(c3);var Lk=e=>e.legend.settings,u3=e=>e.legend.size,d3=e=>e.legend.payload;V([d3,Lk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rf(n,r):n});var nu=1;function f3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>nu||Math.abs(o.left-t.left)>nu||Math.abs(o.top-t.top)>nu||Math.abs(o.width-t.width)>nu)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ct(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var h3=typeof Symbol=="function"&&Symbol.observable||"@@observable",Vb=h3,um=()=>Math.random().toString(36).substring(7).split("").join("."),m3={INIT:`@@redux/INIT${um()}`,REPLACE:`@@redux/REPLACE${um()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${um()}`},hd=m3;function gx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Rk(e,t,r){if(typeof e!="function")throw new Error(Ct(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ct(1));return r(Rk)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,v)=>{o.set(v,y)}))}function d(){if(c)throw new Error(Ct(3));return s}function f(y){if(typeof y!="function")throw new Error(Ct(4));if(c)throw new Error(Ct(5));let v=!0;u();const g=l++;return o.set(g,y),function(){if(v){if(c)throw new Error(Ct(6));v=!1,u(),o.delete(g),i=null}}}function h(y){if(!gx(y))throw new Error(Ct(7));if(typeof y.type>"u")throw new Error(Ct(8));if(typeof y.type!="string")throw new Error(Ct(17));if(c)throw new Error(Ct(9));try{c=!0,s=n(s,y)}finally{c=!1}return(i=o).forEach(g=>{g()}),y}function m(y){if(typeof y!="function")throw new Error(Ct(10));n=y,h({type:hd.REPLACE})}function p(){const y=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Ct(11));function g(){const _=v;_.next&&_.next(d())}return g(),{unsubscribe:y(g)}},[Vb](){return this}}}return h({type:hd.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:m,[Vb]:p}}function p3(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hd.INIT})>"u")throw new Error(Ct(12));if(typeof r(void 0,{type:hd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function Fk(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{p3(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],m=o[f],p=h(m,l);if(typeof p>"u")throw l&&l.type,new Error(Ct(14));u[f]=p,c=c||p!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function md(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function g3(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Ct(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=md(...l)(s.dispatch),{...s,dispatch:i}}}function qk(e){return gx(e)&&"type"in e&&typeof e.type=="string"}var Uk=Symbol.for("immer-nothing"),Wb=Symbol.for("immer-draftable"),Ir=Symbol.for("immer-state");function vn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ho=Object.getPrototypeOf;function Ji(e){return!!e&&!!e[Ir]}function fs(e){var t;return e?Bk(e)||Array.isArray(e)||!!e[Wb]||!!((t=e.constructor)!=null&&t[Wb])||qf(e)||Uf(e):!1}var x3=Object.prototype.constructor.toString();function Bk(e){if(!e||typeof e!="object")return!1;const t=ho(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===x3}function pd(e,t){Ff(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Ff(e){const t=e[Ir];return t?t.type_:Array.isArray(e)?1:qf(e)?2:Uf(e)?3:0}function Kp(e,t){return Ff(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Qk(e,t,r){const n=Ff(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function y3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qf(e){return e instanceof Map}function Uf(e){return e instanceof Set}function ji(e){return e.copy_||e.base_}function Hp(e,t){if(qf(e))return new Map(e);if(Uf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Bk(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ir];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ho(e),n)}else{const n=ho(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function xx(e,t=!1){return Bf(e)||Ji(e)||!fs(e)||(Ff(e)>1&&(e.set=e.add=e.clear=e.delete=v3),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>xx(n,!0))),e}function v3(){vn(2)}function Bf(e){return Object.isFrozen(e)}var b3={};function Xi(e){const t=b3[e];return t||vn(0,e),t}var Jl;function Vk(){return Jl}function w3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Kb(e,t){t&&(Xi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Gp(e){Yp(e),e.drafts_.forEach(j3),e.drafts_=null}function Yp(e){e===Jl&&(Jl=e.parent_)}function Hb(e){return Jl=w3(Jl,e)}function j3(e){const t=e[Ir];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Gb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ir].modified_&&(Gp(t),vn(4)),fs(e)&&(e=gd(t,e),t.parent_||xd(t,e)),t.patches_&&Xi("Patches").generateReplacementPatches_(r[Ir].base_,e,t.patches_,t.inversePatches_)):e=gd(t,r,[]),Gp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Uk?e:void 0}function gd(e,t,r){if(Bf(t))return t;const n=t[Ir];if(!n)return pd(t,(s,i)=>Yb(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return xd(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),pd(i,(l,c)=>Yb(e,n,s,l,c,r,o)),xd(e,s,!1),r&&e.patches_&&Xi("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Yb(e,t,r,n,s,i,o){if(Ji(s)){const l=i&&t&&t.type_!==3&&!Kp(t.assigned_,n)?i.concat(n):void 0,c=gd(e,s,l);if(Qk(r,n,c),Ji(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(fs(s)&&!Bf(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gd(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&xd(e,s)}}function xd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xx(t,r)}function _3(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Vk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=yx;r&&(s=[n],i=Xl);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var yx={get(e,t){if(t===Ir)return e;const r=ji(e);if(!Kp(r,t))return N3(e,r,t);const n=r[t];return e.finalized_||!fs(n)?n:n===dm(e.base_,t)?(fm(e),e.copy_[t]=Xp(n,e)):n},has(e,t){return t in ji(e)},ownKeys(e){return Reflect.ownKeys(ji(e))},set(e,t,r){const n=Wk(ji(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=dm(ji(e),t),i=s==null?void 0:s[Ir];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(y3(r,s)&&(r!==void 0||Kp(e.base_,t)))return!0;fm(e),Jp(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return dm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,fm(e),Jp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ji(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){vn(11)},getPrototypeOf(e){return ho(e.base_)},setPrototypeOf(){vn(12)}},Xl={};pd(yx,(e,t)=>{Xl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Xl.deleteProperty=function(e,t){return Xl.set.call(this,e,t,void 0)};Xl.set=function(e,t,r){return yx.set.call(this,e[0],t,r,e[0])};function dm(e,t){const r=e[Ir];return(r?ji(r):e)[t]}function N3(e,t,r){var s;const n=Wk(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function Wk(e,t){if(!(t in e))return;let r=ho(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ho(r)}}function Jp(e){e.modified_||(e.modified_=!0,e.parent_&&Jp(e.parent_))}function fm(e){e.copy_||(e.copy_=Hp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var S3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&vn(6),n!==void 0&&typeof n!="function"&&vn(7);let s;if(fs(t)){const i=Hb(this),o=Xp(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Gp(i):Yp(i)}return Kb(i,n),Gb(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Uk&&(s=void 0),this.autoFreeze_&&xx(s,!0),n){const i=[],o=[];Xi("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else vn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fs(e)||vn(8),Ji(e)&&(e=is(e));const t=Hb(this),r=Xp(e,void 0);return r[Ir].isManual_=!0,Yp(t),r}finishDraft(e,t){const r=e&&e[Ir];(!r||!r.isManual_)&&vn(9);const{scope_:n}=r;return Kb(n,t),Gb(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Xi("Patches").applyPatches_;return Ji(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Xp(e,t){const r=qf(e)?Xi("MapSet").proxyMap_(e,t):Uf(e)?Xi("MapSet").proxySet_(e,t):_3(e,t);return(t?t.scope_:Vk()).drafts_.push(r),r}function is(e){return Ji(e)||vn(10,e),Kk(e)}function Kk(e){if(!fs(e)||Bf(e))return e;const t=e[Ir];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Hp(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Hp(e,!0);return pd(r,(n,s)=>{Qk(r,n,Kk(s))}),t&&(t.finalized_=!1),r}var $r=new S3,Hk=$r.produce;$r.produceWithPatches.bind($r);$r.setAutoFreeze.bind($r);$r.setUseStrictShallowCopy.bind($r);$r.applyPatches.bind($r);$r.createDraft.bind($r);$r.finishDraft.bind($r);function Gk(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var k3=Gk(),P3=Gk,E3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?md:md.apply(null,arguments)};function rn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Tr(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>qk(n)&&n.type===e,r}var Yk=class cl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,cl.prototype)}static get[Symbol.species](){return cl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new cl(...t[0].concat(this)):new cl(...t.concat(this))}};function Jb(e){return fs(e)?Hk(e,()=>{}):e}function su(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function C3(e){return typeof e=="boolean"}var A3=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new Yk;return r&&(C3(r)?o.push(k3):o.push(P3(r.extraArgument))),o},T3="RTK_autoBatch",Xb=e=>t=>{setTimeout(t,e)},O3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Xb(10):e.type==="callback"?e.queueNotification:Xb(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[T3]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},D3=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new Yk(e);return n&&s.push(O3(typeof n=="object"?n:void 0)),s};function M3(e){const t=A3(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(gx(r))c=Fk(r);else throw new Error(Tr(1));let u;typeof n=="function"?u=n(t):u=t();let d=md;s&&(d=E3({trace:!1,...typeof s=="object"&&s}));const f=g3(...u),h=D3(f);let m=typeof l=="function"?l(h):h();const p=d(...m);return Rk(c,o,p)}function Jk(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Tr(28));if(l in t)throw new Error(Tr(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function I3(e){return typeof e=="function"}function $3(e,t){let[r,n,s]=Jk(t),i;if(I3(e))i=()=>Jb(e());else{const l=Jb(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Ji(d)){const m=f(d,c);return m===void 0?d:m}else{if(fs(d))return Hk(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=i,o}var z3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",L3=(e=21)=>{let t="",r=e;for(;r--;)t+=z3[Math.random()*64|0];return t},R3=Symbol.for("rtk-slice-createasyncthunk");function F3(e,t){return`${e}/${t}`}function q3({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[R3];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Tr(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(B3()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Tr(12));if(N in u.sliceCaseReducersByType)throw new Error(Tr(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:F3(i,_),createNotation:typeof s.reducers=="function"};V3(j)?K3(N,j,d,t):Q3(N,j,d)});function f(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?Jk(s.extraReducers):[s.extraReducers],S={..._,...u.sliceCaseReducersByType};return $3(s.initialState,k=>{for(let E in S)k.addCase(E,S[E]);for(let E of u.sliceMatchers)k.addMatcher(E.matcher,E.reducer);for(let E of j)k.addMatcher(E.matcher,E.reducer);N&&k.addDefaultCase(N)})}const h=_=>_,m=new Map,p=new WeakMap;let x;function y(_,j){return x||(x=f()),x(_,j)}function v(){return x||(x=f()),x.getInitialState()}function g(_,j=!1){function N(k){let E=k[_];return typeof E>"u"&&j&&(E=su(p,N,v)),E}function S(k=h){const E=su(m,j,()=>new WeakMap);return su(E,k,()=>{const P={};for(const[D,O]of Object.entries(s.selectors??{}))P[D]=U3(O,k,()=>su(p,k,v),j);return P})}return{reducerPath:_,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const w={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...g(o),injectInto(_,{reducerPath:j,...N}={}){const S=j??o;return _.inject({reducerPath:S,reducer:y},N),{...w,...g(S,!0)}}};return w}}function U3(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var on=q3();function B3(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Q3({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!W3(n))throw new Error(Tr(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?rn(e,o):rn(e))}function V3(e){return e._reducerDefinitionType==="asyncThunk"}function W3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function K3({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Tr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||iu,pending:l||iu,rejected:c||iu,settled:u||iu})}function iu(){}var H3="task",Xk="listener",Zk="completed",vx="cancelled",G3=`task-${vx}`,Y3=`task-${Zk}`,Zp=`${Xk}-${vx}`,J3=`${Xk}-${Zk}`,Qf=class{constructor(e){wh(this,"name","TaskAbortError");wh(this,"message");this.code=e,this.message=`${H3} ${vx} (reason: ${e})`}},bx=(e,t)=>{if(typeof e!="function")throw new TypeError(Tr(32))},yd=()=>{},e2=(e,t=yd)=>(e.catch(t),e),t2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$i=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},zi=e=>{if(e.aborted){const{reason:t}=e;throw new Qf(t)}};function r2(e,t){let r=yd;return new Promise((n,s)=>{const i=()=>s(new Qf(e.reason));if(e.aborted){i();return}r=t2(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=yd})}var X3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Qf?"cancelled":"rejected",error:r}}finally{t==null||t()}},vd=e=>t=>e2(r2(e,t).then(r=>(zi(e),r))),n2=e=>{const t=vd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ka}=Object,Zb={},Vf="listenerMiddleware",Z3=(e,t)=>{const r=n=>t2(e,()=>$i(n,e.reason));return(n,s)=>{bx(n);const i=new AbortController;r(i);const o=X3(async()=>{zi(e),zi(i.signal);const l=await n({pause:vd(i.signal),delay:n2(i.signal),signal:i.signal});return zi(i.signal),l},()=>$i(i,Y3));return s!=null&&s.autoJoin&&t.push(o.catch(yd)),{result:vd(e)(o),cancel(){$i(i,G3)}}}},e5=(e,t)=>{const r=async(n,s)=>{zi(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await r2(t,Promise.race(l));return zi(t),c}finally{i()}};return(n,s)=>e2(r(n,s))},s2=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=rn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Tr(21));return bx(i),{predicate:s,type:t,effect:i}},i2=Ka(e=>{const{type:t,predicate:r,effect:n}=s2(e);return{id:L3(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Tr(22))}}},{withTypes:()=>i2}),ew=(e,t)=>{const{type:r,effect:n,predicate:s}=s2(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},eg=e=>{e.pending.forEach(t=>{$i(t,Zp)})},t5=e=>()=>{e.forEach(eg),e.clear()},tw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},a2=Ka(rn(`${Vf}/add`),{withTypes:()=>a2}),r5=rn(`${Vf}/removeAll`),o2=Ka(rn(`${Vf}/remove`),{withTypes:()=>o2}),n5=(...e)=>{console.error(`${Vf}/error`,...e)},wc=(e={})=>{const t=new Map,{extra:r,onError:n=n5}=e;bx(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&eg(d)}),i=d=>{const f=ew(t,d)??i2(d);return s(f)};Ka(i,{withTypes:()=>i});const o=d=>{const f=ew(t,d);return f&&(f.unsubscribe(),d.cancelActive&&eg(f)),!!f};Ka(o,{withTypes:()=>o});const l=async(d,f,h,m)=>{const p=new AbortController,x=e5(i,p.signal),y=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,Ka({},h,{getOriginalState:m,condition:(v,g)=>x(v,g).then(Boolean),take:x,delay:n2(p.signal),pause:vd(p.signal),extra:r,signal:p.signal,fork:Z3(p.signal,y),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((v,g,w)=>{v!==p&&($i(v,Zp),w.delete(v))})},cancel:()=>{$i(p,Zp),d.pending.delete(p)},throwIfCancelled:()=>{zi(p.signal)}})))}catch(v){v instanceof Qf||tw(n,v,{raisedBy:"effect"})}finally{await Promise.all(y),$i(p,J3),d.pending.delete(p)}},c=t5(t);return{middleware:d=>f=>h=>{if(!qk(h))return f(h);if(a2.match(h))return i(h.payload);if(r5.match(h)){c();return}if(o2.match(h))return o(h.payload);let m=d.getState();const p=()=>{if(m===Zb)throw new Error(Tr(23));return m};let x;try{if(x=f(h),t.size>0){const y=d.getState(),v=Array.from(t.values());for(const g of v){let w=!1;try{w=g.predicate(h,y,m)}catch(_){w=!1,tw(n,_,{raisedBy:"predicate"})}w&&l(g,h,d,p)}}}finally{m=Zb}return x},startListening:i,stopListening:o,clearListeners:c}};function Tr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var s5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},l2=on({name:"chartLayout",initialState:s5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:i5,setLayout:a5,setChartSize:o5,setScale:l5}=l2.actions,c5=l2.reducer;function rw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rw(Object(r),!0).forEach(function(n){u5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u5(e,t,r){return(t=d5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d5(e){var t=f5(e,"string");return typeof t=="symbol"?t:t+""}function f5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bd=Math.PI/180,h5=e=>e*180/Math.PI,It=(e,t,r,n)=>({x:e+Math.cos(-bd*n)*r,y:t+Math.sin(-bd*n)*r}),m5=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},p5=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},g5=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=p5({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:h5(c),angleInRadian:c}},x5=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},y5=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},v5=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=g5({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=x5(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?nw(nw({},t),{},{radius:s,angle:y5(d,t)}):null};function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(n){b5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b5(e,t,r){return(t=w5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w5(e){var t=j5(e,"string");return typeof t=="symbol"?t:t+""}function j5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return $e(e)||$e(t)?r:qn(t)?Yi(e,t,r):typeof t=="function"?t(e):r}var _5=(e,t,r,n,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(pr(d-u)!==pr(f-d)){var m=[];if(pr(f-d)===pr(s[1]-s[0])){h=f;var p=d+s[1]-s[0];m[0]=Math.min(p,(p+u)/2),m[1]=Math.max(p,(p+u)/2)}else{h=u;var x=f+s[1]-s[0];m[0]=Math.min(d,(x+d)/2),m[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){({index:o}=r[c]);break}}else{var v=Math.min(u,f),g=Math.max(u,f);if(e>(v+d)/2&&e<=(g+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},N5=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&le(e[i]))return Vr(Vr({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&le(e[o]))return Vr(Vr({},e),{},{[o]:e[o]+(s||0)})}return e},di=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",c2=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},u2=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:m}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=s==="category"&&o.bandwidth?o.bandwidth()/p:0;if(x=m==="angleAxis"&&i&&i.length>=2?pr(i[0]-i[1])*2*x:x,f||h){var y=(f||h||[]).map((v,g)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+x,value:v,offset:x,index:g}});return y.filter(v=>!Dr(v.coordinate))}return c&&u?u.map((v,g)=>({coordinate:o(v)+x,value:v,index:g,offset:x})):o.ticks&&!r&&d!=null?o.ticks(d).map((v,g)=>({coordinate:o(v)+x,value:v,offset:x,index:g})):o.domain().map((v,g)=>({coordinate:o(v)+x,value:n?n[v]:v,index:g,offset:x}))},iw=1e-4,S5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-iw,i=Math.max(n[0],n[1])+iw,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},k5=(e,t)=>{if(!t||t.length!==2||!le(t[0])||!le(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!le(e[0])||e[0]<r)&&(s[0]=r),(!le(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},P5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=Dr(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},E5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Dr(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},C5={sign:P5,expand:p$,none:uo,silhouette:g$,wiggle:x$,positive:E5},A5=(e,t,r)=>{var n=C5[r],s=m$().keys(t).value((i,o)=>+Ht(i,o,0)).order(Vp).offset(n);return s(e)};function d2(e){return e==null?void 0:String(e)}function aw(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!$e(s[t.dataKey])){var l=VS(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ht(s,$e(o)?t.dataKey:o);return $e(c)?null:t.scale(c)}var ow=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ht(i,t.dataKey,t.scale.domain()[o]);return $e(l)?null:t.scale(l)-s/2+n},T5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},O5=e=>{var t=e.flat(2).filter(le);return[Math.min(...t),Math.max(...t)]},D5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],M5=(e,t,r)=>{if(e!=null)return D5(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=O5(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},lw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Rf(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function uw(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Vr(Vr({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Wf(e,t){if(e)return String(e);if(typeof t=="string")return t}function I5(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?v5({x:e,y:t},n):null}var $5=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Vr(Vr(Vr({},n),It(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Vr(Vr(Vr({},n),It(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},z5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ys=e=>e.layout.width,vs=e=>e.layout.height,L5=e=>e.layout.scale,f2=e=>e.layout.margin,wx=V(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),jx=V(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),R5="data-recharts-item-index",F5="data-recharts-item-data-key",Kf=60;function dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(r),!0).forEach(function(n){q5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q5(e,t,r){return(t=U5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U5(e){var t=B5(e,"string");return typeof t=="symbol"?t:t+""}function B5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q5=e=>e.brush.height,Nt=V([ys,vs,f2,Q5,wx,jx,Lk,u3],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((p,x)=>{var{orientation:y}=x;if(!x.mirror&&!x.hide){var v=typeof x.width=="number"?x.width:Kf;return ks(ks({},p),{},{[y]:p[y]+v})}return p},{left:r.left||0,right:r.right||0}),u=s.reduce((p,x)=>{var{orientation:y}=x;return!x.mirror&&!x.hide?ks(ks({},p),{},{[y]:Yi(p,"".concat(y))+x.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=ks(ks({},u),c),f=d.bottom;d.bottom+=n,d=N5(d,o,l);var h=e-d.left-d.right,m=t-d.top-d.bottom;return ks(ks({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(m,0)})}),V5=V(Nt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),h2=V(ys,vs,(e,t)=>({x:0,y:0,width:e,height:t})),W5=b.createContext(null),or=()=>b.useContext(W5)!=null,Hf=e=>e.brush,Gf=V([Hf,Nt,f2],(e,t,r)=>({height:e.height,x:le(e.x)?e.x:t.left,y:le(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:le(e.width)?e.width:t.width})),_x=()=>{var e,t=or(),r=de(V5),n=de(Gf),s=(e=de(Hf))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},K5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},m2=()=>{var e;return(e=de(Nt))!==null&&e!==void 0?e:K5},p2=()=>de(ys),g2=()=>de(vs),Te=e=>e.layout.layoutType,Yf=()=>de(Te),H5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},x2=on({name:"legend",initialState:H5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=is(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:EK,setLegendSettings:CK,addLegendPayload:G5,removeLegendPayload:Y5}=x2.actions,J5=x2.reducer;function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(null,arguments)}function fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(r),!0).forEach(function(n){X5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X5(e,t,r){return(t=Z5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z5(e){var t=ez(e,"string");return typeof t=="symbol"?t:t+""}function ez(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tz(e){return Array.isArray(e)&&qn(e[0])&&qn(e[1])?e.join(" ~ "):e}var rz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Rf(i,l):i).map((S,k)=>{if(S.type==="none")return null;var E=S.formatter||o||tz,{value:P,name:D}=S,O=P,z=D;if(E){var R=E(P,D,S,k,i);if(Array.isArray(R))[O,z]=R;else if(R!=null)O=R;else return null}var B=hm({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:B},qn(z)?b.createElement("span",{className:"recharts-tooltip-item-name"},z):null,qn(z)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},O),b.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=hm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=hm({margin:0},s),y=!$e(d),v=y?d:"",g=we("recharts-default-tooltip",c),w=we("recharts-tooltip-label",u);y&&f&&i!==void 0&&i!==null&&(v=f(d,i));var _=h?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",tg({className:g,style:p},_),b.createElement("p",{className:w,style:x},b.isValidElement(v)?v:"".concat(v)),m())},Yo="recharts-tooltip-wrapper",nz={visibility:"hidden"};function sz(e){var{coordinate:t,translateX:r,translateY:n}=e;return we(Yo,{["".concat(Yo,"-right")]:le(r)&&t&&le(t.x)&&r>=t.x,["".concat(Yo,"-left")]:le(r)&&t&&le(t.x)&&r<t.x,["".concat(Yo,"-bottom")]:le(n)&&t&&le(t.y)&&n>=t.y,["".concat(Yo,"-top")]:le(n)&&t&&le(t.y)&&n<t.y})}function hw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&le(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),f=r[n]+s;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var m=d,p=h;return m<p?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,y=h+u;return x>y?Math.max(d,h):Math.max(f,h)}function iz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function az(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=hw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=hw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=iz({translateX:d,translateY:f,useTranslate3d:l})):u=nz,{cssProperties:u,cssClasses:sz({translateX:d,translateY:f,coordinate:r})}}function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rg(e,t,r){return(t=oz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oz(e){var t=lz(e,"string");return typeof t=="symbol"?t:t+""}function lz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cz extends b.PureComponent{constructor(){super(...arguments),rg(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),rg(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:m,wrapperStyle:p,lastBoundingBox:x,innerRef:y,hasPortalFromProps:v}=this.props,{cssClasses:g,cssProperties:w}=az({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:m}),_=v?{}:au(au({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=au(au({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:g,style:j,ref:y},i)}}var uz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Po={isSsr:uz()},y2=()=>de(e=>e.rootProps.accessibilityLayer);function zr(e){return Number.isFinite(e)}function wd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ng(){return ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ng.apply(null,arguments)}function pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(r),!0).forEach(function(n){dz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dz(e,t,r){return(t=fz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fz(e){var t=hz(e,"string");return typeof t=="symbol"?t:t+""}function hz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xw={curveBasisClosed:n$,curveBasisOpen:s$,curveBasis:r$,curveBumpX:UI,curveBumpY:BI,curveLinearClosed:i$,curveLinear:Of,curveMonotoneX:a$,curveMonotoneY:o$,curveNatural:l$,curveStep:c$,curveStepAfter:d$,curveStepBefore:u$},ou=e=>zr(e.x)&&zr(e.y),Jo=e=>e.x,Xo=e=>e.y,mz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(bc(e));return(r==="curveMonotone"||r==="curveBump")&&t?xw["".concat(r).concat(t==="vertical"?"Y":"X")]:xw[r]||Of},pz=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=mz(t,s),l=i?r.filter(ou):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>ou(f)):n,d=l.map((f,h)=>gw(gw({},f),{},{base:u[h]}));return s==="vertical"?c=tu().y(Xo).x1(Jo).x0(f=>f.base.x):c=tu().x(Jo).y1(Xo).y0(f=>f.base.y),c.defined(ou).curve(o),c(d)}return s==="vertical"&&le(n)?c=tu().y(Xo).x1(Jo).x0(n):le(n)?c=tu().x(Jo).y1(Xo).y0(n):c=ek().x(Jo).y(Xo),c.defined(ou).curve(o),c(l)},v2=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?pz(e):n;return b.createElement("path",ng({},Pe(e,!1),ex(e),{className:we("recharts-curve",t),d:i===null?void 0:i,ref:s}))},gz=["x","y","top","left","width","height","className"];function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(null,arguments)}function yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(r),!0).forEach(function(n){yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t,r){return(t=vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=bz(e,"string");return typeof t=="symbol"?t:t+""}function bz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wz(e,t){if(e==null)return{};var r,n,s=jz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _z=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Nz=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=wz(e,gz),u=xz({x:t,y:r,top:n,left:s,width:i,height:o},c);return!le(t)||!le(r)||!le(i)||!le(o)||!le(n)||!le(s)?null:b.createElement("path",sg({},Pe(u,!0),{className:we("recharts-cross",l),d:_z(t,r,i,o,n,s)}))};function Sz(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function vw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vw(Object(r),!0).forEach(function(n){Pz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pz(e,t,r){return(t=Ez(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ez(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bs(e,t){var r=kz({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var b2={},w2={},j2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(j2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j2,r=dx,n=$f,s=zf,i=If;function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,h,m,p,x){const y=x(u,d,f,h,m,p);if(y!==void 0)return y;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,p,x)}return c(u,d,p,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let m=n.getTag(u),p=n.getTag(d);if(m===s.argumentsTag&&(m=s.objectTag),p===s.argumentsTag&&(p=s.objectTag),m!==p)return!1;switch(m){case s.stringTag:return u.toString()===d.toString();case s.numberTag:{const v=u.valueOf(),g=d.valueOf();return i.eq(v,g)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),d.valueOf());case s.regexpTag:return u.source===d.source&&u.flags===d.flags;case s.functionTag:return u===d}f=f??new Map;const x=f.get(u),y=f.get(d);if(x!=null&&y!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(m){case s.mapTag:{if(u.size!==d.size)return!1;for(const[v,g]of u.entries())if(!d.has(v)||!l(g,d.get(v),v,u,d,f,h))return!1;return!0}case s.setTag:{if(u.size!==d.size)return!1;const v=Array.from(u.values()),g=Array.from(d.values());for(let w=0;w<v.length;w++){const _=v[w],j=g.findIndex(N=>l(_,N,void 0,u,d,f,h));if(j===-1)return!1;g.splice(j,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let v=0;v<u.length;v++)if(!l(u[v],d[v],v,u,d,f,h))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case s.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case s.errorTag:return u.name===d.name&&u.message===d.message;case s.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const g=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(g.length!==w.length)return!1;for(let _=0;_<g.length;_++){const j=g[_],N=u[j];if(!Object.hasOwn(d,j))return!1;const S=d[j];if(!l(N,S,j,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(w2);var _2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(_2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w2,r=_2;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(b2);var Az=b2.isEqual;const Tz=Qn(Az);function Oz(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var jd=1e-4,N2=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],S2=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),bw=(e,t)=>r=>{var n=N2(e,t);return S2(n,r)},Dz=(e,t)=>r=>{var n=N2(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return S2(s,r)},ww=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,s]=o);var u=bw(t,r),d=bw(n,s),f=Dz(t,r),h=p=>p>1?1:p<0?0:p,m=p=>{for(var x=p>1?1:p,y=x,v=0;v<8;++v){var g=u(y)-x,w=f(y);if(Math.abs(g-x)<jd||w<jd)return d(y);y=h(y-g/w)}return d(y)};return m.isStepper=!1,m},Mz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*s/1e3,h=c*s/1e3+o;return Math.abs(h-l)<jd&&Math.abs(f)<jd?[l,0]:[h,f]};return i.isStepper=!0,i.dt=s,i},Iz=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ww(e);case"spring":return Mz();default:if(e.split("(")[0]==="cubic-bezier")return ww(e)}return typeof e=="function"?e:null};function jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(r),!0).forEach(function(n){$z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $z(e,t,r){return(t=zz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zz(e){var t=Lz(e,"string");return typeof t=="symbol"?t:t+""}function Lz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rz=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Fz=(e,t,r)=>e.map(n=>"".concat(Rz(n)," ").concat(t,"ms ").concat(r)).join(","),qz=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ec=(e,t)=>Object.keys(t).reduce((r,n)=>_w(_w({},r),{},{[n]:e(n,t[n])}),{});function Nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nw(Object(r),!0).forEach(function(n){Uz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uz(e,t,r){return(t=Bz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _d=(e,t,r)=>e+(t-e)*r,ig=e=>{var{from:t,to:r}=e;return t!==r},k2=(e,t,r)=>{var n=ec((s,i)=>{if(ig(i)){var[o,l]=e(i.from,i.to,i.velocity);return Tt(Tt({},i),{},{from:o,velocity:l})}return i},t);return r<1?ec((s,i)=>ig(i)?Tt(Tt({},i),{},{velocity:_d(i.velocity,n[s].velocity,r),from:_d(i.from,n[s].from,r)}):i,t):k2(e,n,r-1)};function Vz(e,t,r,n,s,i){var o,l=n.reduce((h,m)=>Tt(Tt({},h),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>ec((h,m)=>m.from,l),u=()=>!Object.values(l).filter(ig).length,d=null,f=h=>{o||(o=h);var m=h-o,p=m/r.dt;l=k2(r,l,p),s(Tt(Tt(Tt({},e),t),c())),o=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function Wz(e,t,r,n,s,i,o){var l=null,c=s.reduce((f,h)=>Tt(Tt({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,m=ec((x,y)=>_d(...y,r(h)),c);if(i(Tt(Tt(Tt({},e),t),m)),h<1)l=o.setTimeout(d);else{var p=ec((x,y)=>_d(...y,r(1)),c);i(Tt(Tt(Tt({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Kz=(e,t,r,n,s,i)=>{var o=qz(e,t);return r.isStepper===!0?Vz(e,t,r,o,s,i):Wz(e,t,r,n,o,s,i)};class Hz{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var Gz=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(null,arguments)}function Yz(e,t){if(e==null)return{};var r,n,s=Jz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Jz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){Ai(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ai(e,t,r){return(t=Xz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eL(){return Oz(new Hz)}class Nx extends b.PureComponent{constructor(t,r){super(t,r),Ai(this,"mounted",!1),Ai(this,"manager",null),Ai(this,"stopJSAnimation",null),Ai(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(u);return}if(!(Tz(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var h={style:s?{[s]:f}:f};(s&&c[s]!==f||!s&&c!==f)&&this.setState(h)}this.runAnimation(Ps(Ps({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Kz(r,n,Iz(i),s,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=s?{[s]:i}:i,f=Fz(Object.keys(d),n,o);this.manager.start([l,r,Ps(Ps({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:m,animationManager:p}=t,x=Yz(t,Gz),y=b.Children.count(r),v=this.state.style;if(typeof r=="function")return r(v);if(!l||y===0||s<=0)return r;var g=w=>{var{style:_={},className:j}=w.props,N=b.cloneElement(w,Ps(Ps({},x),{},{style:Ps(Ps({},_),v),className:j}));return N};return y===1?g(b.Children.only(r)):b.createElement("div",null,b.Children.map(r,w=>g(w)))}}Ai(Nx,"displayName","Animate");Ai(Nx,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var tL=b.createContext(null);function Zi(e){var t,r,n=b.useContext(tL);return b.createElement(Nx,ag({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:eL()}))}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nd.apply(null,arguments)}var kw=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>i?i:s[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var m=Math.min(i,s);u="M ".concat(e,",").concat(t+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*m,`
            L `).concat(e+r,",").concat(t+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+n,`
            L `).concat(e+l*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},rL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},P2=e=>{var t=bs(e,rL),r=b.useRef(null),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&s(v)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isAnimationActive:p,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var y=we("recharts-rectangle",d);return x?b.createElement(Zi,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:h,animationEasing:f,isActive:x},v=>{var{width:g,height:w,x:_,y:j}=v;return b.createElement(Zi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,isActive:p,easing:f},b.createElement("path",Nd({},Pe(t,!0),{className:y,d:kw(_,j,g,w,u),ref:r})))}):b.createElement("path",Nd({},Pe(t,!0),{className:y,d:kw(i,o,l,c,u)}))};function E2(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=It(t,r,n,s),l=It(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(null,arguments)}var nL=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},lu=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/bd,f=c?s:s+i*d,h=It(t,r,u,f),m=It(t,r,n,f),p=c?s-i*d:s,x=It(t,r,u*Math.cos(d*bd),p);return{center:h,circleTangency:m,lineTangency:x,theta:d}},C2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=nL(i,o),c=i+l,u=It(t,r,s,i),d=It(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=It(t,r,n,i),m=It(t,r,n,c);f+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},sL=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=pr(u-c),{circleTangency:f,lineTangency:h,theta:m}=lu({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:x,theta:y}=lu({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-m-y;if(v<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):C2({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var g="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=lu({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:S,theta:k}=lu({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-k;if(E<0&&i===0)return"".concat(g,"L").concat(t,",").concat(r,"Z");g+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(E>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else g+="L".concat(t,",").concat(r,"Z");return g},iL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},A2=e=>{var t=bs(e,iL),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<s||u===d)return null;var h=we("recharts-sector",f),m=i-s,p=Sn(o,m,0,!0),x;return p>0&&Math.abs(u-d)<360?x=sL({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=C2({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),b.createElement("path",og({},Pe(t,!0),{className:h,d:x}))};function aL(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=It(l,c,u,f),m=It(l,c,d,f);n=h.x,s=h.y,i=m.x,o=m.y}else return E2(t);return[{x:n,y:s},{x:i,y:o}]}var T2={},O2={},D2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(D2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(O2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=px,r=O2;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(T2);var oL=T2.range;const M2=Qn(oL);function Zs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sx(e){let t,r,n;e.length!==2?(t=Zs,r=(l,c)=>Zs(e(l),c),n=(l,c)=>e(l)-c):(t=e===Zs||e===lL?e:cL,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function cL(){return 0}function I2(e){return e===null?NaN:+e}function*uL(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const dL=Sx(Zs),jc=dL.right;Sx(I2).center;class Pw extends Map{constructor(t,r=mL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Ew(this,t))}has(t){return super.has(Ew(this,t))}set(t,r){return super.set(fL(this,t),r)}delete(t){return super.delete(hL(this,t))}}function Ew({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function fL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function hL({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function mL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pL(e=Zs){if(e===Zs)return $2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function $2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gL=Math.sqrt(50),xL=Math.sqrt(10),yL=Math.sqrt(2);function Sd(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=gL?10:i>=xL?5:i>=yL?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Sd(e,t,r*2):[l,c,u]}function lg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Sd(t,e,r):Sd(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function cg(e,t,r){return t=+t,e=+e,r=+r,Sd(e,t,r)[2]}function ug(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?cg(t,e,r):cg(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Cw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Aw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function z2(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?$2:pL(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),p=Math.min(n,Math.floor(t+(c-u)*f/c+h));z2(e,t,m,p,s)}const i=e[t];let o=r,l=n;for(Zo(e,r,t),s(e[n],i)>0&&Zo(e,r,n);o<l;){for(Zo(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Zo(e,r,l):(++l,Zo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function vL(e,t,r){if(e=Float64Array.from(uL(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Aw(e);if(t>=1)return Cw(e);var n,s=(n-1)*t,i=Math.floor(s),o=Cw(z2(e,i).subarray(0,i+1)),l=Aw(e.subarray(i+1));return o+(l-o)*(s-i)}}function bL(e,t,r=I2){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function wL(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ln(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ws(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dg=Symbol("implicit");function kx(){var e=new Pw,t=[],r=[],n=dg;function s(i){let o=e.get(i);if(o===void 0){if(n!==dg)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Pw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return kx(t,r).unknown(n)},ln.apply(s,arguments),s}function Px(){var e=kx().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=s<n,p=m?s:n,x=m?n:s;i=(x-p)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),p+=(x-p-i*(h-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var y=wL(h).map(function(v){return p+i*v});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Px(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ln.apply(f(),arguments)}function L2(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return L2(t())},e}function jL(){return L2(Px.apply(null,arguments).paddingInner(1))}function Ex(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function R2(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _c(){}var tc=.7,kd=1/tc,Ha="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_L=/^#([0-9a-f]{3,8})$/,NL=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),SL=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),kL=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${rc}\\)$`),PL=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${rc}\\)$`),EL=new RegExp(`^hsl\\(${rc},${Rn},${Rn}\\)$`),CL=new RegExp(`^hsla\\(${rc},${Rn},${Rn},${rc}\\)$`),Tw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ex(_c,nc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ow,formatHex:Ow,formatHex8:AL,formatHsl:TL,formatRgb:Dw,toString:Dw});function Ow(){return this.rgb().formatHex()}function AL(){return this.rgb().formatHex8()}function TL(){return F2(this).formatHsl()}function Dw(){return this.rgb().formatRgb()}function nc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=_L.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Mw(t):r===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?cu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?cu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=NL.exec(e))?new gr(t[1],t[2],t[3],1):(t=SL.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kL.exec(e))?cu(t[1],t[2],t[3],t[4]):(t=PL.exec(e))?cu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=EL.exec(e))?zw(t[1],t[2]/100,t[3]/100,1):(t=CL.exec(e))?zw(t[1],t[2]/100,t[3]/100,t[4]):Tw.hasOwnProperty(e)?Mw(Tw[e]):e==="transparent"?new gr(NaN,NaN,NaN,0):null}function Mw(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function cu(e,t,r,n){return n<=0&&(e=t=r=NaN),new gr(e,t,r,n)}function OL(e){return e instanceof _c||(e=nc(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function fg(e,t,r,n){return arguments.length===1?OL(e):new gr(e,t,r,n??1)}function gr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Ex(gr,fg,R2(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(Li(this.r),Li(this.g),Li(this.b),Pd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iw,formatHex:Iw,formatHex8:DL,formatRgb:$w,toString:$w}));function Iw(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}`}function DL(){return`#${Ti(this.r)}${Ti(this.g)}${Ti(this.b)}${Ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function $w(){const e=Pd(this.opacity);return`${e===1?"rgb(":"rgba("}${Li(this.r)}, ${Li(this.g)}, ${Li(this.b)}${e===1?")":`, ${e})`}`}function Pd(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Li(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ti(e){return e=Li(e),(e<16?"0":"")+e.toString(16)}function zw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,r,n)}function F2(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof _c||(e=nc(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new bn(o,l,c,e.opacity)}function ML(e,t,r,n){return arguments.length===1?F2(e):new bn(e,t,r,n??1)}function bn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Ex(bn,ML,R2(_c,{brighter(e){return e=e==null?kd:Math.pow(kd,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new gr(mm(e>=240?e-240:e+120,s,n),mm(e,s,n),mm(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new bn(Lw(this.h),uu(this.s),uu(this.l),Pd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pd(this.opacity);return`${e===1?"hsl(":"hsla("}${Lw(this.h)}, ${uu(this.s)*100}%, ${uu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Lw(e){return e=(e||0)%360,e<0?e+360:e}function uu(e){return Math.max(0,Math.min(1,e||0))}function mm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Cx=e=>()=>e;function IL(e,t){return function(r){return e+r*t}}function $L(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function zL(e){return(e=+e)==1?q2:function(t,r){return r-t?$L(t,r,e):Cx(isNaN(t)?r:t)}}function q2(e,t){var r=t-e;return r?IL(e,r):Cx(isNaN(e)?t:e)}const Rw=function e(t){var r=zL(t);function n(s,i){var o=r((s=fg(s)).r,(i=fg(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=q2(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function LL(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function RL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function FL(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Eo(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function qL(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ed(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function UL(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Eo(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var hg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pm=new RegExp(hg.source,"g");function BL(e){return function(){return e}}function QL(e){return function(t){return e(t)+""}}function VL(e,t){var r=hg.lastIndex=pm.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=hg.exec(e))&&(s=pm.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Ed(n,s)})),r=pm.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?QL(c[0].x):BL(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Eo(e,t){var r=typeof t,n;return t==null||r==="boolean"?Cx(t):(r==="number"?Ed:r==="string"?(n=nc(t))?(t=n,Rw):VL:t instanceof nc?Rw:t instanceof Date?qL:RL(t)?LL:Array.isArray(t)?FL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?UL:Ed)(e,t)}function Ax(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function WL(e,t){t===void 0&&(t=e,e=Eo);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function KL(e){return function(){return e}}function Cd(e){return+e}var Fw=[0,1];function rr(e){return e}function mg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KL(isNaN(t)?NaN:.5)}function HL(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function GL(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=mg(s,n),i=r(o,i)):(n=mg(n,s),i=r(i,o)),function(l){return i(n(l))}}function YL(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=mg(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=jc(e,l,1,n)-1;return i[c](s[c](l))}}function Nc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jf(){var e=Fw,t=Fw,r=Eo,n,s,i,o=rr,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==rr&&(o=HL(e[0],e[h-1])),l=h>2?YL:GL,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(s((u||(u=l(t,e.map(n),Ed)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Cd),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Ax,d()},f.clamp=function(h){return arguments.length?(o=h?!0:rr,d()):o!==rr},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,s=m,d()}}function Tx(){return Jf()(rr,rr)}function JL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ad(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mo(e){return e=Ad(Math.abs(e)),e?e[1]:NaN}function XL(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ZL(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var eR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sc(e){if(!(t=eR.exec(e)))throw new Error("invalid format: "+e);var t;return new Ox({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sc.prototype=Ox.prototype;function Ox(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ox.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tR(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var U2;function rR(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(U2=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ad(e,Math.max(0,t+i-1))[0]}function qw(e,t){var r=Ad(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Uw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JL,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qw(e*100,t),r:qw,s:rR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Bw(e){return e}var Qw=Array.prototype.map,Vw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nR(e){var t=e.grouping===void 0||e.thousands===void 0?Bw:XL(Qw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Bw:ZL(Qw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=sc(f);var h=f.fill,m=f.align,p=f.sign,x=f.symbol,y=f.zero,v=f.width,g=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(g=!0,j="g"):Uw[j]||(w===void 0&&(w=12),_=!0,j="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var N=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=x==="$"?n:/[%p]/.test(j)?o:"",k=Uw[j],E=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(D){var O=N,z=S,R,B,F;if(j==="c")z=k(D)+z,D="";else{D=+D;var I=D<0||1/D<0;if(D=isNaN(D)?c:k(Math.abs(D),w),_&&(D=tR(D)),I&&+D==0&&p!=="+"&&(I=!1),O=(I?p==="("?p:l:p==="-"||p==="("?"":p)+O,z=(j==="s"?Vw[8+U2/3]:"")+z+(I&&p==="("?")":""),E){for(R=-1,B=D.length;++R<B;)if(F=D.charCodeAt(R),48>F||F>57){z=(F===46?s+D.slice(R+1):D.slice(R))+z,D=D.slice(0,R);break}}}g&&!y&&(D=t(D,1/0));var C=O.length+D.length+z.length,T=C<v?new Array(v-C+1).join(h):"";switch(g&&y&&(D=t(T+D,T.length?v-z.length:1/0),T=""),m){case"<":D=O+D+z+T;break;case"=":D=O+T+D+z;break;case"^":D=T.slice(0,C=T.length>>1)+O+D+z+T.slice(C);break;default:D=T+O+D+z;break}return i(D)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=sc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mo(h)/3)))*3,x=Math.pow(10,-p),y=Vw[8+p/3];return function(v){return m(x*v)+y}}return{format:u,formatPrefix:d}}var du,Dx,B2;sR({thousands:",",grouping:[3],currency:["$",""]});function sR(e){return du=nR(e),Dx=du.format,B2=du.formatPrefix,du}function iR(e){return Math.max(0,-mo(Math.abs(e)))}function aR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mo(t)/3)))*3-mo(Math.abs(e)))}function oR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mo(t)-mo(e))+1}function Q2(e,t,r,n){var s=ug(e,t,r),i;switch(n=sc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=aR(s,o))&&(n.precision=i),B2(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=oR(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=iR(s))&&(n.precision=i-(n.type==="%")*2);break}}return Dx(n)}function fi(e){var t=e.domain;return e.ticks=function(r){var n=t();return lg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return Q2(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=cg(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function V2(){var e=Tx();return e.copy=function(){return Nc(e,V2())},ln.apply(e,arguments),fi(e)}function W2(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Cd),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return W2(e).unknown(t)},e=arguments.length?Array.from(e,Cd):[0,1],fi(r)}function K2(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function Ww(e){return Math.log(e)}function Kw(e){return Math.exp(e)}function lR(e){return-Math.log(-e)}function cR(e){return-Math.exp(-e)}function uR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dR(e){return e===10?uR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function fR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Hw(e){return(t,r)=>-e(-t,r)}function Mx(e){const t=e(Ww,Kw),r=t.domain;let n=10,s,i;function o(){return s=fR(n),i=dR(n),r()[0]<0?(s=Hw(s),i=Hw(i),e(lR,cR)):e(Ww,Kw),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),m=s(d),p,x;const y=l==null?10:+l;let v=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(p=1;p<n;++p)if(x=h<0?p/i(-h):p*i(h),!(x<u)){if(x>d)break;v.push(x)}}else for(;h<=m;++h)for(p=n-1;p>=1;--p)if(x=h>0?p/i(-h):p*i(h),!(x<u)){if(x>d)break;v.push(x)}v.length*2<y&&(v=lg(u,d,y))}else v=lg(h,m,Math.min(m-h,y)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sc(c)).precision==null&&(c.trim=!0),c=Dx(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(K2(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function H2(){const e=Mx(Jf()).domain([1,10]);return e.copy=()=>Nc(e,H2()).base(e.base()),ln.apply(e,arguments),e}function Gw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ix(e){var t=1,r=e(Gw(t),Yw(t));return r.constant=function(n){return arguments.length?e(Gw(t=+n),Yw(t)):t},fi(r)}function G2(){var e=Ix(Jf());return e.copy=function(){return Nc(e,G2()).constant(e.constant())},ln.apply(e,arguments)}function Jw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hR(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mR(e){return e<0?-e*e:e*e}function $x(e){var t=e(rr,rr),r=1;function n(){return r===1?e(rr,rr):r===.5?e(hR,mR):e(Jw(r),Jw(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},fi(t)}function zx(){var e=$x(Jf());return e.copy=function(){return Nc(e,zx()).exponent(e.exponent())},ln.apply(e,arguments),e}function pR(){return zx.apply(null,arguments).exponent(.5)}function Xw(e){return Math.sign(e)*e*e}function gR(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Y2(){var e=Tx(),t=[0,1],r=!1,n;function s(i){var o=gR(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(Xw(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Cd)).map(Xw)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Y2(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ln.apply(s,arguments),fi(s)}function J2(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=bL(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[jc(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Zs),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return J2().domain(e).range(t).unknown(n)},ln.apply(i,arguments)}function X2(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[jc(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return X2().domain([e,t]).range(s).unknown(i)},ln.apply(fi(o),arguments)}function Z2(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[jc(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Z2().domain(e).range(t).unknown(r)},ln.apply(s,arguments)}const gm=new Date,xm=new Date;function yt(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>yt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(gm.setTime(+i),xm.setTime(+o),e(gm),e(xm),Math.floor(r(gm,xm))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Td=yt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Td.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Td);Td.range;const rs=1e3,Hr=rs*60,ns=Hr*60,hs=ns*24,Lx=hs*7,Zw=hs*30,ym=hs*365,Oi=yt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*rs)},(e,t)=>(t-e)/rs,e=>e.getUTCSeconds());Oi.range;const Rx=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rs)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getMinutes());Rx.range;const Fx=yt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCMinutes());Fx.range;const qx=yt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rs-e.getMinutes()*Hr)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getHours());qx.range;const Ux=yt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getUTCHours());Ux.range;const Sc=yt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hr)/hs,e=>e.getDate()-1);Sc.range;const Xf=yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hs,e=>e.getUTCDate()-1);Xf.range;const eP=yt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hs,e=>Math.floor(e/hs));eP.range;function oa(e){return yt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Lx)}const Zf=oa(0),Od=oa(1),xR=oa(2),yR=oa(3),po=oa(4),vR=oa(5),bR=oa(6);Zf.range;Od.range;xR.range;yR.range;po.range;vR.range;bR.range;function la(e){return yt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Lx)}const eh=la(0),Dd=la(1),wR=la(2),jR=la(3),go=la(4),_R=la(5),NR=la(6);eh.range;Dd.range;wR.range;jR.range;go.range;_R.range;NR.range;const Bx=yt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Bx.range;const Qx=yt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qx.range;const ms=yt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ms.range;const ps=yt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ps.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ps.range;function tP(e,t,r,n,s,i){const o=[[Oi,1,rs],[Oi,5,5*rs],[Oi,15,15*rs],[Oi,30,30*rs],[i,1,Hr],[i,5,5*Hr],[i,15,15*Hr],[i,30,30*Hr],[s,1,ns],[s,3,3*ns],[s,6,6*ns],[s,12,12*ns],[n,1,hs],[n,2,2*hs],[r,1,Lx],[t,1,Zw],[t,3,3*Zw],[e,1,ym]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),p=m?m.range(u,+d+1):[];return h?p.reverse():p}function c(u,d,f){const h=Math.abs(d-u)/f,m=Sx(([,,y])=>y).right(o,h);if(m===o.length)return e.every(ug(u/ym,d/ym,f));if(m===0)return Td.every(Math.max(ug(u,d,f),1));const[p,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return p.every(x)}return[l,c]}const[SR,kR]=tP(ps,Qx,eh,eP,Ux,Fx),[PR,ER]=tP(ms,Bx,Zf,Sc,qx,Rx);function vm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function el(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function CR(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=tl(s),d=rl(s),f=tl(i),h=rl(i),m=tl(o),p=rl(o),x=tl(l),y=rl(l),v=tl(c),g=rl(c),w={a:I,A:C,b:T,B:A,c:null,d:ij,e:ij,f:XR,g:lF,G:uF,H:GR,I:YR,j:JR,L:rP,m:ZR,M:eF,p:L,q,Q:lj,s:cj,S:tF,u:rF,U:nF,V:sF,w:iF,W:aF,x:null,X:null,y:oF,Y:cF,Z:dF,"%":oj},_={a:ee,A:ne,b:Y,B:ve,c:null,d:aj,e:aj,f:pF,g:SF,G:PF,H:fF,I:hF,j:mF,L:sP,m:gF,M:xF,p:je,q:Et,Q:lj,s:cj,S:yF,u:vF,U:bF,V:wF,w:jF,W:_F,x:null,X:null,y:NF,Y:kF,Z:EF,"%":oj},j={a:P,A:D,b:O,B:z,c:R,d:nj,e:nj,f:VR,g:rj,G:tj,H:sj,I:sj,j:qR,L:QR,m:FR,M:UR,p:E,q:RR,Q:KR,s:HR,S:BR,u:MR,U:IR,V:$R,w:DR,W:zR,x:B,X:F,y:rj,Y:tj,Z:LR,"%":WR};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(Z,W){return function(te){var H=[],De=-1,pe=0,Ee=Z.length,Le,at,Je;for(te instanceof Date||(te=new Date(+te));++De<Ee;)Z.charCodeAt(De)===37&&(H.push(Z.slice(pe,De)),(at=ej[Le=Z.charAt(++De)])!=null?Le=Z.charAt(++De):at=Le==="e"?" ":"0",(Je=W[Le])&&(Le=Je(te,at)),H.push(Le),pe=De+1);return H.push(Z.slice(pe,De)),H.join("")}}function S(Z,W){return function(te){var H=el(1900,void 0,1),De=k(H,Z,te+="",0),pe,Ee;if(De!=te.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(W&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(pe=bm(el(H.y,0,1)),Ee=pe.getUTCDay(),pe=Ee>4||Ee===0?Dd.ceil(pe):Dd(pe),pe=Xf.offset(pe,(H.V-1)*7),H.y=pe.getUTCFullYear(),H.m=pe.getUTCMonth(),H.d=pe.getUTCDate()+(H.w+6)%7):(pe=vm(el(H.y,0,1)),Ee=pe.getDay(),pe=Ee>4||Ee===0?Od.ceil(pe):Od(pe),pe=Sc.offset(pe,(H.V-1)*7),H.y=pe.getFullYear(),H.m=pe.getMonth(),H.d=pe.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Ee="Z"in H?bm(el(H.y,0,1)).getUTCDay():vm(el(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Ee+5)%7:H.w+H.U*7-(Ee+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,bm(H)):vm(H)}}function k(Z,W,te,H){for(var De=0,pe=W.length,Ee=te.length,Le,at;De<pe;){if(H>=Ee)return-1;if(Le=W.charCodeAt(De++),Le===37){if(Le=W.charAt(De++),at=j[Le in ej?W.charAt(De++):Le],!at||(H=at(Z,te,H))<0)return-1}else if(Le!=te.charCodeAt(H++))return-1}return H}function E(Z,W,te){var H=u.exec(W.slice(te));return H?(Z.p=d.get(H[0].toLowerCase()),te+H[0].length):-1}function P(Z,W,te){var H=m.exec(W.slice(te));return H?(Z.w=p.get(H[0].toLowerCase()),te+H[0].length):-1}function D(Z,W,te){var H=f.exec(W.slice(te));return H?(Z.w=h.get(H[0].toLowerCase()),te+H[0].length):-1}function O(Z,W,te){var H=v.exec(W.slice(te));return H?(Z.m=g.get(H[0].toLowerCase()),te+H[0].length):-1}function z(Z,W,te){var H=x.exec(W.slice(te));return H?(Z.m=y.get(H[0].toLowerCase()),te+H[0].length):-1}function R(Z,W,te){return k(Z,t,W,te)}function B(Z,W,te){return k(Z,r,W,te)}function F(Z,W,te){return k(Z,n,W,te)}function I(Z){return o[Z.getDay()]}function C(Z){return i[Z.getDay()]}function T(Z){return c[Z.getMonth()]}function A(Z){return l[Z.getMonth()]}function L(Z){return s[+(Z.getHours()>=12)]}function q(Z){return 1+~~(Z.getMonth()/3)}function ee(Z){return o[Z.getUTCDay()]}function ne(Z){return i[Z.getUTCDay()]}function Y(Z){return c[Z.getUTCMonth()]}function ve(Z){return l[Z.getUTCMonth()]}function je(Z){return s[+(Z.getUTCHours()>=12)]}function Et(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var W=N(Z+="",w);return W.toString=function(){return Z},W},parse:function(Z){var W=S(Z+="",!1);return W.toString=function(){return Z},W},utcFormat:function(Z){var W=N(Z+="",_);return W.toString=function(){return Z},W},utcParse:function(Z){var W=S(Z+="",!0);return W.toString=function(){return Z},W}}}var ej={"-":"",_:" ",0:"0"},St=/^\s*\d+/,AR=/^%/,TR=/[\\^$*+?|[\]().{}]/g;function _e(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function OR(e){return e.replace(TR,"\\$&")}function tl(e){return new RegExp("^(?:"+e.map(OR).join("|")+")","i")}function rl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function DR(e,t,r){var n=St.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function MR(e,t,r){var n=St.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function IR(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function $R(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function zR(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tj(e,t,r){var n=St.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rj(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function LR(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function RR(e,t,r){var n=St.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function FR(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function nj(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function qR(e,t,r){var n=St.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function UR(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function BR(e,t,r){var n=St.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function QR(e,t,r){var n=St.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function VR(e,t,r){var n=St.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function WR(e,t,r){var n=AR.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function KR(e,t,r){var n=St.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function HR(e,t,r){var n=St.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function ij(e,t){return _e(e.getDate(),t,2)}function GR(e,t){return _e(e.getHours(),t,2)}function YR(e,t){return _e(e.getHours()%12||12,t,2)}function JR(e,t){return _e(1+Sc.count(ms(e),e),t,3)}function rP(e,t){return _e(e.getMilliseconds(),t,3)}function XR(e,t){return rP(e,t)+"000"}function ZR(e,t){return _e(e.getMonth()+1,t,2)}function eF(e,t){return _e(e.getMinutes(),t,2)}function tF(e,t){return _e(e.getSeconds(),t,2)}function rF(e){var t=e.getDay();return t===0?7:t}function nF(e,t){return _e(Zf.count(ms(e)-1,e),t,2)}function nP(e){var t=e.getDay();return t>=4||t===0?po(e):po.ceil(e)}function sF(e,t){return e=nP(e),_e(po.count(ms(e),e)+(ms(e).getDay()===4),t,2)}function iF(e){return e.getDay()}function aF(e,t){return _e(Od.count(ms(e)-1,e),t,2)}function oF(e,t){return _e(e.getFullYear()%100,t,2)}function lF(e,t){return e=nP(e),_e(e.getFullYear()%100,t,2)}function cF(e,t){return _e(e.getFullYear()%1e4,t,4)}function uF(e,t){var r=e.getDay();return e=r>=4||r===0?po(e):po.ceil(e),_e(e.getFullYear()%1e4,t,4)}function dF(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_e(t/60|0,"0",2)+_e(t%60,"0",2)}function aj(e,t){return _e(e.getUTCDate(),t,2)}function fF(e,t){return _e(e.getUTCHours(),t,2)}function hF(e,t){return _e(e.getUTCHours()%12||12,t,2)}function mF(e,t){return _e(1+Xf.count(ps(e),e),t,3)}function sP(e,t){return _e(e.getUTCMilliseconds(),t,3)}function pF(e,t){return sP(e,t)+"000"}function gF(e,t){return _e(e.getUTCMonth()+1,t,2)}function xF(e,t){return _e(e.getUTCMinutes(),t,2)}function yF(e,t){return _e(e.getUTCSeconds(),t,2)}function vF(e){var t=e.getUTCDay();return t===0?7:t}function bF(e,t){return _e(eh.count(ps(e)-1,e),t,2)}function iP(e){var t=e.getUTCDay();return t>=4||t===0?go(e):go.ceil(e)}function wF(e,t){return e=iP(e),_e(go.count(ps(e),e)+(ps(e).getUTCDay()===4),t,2)}function jF(e){return e.getUTCDay()}function _F(e,t){return _e(Dd.count(ps(e)-1,e),t,2)}function NF(e,t){return _e(e.getUTCFullYear()%100,t,2)}function SF(e,t){return e=iP(e),_e(e.getUTCFullYear()%100,t,2)}function kF(e,t){return _e(e.getUTCFullYear()%1e4,t,4)}function PF(e,t){var r=e.getUTCDay();return e=r>=4||r===0?go(e):go.ceil(e),_e(e.getUTCFullYear()%1e4,t,4)}function EF(){return"+0000"}function oj(){return"%"}function lj(e){return+e}function cj(e){return Math.floor(+e/1e3)}var va,aP,oP;CF({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CF(e){return va=CR(e),aP=va.format,va.parse,oP=va.utcFormat,va.utcParse,va}function AF(e){return new Date(e)}function TF(e){return e instanceof Date?+e:+new Date(+e)}function Vx(e,t,r,n,s,i,o,l,c,u){var d=Tx(),f=d.invert,h=d.domain,m=u(".%L"),p=u(":%S"),x=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),g=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?p:o(N)<N?x:i(N)<N?y:n(N)<N?s(N)<N?v:g:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,TF)):h().map(AF)},d.ticks=function(N){var S=h();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=h();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?h(K2(S,N)):d},d.copy=function(){return Nc(d,Vx(e,t,r,n,s,i,o,l,c,u))},d}function OF(){return ln.apply(Vx(PR,ER,ms,Bx,Zf,Sc,qx,Rx,Oi,aP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function DF(){return ln.apply(Vx(SR,kR,ps,Qx,eh,Xf,Ux,Fx,Oi,oP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function th(){var e=0,t=1,r,n,s,i,o=rr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,p;return arguments.length?([m,p]=h,o=f(m,p),u):[o(0),o(1)]}}return u.range=d(Eo),u.rangeRound=d(Ax),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function hi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lP(){var e=fi(th()(rr));return e.copy=function(){return hi(e,lP())},ws.apply(e,arguments)}function cP(){var e=Mx(th()).domain([1,10]);return e.copy=function(){return hi(e,cP()).base(e.base())},ws.apply(e,arguments)}function uP(){var e=Ix(th());return e.copy=function(){return hi(e,uP()).constant(e.constant())},ws.apply(e,arguments)}function Wx(){var e=$x(th());return e.copy=function(){return hi(e,Wx()).exponent(e.exponent())},ws.apply(e,arguments)}function MF(){return Wx.apply(null,arguments).exponent(.5)}function dP(){var e=[],t=rr;function r(n){if(n!=null&&!isNaN(n=+n))return t((jc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Zs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>vL(e,i/n))},r.copy=function(){return dP(t).domain(e)},ws.apply(r,arguments)}function rh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=rr,d,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-i)*(n*x<n*i?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function p(x){return function(y){var v,g,w;return arguments.length?([v,g,w]=y,u=WL(x,[v,g,w]),m):[u(0),u(.5),u(1)]}}return m.range=p(Eo),m.rangeRound=p(Ax),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return d=x,s=x(e),i=x(t),o=x(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m}}function fP(){var e=fi(rh()(rr));return e.copy=function(){return hi(e,fP())},ws.apply(e,arguments)}function hP(){var e=Mx(rh()).domain([.1,1,10]);return e.copy=function(){return hi(e,hP()).base(e.base())},ws.apply(e,arguments)}function mP(){var e=Ix(rh());return e.copy=function(){return hi(e,mP()).constant(e.constant())},ws.apply(e,arguments)}function Kx(){var e=$x(rh());return e.copy=function(){return hi(e,Kx()).exponent(e.exponent())},ws.apply(e,arguments)}function IF(){return Kx.apply(null,arguments).exponent(.5)}const ul=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Px,scaleDiverging:fP,scaleDivergingLog:hP,scaleDivergingPow:Kx,scaleDivergingSqrt:IF,scaleDivergingSymlog:mP,scaleIdentity:W2,scaleImplicit:dg,scaleLinear:V2,scaleLog:H2,scaleOrdinal:kx,scalePoint:jL,scalePow:zx,scaleQuantile:J2,scaleQuantize:X2,scaleRadial:Y2,scaleSequential:lP,scaleSequentialLog:cP,scaleSequentialPow:Wx,scaleSequentialQuantile:dP,scaleSequentialSqrt:MF,scaleSequentialSymlog:uP,scaleSqrt:pR,scaleSymlog:G2,scaleThreshold:Z2,scaleTime:OF,scaleUtc:DF,tickFormat:Q2},Symbol.toStringTag,{value:"Module"}));var ca=e=>e.chartData,$F=V([ca],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Hx=(e,t,r,n)=>n?$F(e):ca(e);function xo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zr(t)&&zr(r))return!0}return!1}function uj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function zF(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(zr(r))s=r;else if(typeof r=="function")return;if(zr(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(xo(o))return o}}function LF(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xo(n))return uj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(le(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&lw.test(s)){var c=lw.exec(s);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(le(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&cw.test(i)){var d=cw.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(xo(h))return t==null?h:uj(h,t,r)}}}var Co=1e9,RF={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yx,Ye=!0,nn="[DecimalError] ",Ri=nn+"Invalid argument: ",Gx=nn+"Exponent out of range: ",Ao=Math.floor,_i=Math.pow,FF=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Er,bt=1e7,Ve=7,pP=9007199254740991,Md=Ao(pP/Ve),ie={};ie.absoluteValue=ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ie.comparedTo=ie.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};ie.decimalPlaces=ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ve;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ie.dividedBy=ie.div=function(e){return as(this,new this.constructor(e))};ie.dividedToIntegerBy=ie.idiv=function(e){var t=this,r=t.constructor;return Me(as(t,new r(e),0,1),r.precision)};ie.equals=ie.eq=function(e){return!this.cmp(e)};ie.exponent=function(){return dt(this)};ie.greaterThan=ie.gt=function(e){return this.cmp(e)>0};ie.greaterThanOrEqualTo=ie.gte=function(e){return this.cmp(e)>=0};ie.isInteger=ie.isint=function(){return this.e>this.d.length-2};ie.isNegative=ie.isneg=function(){return this.s<0};ie.isPositive=ie.ispos=function(){return this.s>0};ie.isZero=function(){return this.s===0};ie.lessThan=ie.lt=function(e){return this.cmp(e)<0};ie.lessThanOrEqualTo=ie.lte=function(e){return this.cmp(e)<1};ie.logarithm=ie.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Er))throw Error(nn+"NaN");if(r.s<1)throw Error(nn+(r.s?"NaN":"-Infinity"));return r.eq(Er)?new n(0):(Ye=!1,t=as(ic(r,i),ic(e,i),i),Ye=!0,Me(t,s))};ie.minus=ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?yP(t,e):gP(t,(e.s=-e.s,e))};ie.modulo=ie.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(nn+"NaN");return r.s?(Ye=!1,t=as(r,e,0,1).times(e),Ye=!0,r.minus(t)):Me(new n(r),s)};ie.naturalExponential=ie.exp=function(){return xP(this)};ie.naturalLogarithm=ie.ln=function(){return ic(this)};ie.negated=ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ie.plus=ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gP(t,e):yP(t,(e.s=-e.s,e))};ie.precision=ie.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ri+e);if(t=dt(s)+1,n=s.d.length-1,r=n*Ve+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ie.squareRoot=ie.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(nn+"NaN")}for(e=dt(l),Ye=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=In(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ao((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(as(l,i,o+2)).times(.5),In(i.d).slice(0,o)===(t=In(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Me(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ye=!0,Me(n,r)};ie.times=ie.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+m[n]*h[s-n-1]+t,i[s--]=l%bt|0,t=l/bt|0;i[s]=(i[s]+t)%bt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ye?Me(e,f.precision):e};ie.toDecimalPlaces=ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Un(e,0,Co),t===void 0?t=n.rounding:Un(t,0,8),Me(r,e+dt(r)+1,t))};ie.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ea(n,!0):(Un(e,0,Co),t===void 0?t=s.rounding:Un(t,0,8),n=Me(new s(n),e+1,t),r=ea(n,!0,e+1)),r};ie.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ea(s):(Un(e,0,Co),t===void 0?t=i.rounding:Un(t,0,8),n=Me(new i(s),e+dt(s)+1,t),r=ea(n.abs(),!1,e+dt(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ie.toInteger=ie.toint=function(){var e=this,t=e.constructor;return Me(new t(e),dt(e)+1,t.rounding)};ie.toNumber=function(){return+this};ie.toPower=ie.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Er);if(l=new c(l),!l.s){if(e.s<1)throw Error(nn+"Infinity");return l}if(l.eq(Er))return l;if(n=c.precision,e.eq(Er))return Me(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=pP){for(s=new c(Er),t=Math.ceil(n/Ve+4),Ye=!1;r%2&&(s=s.times(l),fj(s.d,t)),r=Ao(r/2),r!==0;)l=l.times(l),fj(l.d,t);return Ye=!0,e.s<0?new c(Er).div(s):Me(s,n)}}else if(i<0)throw Error(nn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ye=!1,s=e.times(ic(l,n+u)),Ye=!0,s=xP(s),s.s=i,s};ie.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=dt(s),n=ea(s,r<=i.toExpNeg||r>=i.toExpPos)):(Un(e,1,Co),t===void 0?t=i.rounding:Un(t,0,8),s=Me(new i(s),e,t),r=dt(s),n=ea(s,e<=r||r<=i.toExpNeg,e)),n};ie.toSignificantDigits=ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Un(e,1,Co),t===void 0?t=n.rounding:Un(t,0,8)),Me(new n(r),e,t)};ie.toString=ie.valueOf=ie.val=ie.toJSON=ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=dt(e),r=e.constructor;return ea(e,t<=r.toExpNeg||t>=r.toExpPos)};function gP(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ye?Me(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/Ve),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/bt|0,c[i]%=bt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ye?Me(t,f):t}function Un(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ri+e)}function In(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Ve-n.length,r&&(i+=Os(r)),i+=n;o=e[t],n=o+"",r=Ve-n.length,r&&(i+=Os(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var as=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%bt|0,o=i/bt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*bt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,f,h,m,p,x,y,v,g,w,_,j,N,S,k,E=n.constructor,P=n.s==s.s?1:-1,D=n.d,O=s.d;if(!n.s)return new E(n);if(!s.s)throw Error(nn+"Division by zero");for(c=n.e-s.e,S=O.length,j=D.length,m=new E(P),p=m.d=[],u=0;O[u]==(D[u]||0);)++u;if(O[u]>(D[u]||0)&&--c,i==null?g=i=E.precision:o?g=i+(dt(n)-dt(s))+1:g=i,g<0)return new E(0);if(g=g/Ve+2|0,u=0,S==1)for(d=0,O=O[0],g++;(u<j||d)&&g--;u++)w=d*bt+(D[u]||0),p[u]=w/O|0,d=w%O|0;else{for(d=bt/(O[0]+1)|0,d>1&&(O=e(O,d),D=e(D,d),S=O.length,j=D.length),_=S,x=D.slice(0,S),y=x.length;y<S;)x[y++]=0;k=O.slice(),k.unshift(0),N=O[0],O[1]>=bt/2&&++N;do d=0,l=t(O,x,S,y),l<0?(v=x[0],S!=y&&(v=v*bt+(x[1]||0)),d=v/N|0,d>1?(d>=bt&&(d=bt-1),f=e(O,d),h=f.length,y=x.length,l=t(f,x,h,y),l==1&&(d--,r(f,S<h?k:O,h))):(d==0&&(l=d=1),f=O.slice()),h=f.length,h<y&&f.unshift(0),r(x,f,y),l==-1&&(y=x.length,l=t(O,x,S,y),l<1&&(d++,r(x,S<y?k:O,y))),y=x.length):l===0&&(d++,x=[0]),p[u++]=d,l&&x[0]?x[y++]=D[_]||0:(x=[D[_]],y=1);while((_++<j||x[0]!==void 0)&&g--)}return p[0]||p.shift(),m.e=c,Me(m,o?i+dt(m)+1:i)}}();function xP(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(dt(e)>16)throw Error(Gx+dt(e));if(!e.s)return new d(Er);for(t==null?(Ye=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(_i(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Er),d.precision=l;;){if(s=Me(s.times(e),l),r=r.times(++c),o=i.plus(as(s,r,l)),In(o.d).slice(0,l)===In(i.d).slice(0,l)){for(;u--;)i=Me(i.times(i),l);return d.precision=f,t==null?(Ye=!0,Me(i,f)):i}i=o}}function dt(e){for(var t=e.e*Ve,r=e.d[0];r>=10;r/=10)t++;return t}function wm(e,t,r){if(t>e.LN10.sd())throw Ye=!0,r&&(e.precision=r),Error(nn+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function Os(e){for(var t="";e--;)t+="0";return t}function ic(e,t){var r,n,s,i,o,l,c,u,d,f=1,h=10,m=e,p=m.d,x=m.constructor,y=x.precision;if(m.s<1)throw Error(nn+(m.s?"NaN":"-Infinity"));if(m.eq(Er))return new x(0);if(t==null?(Ye=!1,u=y):u=t,m.eq(10))return t==null&&(Ye=!0),wm(x,u);if(u+=h,x.precision=u,r=In(p),n=r.charAt(0),i=dt(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=In(m.d),n=r.charAt(0),f++;i=dt(m),n>1?(m=new x("0."+r),i++):m=new x(n+"."+r.slice(1))}else return c=wm(x,u+2,y).times(i+""),m=ic(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=y,t==null?(Ye=!0,Me(m,y)):m;for(l=o=m=as(m.minus(Er),m.plus(Er),u),d=Me(m.times(m),u),s=3;;){if(o=Me(o.times(d),u),c=l.plus(as(o,new x(s),u)),In(c.d).slice(0,u)===In(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(wm(x,u+2,y).times(i+""))),l=as(l,new x(f),u),x.precision=y,t==null?(Ye=!0,Me(l,y)):l;l=c,s+=2}}function dj(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ao(r/Ve),e.d=[],n=(r+1)%Ve,r<0&&(n+=Ve),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ve;n<s;)e.d.push(+t.slice(n,n+=Ve));t=t.slice(n),n=Ve-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ye&&(e.e>Md||e.e<-Md))throw Error(Gx+r)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,r){var n,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ve,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ve),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ve,s=n-Ve+o}if(r!==void 0&&(i=_i(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/_i(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=dt(e),f.length=1,t=t-i-1,f[0]=_i(10,(Ve-t%Ve)%Ve),e.e=Ao(-t/Ve)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=_i(10,Ve-n),f[d]=s>0?(u/_i(10,o-s)%_i(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==bt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=bt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ye&&(e.e>Md||e.e<-Md))throw Error(Gx+dt(e));return e}function yP(e,t){var r,n,s,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ye?Me(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(m/Ve),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=bt-1;--c[i],c[s]+=bt}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ye?Me(t,m):t):new h(0)}function ea(e,t,r){var n,s=dt(e),i=In(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Os(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Os(-s-1)+i,r&&(n=r-o)>0&&(i+=Os(n))):s>=o?(i+=Os(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Os(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Os(n))),e.s<0?"-"+i:i}function fj(e,t){if(e.length>t)return e.length=t,!0}function vP(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ri+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return dj(o,i.toString())}else if(typeof i!="string")throw Error(Ri+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,FF.test(i))dj(o,i);else throw Error(Ri+i)}if(s.prototype=ie,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=vP,s.config=s.set=qF,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function qF(e){if(!e||typeof e!="object")throw Error(nn+"Object expected");var t,r,n,s=["precision",1,Co,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ao(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ri+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ri+r+": "+n);return this}var Yx=vP(RF);Er=new Yx(1);const Ce=Yx;var UF=e=>e,bP={"@@functional/placeholder":!0},wP=e=>e===bP,hj=e=>function t(){return arguments.length===0||arguments.length===1&&wP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},jP=(e,t)=>e===1?t:hj(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==bP).length;return i>=e?t(...n):jP(e-i,hj(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>wP(d)?l.shift():d);return t(...u,...l)}))}),nh=e=>jP(e.length,e),pg=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},BF=nh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),QF=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return UF;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},gg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),_P=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function NP(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function SP(e,t,r){for(var n=new Ce(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}nh((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var kP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},PP=(e,t,r)=>{if(e.lte(0))return new Ce(0);var n=NP(e.toNumber()),s=new Ce(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ce(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new Ce(c.toNumber()):new Ce(Math.ceil(c.toNumber()))},VF=(e,t,r)=>{var n=new Ce(1),s=new Ce(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ce(10).pow(NP(e)-1),s=new Ce(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ce(Math.floor(e)))}else e===0?s=new Ce(Math.floor((t-1)/2)):r||(s=new Ce(Math.floor(e)));var o=Math.floor((t-1)/2),l=QF(BF(c=>s.add(new Ce(c-o).mul(n)).toNumber()),pg);return l(0,t)},EP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var o=PP(new Ce(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Ce(0):(l=new Ce(t).add(r).div(2),l=l.sub(new Ce(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Ce(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?EP(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ce(c).mul(o)),tickMax:l.add(new Ce(u).mul(o))})};function WF(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=kP([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...pg(0,n-1).map(()=>1/0)]:[...pg(0,n-1).map(()=>-1/0),l];return t>r?gg(c):c}if(o===l)return VF(o,n,s);var{step:u,tickMin:d,tickMax:f}=EP(o,l,i,s,0),h=SP(d,f.add(new Ce(.1).mul(u)),u);return t>r?gg(h):h}function KF(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=kP([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=PP(new Ce(o).sub(i).div(l-1),s,0),u=[...SP(new Ce(i),new Ce(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?gg(u):u}var HF=_P(WF),GF=_P(KF),CP=e=>e.rootProps.maxBarSize,YF=e=>e.rootProps.barGap,AP=e=>e.rootProps.barCategoryGap,JF=e=>e.rootProps.barSize,sh=e=>e.rootProps.stackOffset,Jx=e=>e.options.chartName,Xx=e=>e.rootProps.syncId,TP=e=>e.rootProps.syncMethod,Zx=e=>e.options.eventEmitter,Jn={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},kr={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},ih=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},XF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jn.angleAxisId,includeHidden:!1,name:void 0,reversed:Jn.reversed,scale:Jn.scale,tick:Jn.tick,tickCount:void 0,ticks:void 0,type:Jn.type,unit:void 0},ZF={allowDataOverflow:kr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:kr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:kr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,ticks:void 0,type:kr.type,unit:void 0},eq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jn.scale,tick:Jn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},tq={allowDataOverflow:kr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:kr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:kr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:kr.scale,tick:kr.tick,tickCount:kr.tickCount,ticks:void 0,type:"category",unit:void 0},ey=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?eq:XF,ty=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?tq:ZF,ah=e=>e.polarOptions,ry=V([ys,vs,Nt],m5),OP=V([ah,ry],(e,t)=>{if(e!=null)return Sn(e.innerRadius,t,0)}),DP=V([ah,ry],(e,t)=>{if(e!=null)return Sn(e.outerRadius,t,t*.8)}),rq=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},MP=V([ah],rq);V([ey,MP],ih);var IP=V([ry,OP,DP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});V([ty,IP],ih);var nq=V([Te,ah,OP,DP,ys,vs],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Sn(o,s,s/2),cy:Sn(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),kt=(e,t)=>t,oh=(e,t,r)=>r;function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sq(e,t,r){return(t=iq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iq(e){var t=aq(e,"string");return typeof t=="symbol"?t:t+""}function aq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xg=[0,"auto"],_r={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},js=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??_r},Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:xg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kf},mi=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Nr},oq={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ny=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??oq},jr=(e,t,r)=>{switch(t){case"xAxis":return js(e,r);case"yAxis":return mi(e,r);case"zAxis":return ny(e,r);case"angleAxis":return ey(e,r);case"radiusAxis":return ty(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lq=(e,t,r)=>{switch(t){case"xAxis":return js(e,r);case"yAxis":return mi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kc=(e,t,r)=>{switch(t){case"xAxis":return js(e,r);case"yAxis":return mi(e,r);case"angleAxis":return ey(e,r);case"radiusAxis":return ty(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$P=e=>e.graphicalItems.countOfBars>0;function zP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lh=e=>e.graphicalItems.cartesianItems,cq=V([kt,oh],zP),LP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Pc=V([lh,jr,cq],LP),RP=e=>e.filter(t=>t.stackId===void 0),uq=V([Pc],RP),FP=e=>e.map(t=>t.data).filter(Boolean).flat(1),dq=V([Pc],FP),qP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},ch=V([dq,Hx],qP),UP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ht(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ht(s,n)}))):e.map(n=>({value:n})),uh=V([ch,jr,Pc],UP);function BP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ua(e){return e.filter(t=>qn(t)||t instanceof Date).map(Number).filter(t=>Dr(t)===!1)}function fq(e,t,r){return!r||typeof t!="number"||Dr(t)?[]:r.length?ua(r.flatMap(n=>{var s=Ht(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!zr(i)||!zr(o)))return[t-i,t+o]})):[]}var QP=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(u=>u.dataKey);return[o,{stackedData:A5(e,c,r),graphicalItems:l}]}))},yg=V([ch,Pc,sh],QP),VP=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=M5(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},hq=V([yg,ca,kt],VP),WP=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>BP(n,d)),u=Ht(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:fq(s,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ht(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),mq=V(ch,jr,uq,kt,WP);function pq(e){var{value:t}=e;if(qn(t)||t instanceof Date)return t}var gq=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ua(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xq=(e,t,r)=>{var n=e.map(pq).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&QS(n))?M2(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},sy=e=>{var t;if(e==null||!("domain"in e))return xg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ua(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:xg},iy=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},KP=e=>e.referenceElements.dots,To=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),yq=V([KP,kt,oh],To),HP=e=>e.referenceElements.areas,vq=V([HP,kt,oh],To),GP=e=>e.referenceElements.lines,bq=V([GP,kt,oh],To),YP=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wq=V(yq,kt,YP),JP=(e,t)=>{var r=ua(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},jq=V([vq,kt],JP),XP=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_q=V(bq,kt,XP),Nq=V(wq,_q,jq,(e,t,r)=>iy(e,r,t)),Sq=V([jr],sy),ZP=(e,t,r,n,s)=>{var i=zF(t,e.allowDataOverflow);return i??LF(t,iy(r,s,gq(n)),e.allowDataOverflow)},kq=V([jr,Sq,hq,mq,Nq],ZP),Pq=[0,1],eE=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,u=di(t,i);return u&&l==null?M2(0,r.length):c==="category"?xq(n,e,u):s==="expand"?Pq:o}},ay=V([jr,Te,ch,uh,sh,kt,kq],eE),tE=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(bc(i));return l in ul?l:"point"}}},Ec=V([jr,Te,$P,Jx,kt],tE);function Eq(e){if(e!=null){if(e in ul)return ul[e]();var t="scale".concat(bc(e));if(t in ul)return ul[t]()}}function oy(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=Eq(t);if(s!=null){var i=s.domain(r).range(n);return S5(i),i}}}var rE=(e,t,r)=>{var n=sy(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xo(e))return HF(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xo(e))return GF(e,t.tickCount,t.allowDecimals)}},ly=V([ay,kc,Ec],rE),nE=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},Cq=V([jr,ay,ly,kt],nE),Aq=V(uh,jr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ua(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),sE=V(Aq,Te,AP,Nt,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!zr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Sn(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),Tq=(e,t)=>{var r=js(e,t);return r==null||typeof r.padding!="string"?0:sE(e,"xAxis",t,r.padding)},Oq=(e,t)=>{var r=mi(e,t);return r==null||typeof r.padding!="string"?0:sE(e,"yAxis",t,r.padding)},Dq=V(js,Tq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),Mq=V(mi,Oq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),Iq=V([Nt,Dq,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),$q=V([Nt,Te,Mq,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Cc=(e,t,r,n)=>{var s;switch(t){case"xAxis":return Iq(e,r,n);case"yAxis":return $q(e,r,n);case"zAxis":return(s=ny(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return MP(e);case"radiusAxis":return IP(e,r);default:return}},iE=V([jr,Cc],ih),Oo=V([jr,Ec,Cq,iE],oy);V(Pc,kt,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>BP(t,r)));function aE(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dh=(e,t)=>t,fh=(e,t,r)=>r,zq=V(wx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(aE)),Lq=V(jx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(aE)),oE=(e,t)=>({width:e.width,height:t.height}),Rq=(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}},lE=V(Nt,js,oE),Fq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},qq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Uq=V(vs,Nt,zq,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=oE(t,l);o==null&&(o=Fq(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),Bq=V(ys,Nt,Lq,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=Rq(t,l);o==null&&(o=qq(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),Qq=(e,t)=>{var r=Nt(e),n=js(e,t);if(n!=null){var s=Uq(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Vq=(e,t)=>{var r=Nt(e),n=mi(e,t);if(n!=null){var s=Bq(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},cE=V(Nt,mi,(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}}),pj=(e,t,r)=>{switch(t){case"xAxis":return lE(e,r).width;case"yAxis":return cE(e,r).height;default:return}},uE=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=di(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&QS(c))return c}},cy=V([Te,uh,jr,kt],uE),dE=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=di(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},uy=V([Te,uh,kc,kt],dE),gj=V([Te,lq,Ec,Oo,cy,uy,Cc,ly,kt],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var u=di(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),Wq=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=di(e,c),{type:d,ticks:f,tickCount:h}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/m:0;p=c==="angleAxis"&&i!=null&&i.length>=2?pr(i[0]-i[1])*2*p:p;var x=f||s;if(x){var y=x.map((v,g)=>{var w=o?o.indexOf(v):v;return{index:g,coordinate:n(w)+p,value:v,offset:p}});return y.filter(v=>!Dr(v.coordinate))}return u&&l?l.map((v,g)=>({coordinate:n(v)+p,value:v,index:g,offset:p})):n.ticks?n.ticks(h).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,g)=>({coordinate:n(v)+p,value:o?o[v]:v,index:g,offset:p}))}},fE=V([Te,kc,Ec,Oo,ly,Cc,cy,uy,kt],Wq),Kq=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=di(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?pr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},ni=V([Te,kc,Oo,Cc,cy,uy,kt],Kq),Bn=V(jr,Oo,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})}),Hq=V([jr,Ec,ay,iE],oy);V((e,t,r)=>ny(e,r),Hq,(e,t)=>{if(!(e==null||t==null))return Id(Id({},e),{},{scale:t})});var Gq=V([Te,wx,jx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),hE=e=>e.options.defaultTooltipEventType,mE=e=>e.options.validateTooltipEventTypes;function pE(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function dy(e,t){var r=hE(e),n=mE(e);return pE(t,r,n)}function Yq(e){return de(t=>dy(t,e))}var gE=(e,t)=>{var r,n=Number(t);if(!(Dr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Jq=e=>e.tooltip.settings,Ls={active:!1,index:null,dataKey:void 0,coordinate:void 0},Xq={itemInteraction:{click:Ls,hover:Ls},axisInteraction:{click:Ls,hover:Ls},keyboardInteraction:Ls,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},xE=on({name:"tooltip",initialState:Xq,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=is(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Zq,removeTooltipEntrySettings:e8,setTooltipSettingsState:t8,setActiveMouseOverItemIndex:yE,mouseLeaveItem:r8,mouseLeaveChart:vE,setActiveClickItemIndex:n8,setMouseOverAxisIndex:bE,setMouseClickAxisIndex:s8,setSyncInteraction:vg,setKeyboardInteraction:bg}=xE.actions,i8=xE.reducer;function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){a8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a8(e,t,r){return(t=o8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8(e){var t=l8(e,"string");return typeof t=="symbol"?t:t+""}function l8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c8(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function u8(e){return e.index!=null}var wE=(e,t,r,n)=>{if(t==null)return Ls;var s=c8(e,t,r);if(s==null)return Ls;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(u8(s)){if(i)return fu(fu({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return fu(fu({},Ls),{},{coordinate:s.coordinate})},fy=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!zr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},jE=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},_E=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Ac=e=>e.options.tooltipPayloadSearcher,Do=e=>e.tooltip;function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yj(Object(r),!0).forEach(function(n){d8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d8(e,t,r){return(t=f8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m8(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function p8(e,t){return e??t}var NE=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,m)=>{var p,{dataDefinedOnItem:x,settings:y}=m,v=p8(x,l),g=m8(v,u,d),w=(p=y==null?void 0:y.dataKey)!==null&&p!==void 0?p:n==null?void 0:n.dataKey,_=y==null?void 0:y.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(g)&&!Array.isArray(g[0])&&o==="axis"?j=VS(g,n.dataKey,s):j=i(g,t,c,_),Array.isArray(j))j.forEach(S=>{var k=vj(vj({},y),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});h.push(uw({tooltipEntrySettings:k,dataKey:S.dataKey,payload:S.payload,value:Ht(S.payload,S.dataKey),name:S.name}))});else{var N;h.push(uw({tooltipEntrySettings:y,dataKey:w,payload:j,value:Ht(j,w),name:(N=Ht(j,_))!==null&&N!==void 0?N:y==null?void 0:y.name}))}return h},f)}},Pt=e=>{var t=Te(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Mo=e=>e.tooltip.settings.axisId,Ft=e=>{var t=Pt(e),r=Mo(e);return kc(e,t,r)},hy=V([Ft,Te,$P,Jx,Pt],tE),g8=V([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),x8=V([Pt,Mo],zP),hh=V([g8,Ft,x8],LP),y8=V([hh],FP),da=V([y8,ca],qP),my=V([da,Ft,hh],UP),v8=V([Ft],sy),b8=V([da,hh,sh],QP),w8=V([b8,ca,Pt],VP),j8=V([hh],RP),_8=V([da,Ft,j8,Pt],WP),N8=V([KP,Pt,Mo],To),S8=V([N8,Pt],YP),k8=V([HP,Pt,Mo],To),P8=V([k8,Pt],JP),E8=V([GP,Pt,Mo],To),C8=V([E8,Pt],XP),A8=V([S8,C8,P8],iy),T8=V([Ft,v8,w8,_8,A8],ZP),SE=V([Ft,Te,da,my,sh,Pt,T8],eE),O8=V([SE,Ft,hy],rE),D8=V([Ft,SE,O8,Pt],nE),kE=e=>{var t=Pt(e),r=Mo(e),n=!1;return Cc(e,t,r,n)},PE=V([Ft,kE],ih),EE=V([Ft,hy,D8,PE],oy),M8=V([Te,my,Ft,Pt],uE),I8=V([Te,my,Ft,Pt],dE),$8=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=di(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?pr(s[0]-s[1])*2*f:f,u&&o?o.map((h,m)=>({coordinate:n(h)+f,value:h,index:m,offset:f})):n.domain().map((h,m)=>({coordinate:n(h)+f,value:i?i[h]:h,index:m,offset:f}))}}},_s=V([Te,Ft,hy,EE,kE,M8,I8,Pt],$8),py=V([hE,mE,Jq],(e,t,r)=>pE(r.shared,e,t)),CE=e=>e.tooltip.settings.trigger,gy=e=>e.tooltip.settings.defaultIndex,mh=V([Do,py,CE,gy],wE),ta=V([mh,da],fy),AE=V([_s,ta],gE),TE=V([mh],e=>{if(e)return e.dataKey}),OE=V([Do,py,CE,gy],_E),z8=V([ys,vs,Te,Nt,_s,gy,OE,Ac],jE),L8=V([mh,z8],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),R8=V([mh],e=>e.active),F8=V([OE,ta,ca,Ft,AE,Ac,py],NE),q8=V([F8],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){U8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U8(e,t,r){return(t=B8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B8(e){var t=Q8(e,"string");return typeof t=="symbol"?t:t+""}function Q8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V8=()=>de(Ft),W8=()=>{var e=V8(),t=de(_s),r=de(EE);return Zl(wj(wj({},e),{},{scale:r}),t)},K8=()=>de(Jx),xy=(e,t)=>t,DE=(e,t,r)=>r,yy=(e,t,r,n)=>n,H8=V(_s,e=>Rf(e,t=>t.coordinate)),vy=V([Do,xy,DE,yy],wE),ME=V([vy,da],fy),G8=(e,t,r)=>{if(t!=null){var n=Do(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},IE=V([Do,xy,DE,yy],_E),$d=V([ys,vs,Te,Nt,_s,yy,IE,Ac],jE),Y8=V([vy,$d],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),$E=V(_s,ME,gE),J8=V([IE,ME,ca,Ft,$E,Ac,xy],NE),X8=V([vy],e=>({isActive:e.active,activeIndex:e.index})),Z8=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=I5(e.chartX,e.chartY,t,r,l);if(c){var u=z5(c,t),d=_5(u,o,i,n,s),f=$5(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wg.apply(null,arguments)}function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){eU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eU(e,t,r){return(t=tU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tU(e){var t=rU(e,"string");return typeof t=="symbol"?t:t+""}function rU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nU(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,p;if(u==="ScatterChart")m=d,p=Nz;else if(u==="BarChart")m=Sz(o,d,s,i),p=P2;else if(o==="radial"){var{cx:x,cy:y,radius:v,startAngle:g,endAngle:w}=E2(d);m={cx:x,cy:y,startAngle:g,endAngle:w,innerRadius:v,outerRadius:v},p=A2}else m={points:aL(o,d,s)},p=v2;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=hu(hu(hu(hu({stroke:"#ccc",pointerEvents:"none"},s),m),Pe(l,!1)),{},{payload:f,payloadIndex:h,className:we("recharts-tooltip-cursor",_)});return b.isValidElement(l)?b.cloneElement(l,j):b.createElement(p,j)}function sU(e){var t=W8(),r=m2(),n=Yf(),s=K8();return b.createElement(nU,wg({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var zE=b.createContext(null),iU=()=>b.useContext(zE),LE={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,f||c,h),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],m]:c._events[p].push(m):(c._events[p]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,p=new Array(m);h<m;h++)p[h]=f[h].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,p){var x=r?r+u:u;if(!this._events[x])return!1;var y=this._events[x],v=arguments.length,g,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,p),!0}for(w=1,g=new Array(v-1);w<v;w++)g[w-1]=arguments[w];y.fn.apply(y.context,g)}else{var _=y.length,j;for(w=0;w<_;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),v){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!g)for(j=1,g=new Array(v-1);j<v;j++)g[j-1]=arguments[j];y[w].fn.apply(y[w].context,g)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===d&&(!h||p.once)&&(!f||p.context===f)&&o(this,m);else{for(var x=0,y=[],v=p.length;x<v;x++)(p[x].fn!==d||h&&!p[x].once||f&&p[x].context!==f)&&y.push(p[x]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(LE);var aU=LE.exports;const oU=Qn(aU);var ac=new oU,jg="recharts.syncEvent.tooltip",_j="recharts.syncEvent.brush";function RE(e,t){if(t){var r=Number.parseInt(t,10);if(!Dr(r))return e==null?void 0:e[r]}}var lU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},FE=on({name:"options",initialState:lU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cU=FE.reducer,{createEventEmitter:uU}=FE.actions;function dU(e){return e.tooltip.syncInteraction}var fU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},qE=on({name:"chartData",initialState:fU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Nj,setDataStartEndIndexes:hU,setComputedData:AK}=qE.actions,mU=qE.reducer,UE=()=>{};function pU(){var e=de(Xx),t=de(Zx),r=xt(),n=de(TP),s=de(_s),i=Yf(),o=_x(),l=de(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return UE;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(s!=null){var h;if(typeof n=="function"){var m={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(s,m);h=s[p]}else n==="value"&&(h=s.find(N=>String(N.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||o==null){r(vg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:y,y:v}=x,g=Math.min(y,o.x+o.width),w=Math.min(v,o.y+o.height),_={x:i==="horizontal"?h.coordinate:g,y:i==="horizontal"?w:h.coordinate},j=vg({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(j)}}};return ac.on(jg,c),()=>{ac.off(jg,c)}},[l,r,t,e,n,s,i,o])}function gU(){var e=de(Xx),t=de(Zx),r=xt();b.useEffect(()=>{if(e==null)return UE;var n=(s,i,o)=>{t!==o&&e===s&&r(hU(i))};return ac.on(_j,n),()=>{ac.off(_j,n)}},[r,t,e])}function xU(){var e=xt();b.useEffect(()=>{e(uU())},[e]),pU(),gU()}function yU(e,t,r,n,s,i){var o=de(h=>G8(h,e,t)),l=de(Zx),c=de(Xx),u=de(TP),d=de(dU),f=d==null?void 0:d.active;b.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=vg({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ac.emit(jg,c,h,l)}},[f,r,o,s,n,l,c,u,i])}function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){vU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vU(e,t,r){return(t=bU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bU(e){var t=wU(e,"string");return typeof t=="symbol"?t:t+""}function wU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jU(e){return e.dataKey}function _U(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(rz,t)}var Pj=[],NU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Po.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function _g(e){var t=bs(e,NU),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:m,wrapperStyle:p,cursor:x,shared:y,trigger:v,defaultIndex:g,portal:w,axisId:_}=t,j=xt(),N=typeof g=="number"?String(g):g;b.useEffect(()=>{j(t8({shared:y,trigger:v,axisId:_,active:r,defaultIndex:N}))},[j,y,v,_,r,N]);var S=_x(),k=y2(),E=Yq(y),{activeIndex:P,isActive:D}=de(Y=>X8(Y,E,v,N)),O=de(Y=>J8(Y,E,v,N)),z=de(Y=>$E(Y,E,v,N)),R=de(Y=>Y8(Y,E,v,N)),B=O,F=iU(),I=r??D,[C,T]=f3([B,I]),A=E==="axis"?z:void 0;yU(E,v,R,A,P,I);var L=w??F;if(L==null)return null;var q=B??Pj;I||(q=Pj),l&&q.length&&(q=A$(B.filter(Y=>Y.value!=null&&(Y.hide!==!0||t.includeHidden)),d,jU));var ee=q.length>0,ne=b.createElement(cz,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:I,coordinate:R,hasPayload:ee,offset:u,position:f,reverseDirection:h,useTranslate3d:m,viewBox:S,wrapperStyle:p,lastBoundingBox:C,innerRef:T,hasPortalFromProps:!!w},_U(o,kj(kj({},t),{},{payload:q,label:A,active:I,coordinate:R,accessibilityLayer:k})));return b.createElement(b.Fragment,null,EN.createPortal(ne,L),I&&b.createElement(sU,{cursor:x,tooltipEventType:E,coordinate:R,payload:B,index:P}))}var BE={},QE={},VE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},p=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{p(),o=void 0,l=null},y=()=>{d()},v=function(...g){if(s!=null&&s.aborted)return;o=this,l=g;const w=h==null;m(),c&&w&&d()};return v.schedule=m,v.cancel=x,v.flush=y,s==null||s.addEventListener("abort",x,{once:!0}),v}e.debounce=t})(VE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VE;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},s,{edges:u}),m=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},p=()=>(h.flush(),d);return m.cancel=h.cancel,m.flush=p,m}e.debounce=r})(QE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QE;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(BE);var SU=BE.throttle;const kU=Qn(SU);var kl=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ng=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:m,style:p={}}=e,x=b.useRef(null),y=b.useRef();y.current=m,b.useImperativeHandle(t,()=>x.current);var[v,g]=b.useState({containerWidth:n.width,containerHeight:n.height}),w=b.useCallback((j,N)=>{g(S=>{var k=Math.round(j),E=Math.round(N);return S.containerWidth===k&&S.containerHeight===E?S:{containerWidth:k,containerHeight:E}})},[]);b.useEffect(()=>{var j=E=>{var P,{width:D,height:O}=E[0].contentRect;w(D,O),(P=y.current)===null||P===void 0||P.call(y,D,O)};d>0&&(j=kU(j,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(j),{width:S,height:k}=x.current.getBoundingClientRect();return w(S,k),N.observe(x.current),()=>{N.disconnect()}},[w,d]);var _=b.useMemo(()=>{var{containerWidth:j,containerHeight:N}=v;if(j<0||N<0)return null;kl(Ci(s)||Ci(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var S=Ci(s)?j:s,k=Ci(i)?N:i;return r&&r>0&&(S?k=S/r:k&&(S=k*r),c&&k>c&&(k=c)),kl(S>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,k,s,i,o,l,r),b.Children.map(u,E=>b.cloneElement(E,{width:S,height:k,style:jm({width:S,height:k},E.props.style)}))},[r,u,i,c,l,o,v,s]);return b.createElement("div",{id:f?"".concat(f):void 0,className:we("recharts-responsive-container",h),style:jm(jm({},p),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),WE=e=>null;WE.displayName="Cell";function Cj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cj(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AU(e,t,r){return(t=TU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ba={widthCache:{},cacheCount:0},DU=2e3,MU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Aj="recharts_measurement_span";function IU(e){var t=Sg({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Pl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Po.isSsr)return{width:0,height:0};var n=IU(r),s=JSON.stringify({text:t,copyStyle:n});if(ba.widthCache[s])return ba.widthCache[s];try{var i=document.getElementById(Aj);i||(i=document.createElement("span"),i.setAttribute("id",Aj),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Sg(Sg({},MU),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ba.widthCache[s]=c,++ba.cacheCount>DU&&(ba.cacheCount=0,ba.widthCache={}),c}catch{return{width:0,height:0}}},Tj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Oj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$U=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,KE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LU=Object.keys(KE),Ia="NaN";function RU(e,t){return e*KE[t]}class ur{static parse(t){var r,[,n,s]=(r=zU.exec(t))!==null&&r!==void 0?r:[];return new ur(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Dr(t)&&(this.unit=""),r!==""&&!$U.test(r)&&(this.num=NaN,this.unit=""),LU.includes(r)&&(this.num=RU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Dr(this.num)}}function HE(e){if(e.includes(Ia))return Ia;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Tj.exec(t))!==null&&r!==void 0?r:[],o=ur.parse(n??""),l=ur.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Ia;t=t.replace(Tj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=Oj.exec(t))!==null&&u!==void 0?u:[],m=ur.parse(d??""),p=ur.parse(h??""),x=f==="+"?m.add(p):m.subtract(p);if(x.isNaN())return Ia;t=t.replace(Oj,x.toString())}return t}var Dj=/\(([^()]*)\)/;function FU(e){for(var t=e,r;(r=Dj.exec(t))!=null;){var[,n]=r;t=t.replace(Dj,HE(n))}return t}function qU(e){var t=e.replace(/\s+/g,"");return t=FU(t),t=HE(t),t}function UU(e){try{return qU(e)}catch{return Ia}}function _m(e){var t=UU(e.slice(5,-1));return t===Ia?"":t}var BU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],QU=["dx","dy","angle","className","breakAll"];function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kg.apply(null,arguments)}function Mj(e,t){if(e==null)return{};var r,n,s=VU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GE=/[ \f\n\r\t\v\u2028\u2029]+/,YE=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];$e(t)||(r?s=t.toString().split(""):s=t.toString().split(GE));var i=s.map(l=>({word:l,width:Pl(l,n).width})),o=r?0:Pl("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},WU=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=le(i),d=o,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((O,z)=>{var{word:R,width:B}=z,F=O[O.length-1];if(F&&(n==null||s||F.width+B+r<Number(n)))F.words.push(R),F.width+=B+r;else{var I={words:[R],width:B};O.push(I)}return O},[])},h=f(t),m=P=>P.reduce((D,O)=>D.width>O.width?D:O);if(!u||s)return h;var p=h.length>i||m(h).width>Number(n);if(!p)return h;for(var x="",y=P=>{var D=d.slice(0,P),O=YE({breakAll:c,style:l,children:D+x}).wordsWithComputedWidth,z=f(O),R=z.length>i||m(z).width>Number(n);return[R,z]},v=0,g=d.length-1,w=0,_;v<=g&&w<=d.length-1;){var j=Math.floor((v+g)/2),N=j-1,[S,k]=y(N),[E]=y(j);if(!S&&!E&&(v=j+1),S&&E&&(g=j-1),!S&&E){_=k;break}w++}return _||h},Ij=e=>{var t=$e(e)?[]:e.toString().split(GE);return[{words:t}]},KU=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Po.isSsr){var l,c,u=YE({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Ij(n);return WU({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return Ij(n)},$j="#808080",by=b.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=$j}=e,d=Mj(e,BU),f=b.useMemo(()=>KU({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:m,angle:p,className:x,breakAll:y}=d,v=Mj(d,QU);if(!qn(r)||!qn(n))return null;var g=r+(le(h)?h:0),w=n+(le(m)?m:0),_;switch(c){case"start":_=_m("calc(".concat(i,")"));break;case"middle":_=_m("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:_=_m("calc(".concat(f.length-1," * -").concat(s,")"));break}var j=[];if(o){var N=f[0].width,{width:S}=d;j.push("scale(".concat(le(S)?S/N:1,")"))}return p&&j.push("rotate(".concat(p,", ").concat(g,", ").concat(w,")")),j.length&&(v.transform=j.join(" ")),b.createElement("text",kg({},Pe(v,!0),{ref:t,x:g,y:w,className:we("recharts-text",x),textAnchor:l,fill:u.includes("url")?$j:u}),f.map((k,E)=>{var P=k.words.join(y?"":" ");return b.createElement("tspan",{x:g,dy:E===0?_:s,key:"".concat(P,"-").concat(E)},P)}))});by.displayName="Text";var HU=["offset"],GU=["labelRef"];function zj(e,t){if(e==null)return{};var r,n,s=YU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lj(Object(r),!0).forEach(function(n){JU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JU(e,t,r){return(t=XU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xn.apply(null,arguments)}var eB=e=>{var{value:t,formatter:r}=e,n=$e(e.children)?t:e.children;return typeof r=="function"?r(n):n},wy=e=>e!=null&&typeof e=="function",tB=(e,t)=>{var r=pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},rB=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:m}=s,p=(u+d)/2,x=tB(f,h),y=x>=0?1:-1,v,g;n==="insideStart"?(v=f+y*i,g=m):n==="insideEnd"?(v=h-y*i,g=!m):n==="end"&&(v=h+y*i,g=m),g=x<=0?g:!g;var w=It(l,c,p,v),_=It(l,c,p,v+(g?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(g?0:1,`,
    `).concat(_.x,",").concat(_.y),N=$e(e.id)?co("recharts-radial-line-"):e.id;return b.createElement("text",Xn({},r,{dominantBaseline:"central",className:we("recharts-radial-bar-label",o)}),b.createElement("defs",null,b.createElement("path",{id:N,d:j})),b.createElement("textPath",{xlinkHref:"#".concat(N)},t))},nB=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:h}=It(s,i,l+r,d);return{x:f,y:h,textAnchor:f>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(o+l)/2,{x:p,y:x}=It(s,i,m,d);return{x:p,y:x,textAnchor:"middle",verticalAnchor:"middle"}},sB=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",m=l>=0?1:-1,p=m*n,x=m>0?"end":"start",y=m>0?"start":"end";if(s==="top"){var v={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return ot(ot({},v),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var g={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return ot(ot({},g),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return ot(ot({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var _={x:i+l+p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return ot(ot({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return s==="insideLeft"?ot({x:i+p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},j):s==="insideRight"?ot({x:i+l-p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):s==="insideTop"?ot({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},j):s==="insideBottom"?ot({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):s==="insideTopLeft"?ot({x:i+p,y:o+d,textAnchor:y,verticalAnchor:h},j):s==="insideTopRight"?ot({x:i+l-p,y:o+d,textAnchor:x,verticalAnchor:h},j):s==="insideBottomLeft"?ot({x:i+p,y:o+c-d,textAnchor:y,verticalAnchor:f},j):s==="insideBottomRight"?ot({x:i+l-p,y:o+c-d,textAnchor:x,verticalAnchor:f},j):s&&typeof s=="object"&&(le(s.x)||Ci(s.x))&&(le(s.y)||Ci(s.y))?ot({x:i+Sn(s.x,l),y:o+Sn(s.y,c),textAnchor:"end",verticalAnchor:"end"},j):ot({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},iB=e=>"cx"in e&&le(e.cx);function Pr(e){var{offset:t=5}=e,r=zj(e,HU),n=ot({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=_x(),m=s||h;if(!m||$e(o)&&$e(l)&&!b.isValidElement(c)&&typeof c!="function")return null;if(b.isValidElement(c)){var p=zj(n,GU);return b.cloneElement(c,p)}var x;if(typeof c=="function"){if(x=b.createElement(c,n),b.isValidElement(x))return x}else x=eB(n);var y=iB(m),v=Pe(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return rB(n,x,v);var g=y?nB(n):sB(n,m);return b.createElement(by,Xn({ref:f,className:we("recharts-label",u)},v,g,{breakAll:d}),x)}Pr.displayName="Label";var JE=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:m,width:p,height:x,clockWise:y,labelViewBox:v}=e;if(v)return v;if(le(p)&&le(x)){if(le(d)&&le(f))return{x:d,y:f,width:p,height:x};if(le(h)&&le(m))return{x:h,y:m,width:p,height:x}}if(le(d)&&le(f))return{x:d,y:f,width:0,height:0};if(le(t)&&le(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:y};if(e.viewBox)return e.viewBox},aB=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(Pr,Xn({key:"label-implicit"},n)):qn(e)?b.createElement(Pr,Xn({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===Pr?b.cloneElement(e,ot({key:"label-implicit"},n)):b.createElement(Pr,Xn({key:"label-implicit",content:e},n)):wy(e)?b.createElement(Pr,Xn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(Pr,Xn({},e,{key:"label-implicit"},n)):null},oB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=JE(t),l=rx(s,Pr).map((u,d)=>b.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=aB(t.label,r||o,i);return[c,...l]};Pr.parseViewBox=JE;Pr.renderCallByParent=oB;var XE={},ZE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ZE);var eC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(eC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZE,r=eC,n=Mf;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(XE);var lB=XE.last;const cB=Qn(lB);var uB=["valueAccessor"],dB=["data","dataKey","clockWise","id","textBreakAll"];function zd(){return zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zd.apply(null,arguments)}function Rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rj(Object(r),!0).forEach(function(n){fB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fB(e,t,r){return(t=hB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qj(e,t){if(e==null)return{};var r,n,s=pB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gB=e=>Array.isArray(e.value)?cB(e.value):e.value;function ei(e){var{valueAccessor:t=gB}=e,r=qj(e,uB),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=qj(r,dB);return!n||!n.length?null:b.createElement(Mr,{className:"recharts-label-list"},n.map((u,d)=>{var f=$e(s)?t(u,d):Ht(u&&u.payload,s),h=$e(o)?{}:{id:"".concat(o,"-").concat(d)};return b.createElement(Pr,zd({},Pe(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Pr.parseViewBox($e(i)?u:Fj(Fj({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ei.displayName="LabelList";function xB(e,t){return e?e===!0?b.createElement(ei,{key:"labelList-implicit",data:t}):b.isValidElement(e)||wy(e)?b.createElement(ei,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?b.createElement(ei,zd({data:t},e,{key:"labelList-implicit"})):null:null}function yB(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=rx(n,ei).map((o,l)=>b.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=xB(e.label,t);return[i,...s]}ei.renderCallByParent=yB;function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pg.apply(null,arguments)}var tC=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=we("recharts-dot",s);return t===+t&&r===+r&&n===+n?b.createElement("circle",Pg({},Pe(e,!1),ex(e),{className:i,cx:t,cy:r,r:n})):null},vB={radiusAxis:{},angleAxis:{}},bB=on({name:"polarAxis",initialState:vB,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),wB=bB.reducer,jB={countOfBars:0,cartesianItems:[],polarItems:[]},rC=on({name:"graphicalItems",initialState:jB,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=is(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=is(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=is(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:_B,removeBar:NB,addCartesianGraphicalItem:SB,replaceCartesianGraphicalItem:kB,removeCartesianGraphicalItem:PB,addPolarGraphicalItem:TK,removePolarGraphicalItem:OK}=rC.actions,EB=rC.reducer;function Uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(r),!0).forEach(function(n){CB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CB(e,t,r){return(t=AB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AB(e){var t=TB(e,"string");return typeof t=="symbol"?t:t+""}function TB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OB(e){var t=xt(),r=b.useRef(null);return b.useEffect(()=>{var n=Bj(Bj({},e),{},{stackId:d2(e.stackId)});r.current===null?t(SB(n)):r.current!==n&&t(kB({prev:r.current,next:n})),r.current=n},[t,e]),b.useEffect(()=>()=>{r.current&&(t(PB(r.current)),r.current=null)},[t]),null}var nC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(nC);var DB=nC.isPlainObject;const MB=Qn(DB);function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(null,arguments)}var Qj=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},IB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$B=e=>{var t=bs(e,IB),r=b.useRef(),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:m,isUpdateAnimationActive:p}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var x=we("recharts-trapezoid",d);return p?b.createElement(Zi,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:h,animationEasing:f,isActive:p},y=>{var{upperWidth:v,lowerWidth:g,height:w,x:_,y:j}=y;return b.createElement(Zi,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:h,easing:f},b.createElement("path",Ld({},Pe(t,!0),{className:x,d:Qj(_,j,v,g,w),ref:r})))}):b.createElement("g",null,b.createElement("path",Ld({},Pe(t,!0),{className:x,d:Qj(i,o,l,c,u)})))},zB=["option","shapeType","propTransformer","activeClassName","isActive"];function LB(e,t){if(e==null)return{};var r,n,s=RB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){FB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FB(e,t,r){return(t=qB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qB(e){var t=UB(e,"string");return typeof t=="symbol"?t:t+""}function UB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BB(e,t){return Rd(Rd({},t),e)}function QB(e,t){return e==="symbols"}function Wj(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(P2,r);case"trapezoid":return b.createElement($B,r);case"sector":return b.createElement(A2,r);case"symbols":if(QB(t))return b.createElement(fk,r);break;default:return null}}function VB(e){return b.isValidElement(e)?e.props:e}function WB(e){var{option:t,shapeType:r,propTransformer:n=BB,activeClassName:s="recharts-active-shape",isActive:i}=e,o=LB(e,zB),l;if(b.isValidElement(t))l=b.cloneElement(t,Rd(Rd({},o),VB(t)));else if(typeof t=="function")l=t(o);else if(MB(t)&&typeof t!="boolean"){var c=n(t,o);l=b.createElement(Wj,{shapeType:r,elementProps:c})}else{var u=o;l=b.createElement(Wj,{shapeType:r,elementProps:u})}return i?b.createElement(Mr,{className:s},l):l}var sC=(e,t)=>{var r=xt();return(n,s)=>i=>{e==null||e(n,s,i),r(yE({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},iC=e=>{var t=xt();return(r,n)=>s=>{e==null||e(r,n,s),t(r8())}},aC=(e,t)=>{var r=xt();return(n,s)=>i=>{e==null||e(n,s,i),r(n8({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function oC(e){var{fn:t,args:r}=e,n=xt(),s=or();return b.useEffect(()=>{if(!s){var i=t(r);return n(Zq(i)),()=>{n(e8(i))}}},[t,r,n,s]),null}var KB=()=>{};function lC(e){var{legendPayload:t}=e,r=xt(),n=or();return b.useEffect(()=>n?KB:(r(G5(t)),()=>{r(Y5(t))}),[r,n,t]),null}function cC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(co(t)),n=b.useRef(e);return n.current!==e&&(r.current=co(t),n.current=e),r.current}var HB=V([Nt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),GB=V([HB,ys,vs],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),YB=e=>{var t=or();return de(r=>Bn(r,"xAxis",e,t))},JB=e=>{var t=or();return de(r=>Bn(r,"yAxis",e,t))},jy=()=>de(GB),XB=()=>de(q8);function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(n){ZB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZB(e,t,r){return(t=e9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e9(e){var t=t9(e,"string");return typeof t=="symbol"?t:t+""}function t9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r9=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=Hj(Hj({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Pe(s,!1)),ex(s)),l;return b.isValidElement(s)?l=b.cloneElement(s,o):typeof s=="function"?l=s(o):l=b.createElement(tC,o),b.createElement(Mr,{className:"recharts-active-dot"},l)};function n9(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=de(ta),o=XB();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return $e(l)?null:r9({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var s9=()=>{var e=xt();return b.useEffect(()=>(e(_B()),()=>{e(NB())})),null},i9=["children"];function a9(e,t){if(e==null)return{};var r,n,s=o9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function o9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gj=()=>{},uC=b.createContext({addErrorBar:Gj,removeErrorBar:Gj}),l9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},dC=b.createContext(l9);function fC(e){var{children:t}=e,r=a9(e,i9);return b.createElement(dC.Provider,{value:r},t)}var c9=()=>b.useContext(dC),hC=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[f,h]=b.useState([]),m=b.useCallback(y=>{h(v=>[...v,y])},[h]),p=b.useCallback(y=>{h(v=>v.filter(g=>g!==y))},[h]),x=or();return b.createElement(uC.Provider,{value:{addErrorBar:m,removeErrorBar:p}},b.createElement(OB,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:f,stackId:l,hide:c,barSize:d,isPanorama:x}),t)};function u9(e){var{addErrorBar:t,removeErrorBar:r}=b.useContext(uC);return b.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var d9=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function mC(e,t,r){return(t=f9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f9(e){var t=h9(e,"string");return typeof t=="symbol"?t:t+""}function h9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function m9(e,t){if(e==null)return{};var r,n,s=p9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function p9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function g9(e){var{direction:t,width:r,dataKey:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=m9(e,d9),u=Pe(c,!1),{data:d,dataPointFormatter:f,xAxisId:h,yAxisId:m,errorBarOffset:p}=c9(),x=YB(h),y=JB(m);if((x==null?void 0:x.scale)==null||(y==null?void 0:y.scale)==null||d==null||t==="x"&&x.type!=="number")return null;var v=d.map(g=>{var{x:w,y:_,value:j,errorVal:N}=f(g,n,t);if(!N)return null;var S=[],k,E;if(Array.isArray(N)?[k,E]=N:k=E=N,t==="x"){var{scale:P}=x,D=_+p,O=D+r,z=D-r,R=P(j-k),B=P(j+E);S.push({x1:B,y1:O,x2:B,y2:z}),S.push({x1:R,y1:D,x2:B,y2:D}),S.push({x1:R,y1:O,x2:R,y2:z})}else if(t==="y"){var{scale:F}=y,I=w+p,C=I-r,T=I+r,A=F(j-k),L=F(j+E);S.push({x1:C,y1:L,x2:T,y2:L}),S.push({x1:I,y1:A,x2:I,y2:L}),S.push({x1:C,y1:A,x2:T,y2:A})}var q="".concat(w+p,"px ").concat(_+p,"px");return b.createElement(Mr,oc({className:"recharts-errorBar",key:"bar-".concat(S.map(ee=>"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)))},u),S.map(ee=>{var ne=s?{transformOrigin:"".concat(ee.x1-5,"px")}:void 0;return b.createElement(Zi,{from:{transform:"scaleY(0)",transformOrigin:q},to:{transform:"scaleY(1)",transformOrigin:q},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2),style:{transformOrigin:q}},b.createElement("line",oc({},ee,{style:ne})))}))});return b.createElement(Mr,{className:"recharts-errorBars"},v)}var pC=b.createContext(void 0);function x9(e){var t=b.useContext(pC);return e??t??"x"}function gC(e){var{direction:t,children:r}=e;return b.createElement(pC.Provider,{value:t},r)}var xC={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function y9(e){var t=x9(e.direction),{width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o}=bs(e,xC);return b.createElement(b.Fragment,null,b.createElement(u9,{dataKey:e.dataKey,direction:t}),b.createElement(g9,oc({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o})))}class yC extends b.Component{render(){return b.createElement(y9,this.props)}}mC(yC,"defaultProps",xC);mC(yC,"displayName","ErrorBar");var v9="Invariant failed";function b9(e,t){throw new Error(v9)}var w9=["x","y"];function Eg(){return Eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eg.apply(null,arguments)}function Yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(r),!0).forEach(function(n){j9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j9(e,t,r){return(t=_9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(e,t){if(e==null)return{};var r,n,s=k9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function k9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function P9(e,t){var{x:r,y:n}=e,s=S9(e,w9),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),h=parseInt(f,10);return nl(nl(nl(nl(nl({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function vC(e){return b.createElement(WB,Eg({shapeType:"rectangle",propTransformer:P9,activeClassName:"recharts-active-bar"},e))}var E9=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(le(t))return t;var i=le(n)||$e(n);return i?t(n,s):(i||b9(),r)}};function _y(e,t){var r,n,s=de(u=>js(u,e)),i=de(u=>mi(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:_r.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Nr.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function bC(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=jy(),{needClipX:i,needClipY:o,needClip:l}=_y(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=s;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var C9=["onMouseEnter","onMouseLeave","onClick"],A9=["value","background","tooltipPosition"],T9=["onMouseEnter","onClick","onMouseLeave"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ph(e,t,r){return(t=O9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cg(e,t){if(e==null)return{};var r,n,s=M9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function M9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var I9=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function $9(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:Wf(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function z9(e){var t=de(ta),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Cg(i,C9),d=sC(o,n),f=iC(l),h=aC(c,n);if(!s||r==null)return null;var m=Pe(s,!1);return b.createElement(b.Fragment,null,r.map((p,x)=>{var{value:y,background:v,tooltipPosition:g}=p,w=Cg(p,A9);if(!v)return null;var _=d(p,x),j=f(p,x),N=h(p,x),S=Wt(Wt(Wt(Wt(Wt({option:s,isActive:String(x)===t},w),{},{fill:"#eee"},v),m),tx(u,p,x)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return b.createElement(vC,lc({key:"background-bar-".concat(x)},S))}))}function wC(e){var{data:t,props:r,showLabels:n}=e,s=Pe(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=de(ta),u=de(TE),{onMouseEnter:d,onClick:f,onMouseLeave:h}=r,m=Cg(r,T9),p=sC(d,o),x=iC(h),y=aC(f,o);return t?b.createElement(b.Fragment,null,t.map((v,g)=>{var w=l&&String(g)===c&&(u==null||o===u),_=w?l:i,j=Wt(Wt(Wt({},s),v),{},{isActive:w,option:_,index:g,dataKey:o});return b.createElement(Mr,lc({className:"recharts-bar-rectangle"},tx(m,v,g),{onMouseEnter:p(v,g),onMouseLeave:x(v,g),onClick:y(v,g),key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(g)}),b.createElement(vC,j))}),n&&ei.renderCallByParent(r,t)):null}function L9(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=cC(t,"recharts-bar-"),[m,p]=b.useState(!1),x=b.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),y=b.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return b.createElement(Zi,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:x,onAnimationStart:y,key:h},v=>{var{t:g}=v,w=g===1?n:n.map((_,j)=>{var N=f&&f[j];if(N){var S=pn(N.x,_.x),k=pn(N.y,_.y),E=pn(N.width,_.width),P=pn(N.height,_.height);return Wt(Wt({},_),{},{x:S(g),y:k(g),width:E(g),height:P(g)})}if(s==="horizontal"){var D=pn(0,_.height),O=D(g);return Wt(Wt({},_),{},{y:_.y+_.height-O,height:O})}var z=pn(0,_.width),R=z(g);return Wt(Wt({},_),{},{width:R})});return g>0&&(r.current=w),b.createElement(Mr,null,b.createElement(wC,{props:t,data:w,showLabels:!m}))})}function R9(e){var{data:t,isAnimationActive:r}=e,n=b.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?b.createElement(L9,{previousRectanglesRef:n,props:e}):b.createElement(wC,{props:e,data:t,showLabels:!0})}var jC=0,F9=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ht(e,t)}};class q9 extends b.PureComponent{constructor(){super(...arguments),ph(this,"id",co("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u,layout:d}=this.props;if(t)return null;var f=we("recharts-bar",s),h=$e(u)?this.id:u;return b.createElement(Mr,{className:f},l&&b.createElement("defs",null,b.createElement(bC,{clipPathId:h,xAxisId:i,yAxisId:o})),b.createElement(Mr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):null},b.createElement(z9,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(R9,this.props)),b.createElement(gC,{direction:d==="horizontal"?"y":"x"},this.props.children))}}var _C={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Po.isSsr,legendType:"rect",minPointSize:jC,xAxisId:0,yAxisId:0};function U9(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=bs(e,_C),{needClip:f}=_y(t,r),h=Yf(),m=or(),p=b.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:d2(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),x=rx(e.children,WE),y=de(w=>g7(w,t,r,m,p,x));if(h!=="vertical"&&h!=="horizontal")return null;var v,g=y==null?void 0:y[0];return g==null||g.height==null||g.width==null?v=0:v=h==="vertical"?g.height/2:g.width/2,b.createElement(fC,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:F9,errorBarOffset:v},b.createElement(q9,lc({},e,{layout:h,needClip:f,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function B9(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:m}=e,p=t==="horizontal"?l:o,x=d?p.scale.domain():null,y=T5({numericAxis:p});return f.map((v,g)=>{var w,_,j,N,S,k;d?w=k5(d[g],x):(w=Ht(v,r),Array.isArray(w)||(w=[y,w]));var E=E9(n,jC)(w[1],g);if(t==="horizontal"){var P,[D,O]=[l.scale(w[0]),l.scale(w[1])];_=ow({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:v,index:g}),j=(P=O??D)!==null&&P!==void 0?P:void 0,N=s.size;var z=D-O;if(S=Dr(z)?0:z,k={x:_,y:h.top,width:N,height:h.height},Math.abs(E)>0&&Math.abs(S)<Math.abs(E)){var R=pr(S||E)*(Math.abs(E)-Math.abs(S));j-=R,S+=R}}else{var[B,F]=[o.scale(w[0]),o.scale(w[1])];if(_=B,j=ow({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:v,index:g}),N=F-B,S=s.size,k={x:h.left,y:j,width:h.width,height:S},Math.abs(E)>0&&Math.abs(N)<Math.abs(E)){var I=pr(N||E)*(Math.abs(E)-Math.abs(N));N+=I}}var C=Wt(Wt({},v),{},{x:_,y:j,width:N,height:S,value:d?w:w[1],payload:v,background:k,tooltipPosition:{x:_+N/2,y:j+S/2}},m&&m[g]&&m[g].props);return C})}class Fd extends b.PureComponent{render(){return b.createElement(hC,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},b.createElement(s9,null),b.createElement(lC,{legendPayload:I9(this.props)}),b.createElement(oC,{fn:$9,args:this.props}),b.createElement(U9,this.props))}}ph(Fd,"displayName","Bar");ph(Fd,"defaultProps",_C);function Xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xj(Object(r),!0).forEach(function(n){Q9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q9(e,t,r){return(t=V9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V9(e){var t=W9(e,"string");return typeof t=="symbol"?t:t+""}function W9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K9=(e,t)=>t,H9=(e,t,r)=>r,G9=(e,t,r,n)=>n,Ny=(e,t,r,n,s)=>s,Y9=(e,t,r,n,s)=>s.maxBarSize,J9=(e,t,r,n,s,i)=>i,Zj=(e,t,r)=>{var n=r??e;if(!$e(n))return Sn(n,t,0)},X9=V([Te,lh,K9,H9,G9],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Z9=(e,t,r,n)=>{var s=Te(e);return s==="horizontal"?yg(e,"yAxis",r,n):yg(e,"xAxis",t,n)},e7=(e,t,r)=>{var n=Te(e);return n==="horizontal"?pj(e,"xAxis",t):pj(e,"yAxis",r)};function t7(e){return e.stackId!=null&&e.dataKey!=null}var r7=(e,t,r)=>{var n={},s=e.filter(t7),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(p=>p.dataKey),m=Zj(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=Zj(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},n7=V([X9,JF,e7],r7),s7=(e,t,r,n,s)=>{var i,o,l=Te(e),c=CP(e),{maxBarSize:u}=s,d=$e(u)?c:u,f,h;return l==="horizontal"?(f=Bn(e,"xAxis",t,n),h=ni(e,"xAxis",t,n)):(f=Bn(e,"yAxis",r,n),h=ni(e,"yAxis",r,n)),(i=(o=Zl(f,h,!0))!==null&&o!==void 0?o:d)!==null&&i!==void 0?i:0},NC=(e,t,r,n)=>{var s=Te(e),i,o;return s==="horizontal"?(i=Bn(e,"xAxis",t,n),o=ni(e,"xAxis",t,n)):(i=Bn(e,"yAxis",r,n),o=ni(e,"yAxis",r,n)),Zl(i,o)};function i7(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=Sn(e,r,0,!0),l,c=[];if(zr(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((v,g)=>v+(g.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,m={offset:h-o,size:0};l=n.reduce((v,g)=>{var w,_={stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(w=g.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return m=j[j.length-1].position,j},c)}else{var p=Sn(t,r,0,!0);r-2*p-(i-1)*o<=0&&(o=0);var x=(r-2*p-(i-1)*o)/i;x>1&&(x>>=0);var y=zr(s)?Math.min(x,s):x;l=n.reduce((v,g,w)=>[...v,{stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:p+(x+o)*w+(x-y)/2,size:y}}],c)}return l}}var a7=(e,t,r,n,s,i,o)=>{var l=$e(o)?t:o,c=i7(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>mu(mu({},u),{},{position:mu(mu({},u.position),{},{offset:u.position.offset-s/2})}))),c},o7=V([n7,CP,YF,AP,s7,NC,Y9],a7),l7=(e,t,r,n)=>Bn(e,"xAxis",t,n),c7=(e,t,r,n)=>Bn(e,"yAxis",r,n),u7=(e,t,r,n)=>ni(e,"xAxis",t,n),d7=(e,t,r,n)=>ni(e,"yAxis",r,n),f7=V([o7,Ny],(e,t)=>{if(e!=null){var r=e.find(n=>n.stackId===t.stackId&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),h7=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},m7=V([lh,Ny],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),p7=V([Z9,Ny],h7),g7=V([Nt,l7,c7,u7,d7,f7,Te,Hx,NC,p7,m7,J9],(e,t,r,n,s,i,o,l,c,u,d,f)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||s==null||c==null)){var{data:x}=d,y;if(x!=null&&x.length>0?y=x:y=h==null?void 0:h.slice(m,p+1),y!=null)return B9({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:y,offset:e,cells:f})}}),x7=e=>{var{chartData:t}=e,r=xt(),n=or();return b.useEffect(()=>n?()=>{}:(r(Nj(t)),()=>{r(Nj(void 0))}),[t,r,n]),null},e1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},y7=on({name:"brush",initialState:e1,reducers:{setBrushSettings(e,t){return t.payload==null?e1:t.payload}}}),v7=y7.reducer;function b7(e,t,r){return(t=w7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w7(e){var t=j7(e,"string");return typeof t=="symbol"?t:t+""}function j7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Sy{static create(t){return new Sy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}b7(Sy,"EPS",1e-4);function _7(e){return(e%180+180)%180}var N7=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=_7(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},S7={dots:[],areas:[],lines:[]},k7=on({name:"referenceElements",initialState:S7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=is(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=is(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=is(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),P7=k7.reducer,E7=b.createContext(void 0),C7=e=>{var{children:t}=e,[r]=b.useState("".concat(co("recharts"),"-clip")),n=jy();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return b.createElement(E7.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function Nm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function SC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function A7(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return N7(n,r)}function T7(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function qd(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function O7(e,t){return SC(e,t+1)}function D7(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:SC(n,u)};var x=c,y,v=()=>(y===void 0&&(y=r(p,x)),y),g=p.coordinate,w=c===0||qd(e,g,v,d,l);w||(c=0,d=o,u+=1),w&&(d=g+e*(v()/2+s),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(n){M7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M7(e,t,r){return(t=I7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I7(e){var t=$7(e,"string");return typeof t=="symbol"?t:t+""}function $7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z7(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(h){var m=i[h],p,x=()=>(p===void 0&&(p=r(m,h)),p);if(h===o-1){var y=e*(m.coordinate+e*x()/2-c);i[h]=m=Qt(Qt({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=Qt(Qt({},m),{},{tickCoord:m.coordinate});var v=qd(e,m.tickCoord,x,l,c);v&&(c=m.tickCoord-e*(x()/2+s),i[h]=Qt(Qt({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function L7(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=Qt(Qt({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=qd(e,d.tickCoord,()=>f,c,u);m&&(u=d.tickCoord-e*(f/2+s),o[l-1]=Qt(Qt({},d),{},{isShow:!0}))}for(var p=i?l-1:l,x=function(g){var w=o[g],_,j=()=>(_===void 0&&(_=r(w,g)),_);if(g===0){var N=e*(w.coordinate-e*j()/2-c);o[g]=w=Qt(Qt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[g]=w=Qt(Qt({},w),{},{tickCoord:w.coordinate});var S=qd(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+s),o[g]=Qt(Qt({},w),{},{isShow:!0}))},y=0;y<p;y++)x(y);return o}function ky(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(le(c)||Po.isSsr){var h;return(h=O7(s,le(c)?c:0))!==null&&h!==void 0?h:[]}var m=[],p=l==="top"||l==="bottom"?"width":"height",x=d&&p==="width"?Pl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return p==="width"?A7(Pl(j,{fontSize:t,letterSpacing:r}),x,f):Pl(j,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?pr(s[1].coordinate-s[0].coordinate):1,g=T7(i,v,p);return c==="equidistantPreserveStart"?D7(v,g,y,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=L7(v,g,y,s,o,c==="preserveStartEnd"):m=z7(v,g,y,s,o),m.filter(w=>w.isShow))}var R7=["viewBox"],F7=["viewBox"];function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function r1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(r),!0).forEach(function(n){Py(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n1(e,t){if(e==null)return{};var r,n,s=q7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function q7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Py(e,t,r){return(t=U7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U7(e){var t=B7(e,"string");return typeof t=="symbol"?t:t+""}function B7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pi extends b.Component{constructor(t){super(t),this.tickRefs=b.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=n1(t,R7),i=this.props,{viewBox:o}=i,l=n1(i,F7);return!Nm(n,o)||!Nm(s,l)||!Nm(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,h,m,p,x,y=c?-1:1,v=t.tickSize||l,g=le(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,m=n+ +!c*i,h=m-y*v,x=h-y*u,p=g;break;case"left":h=m=t.coordinate,f=r+ +!c*s,d=f-y*v,p=d-y*u,x=g;break;case"right":h=m=t.coordinate,f=r+ +c*s,d=f+y*v,p=d+y*u,x=g;break;default:d=f=t.coordinate,m=n+ +c*i,h=m+y*v,x=h+y*u,p=g;break}return{line:{x1:d,y1:h,x2:f,y2:m},tick:{x:p,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=ht(ht(ht({},Pe(this.props,!1)),Pe(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=ht(ht({},c),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=ht(ht({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+s})}return b.createElement("line",$a({},c,{className:we("recharts-cartesian-axis-line",Yi(l,"className"))}))}static renderTickItem(t,r,n){var s,i=we(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))s=b.cloneElement(t,ht(ht({},r),{},{className:i}));else if(typeof t=="function")s=t(ht(ht({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=we(o,t.className)),s=b.createElement(by,$a({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,u=ky(ht(ht({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),h=Pe(this.props,!1),m=Pe(o,!1),p=ht(ht({},h),{},{fill:"none"},Pe(s,!1)),x=u.map((y,v)=>{var{line:g,tick:w}=this.getTickLineCoord(y),_=ht(ht(ht(ht({textAnchor:d,verticalAnchor:f},h),{},{stroke:"none",fill:i},m),w),{},{index:v,payload:y,visibleTicksCount:u.length,tickFormatter:l});return b.createElement(Mr,$a({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},tx(this.props,y,v)),s&&b.createElement("line",$a({},p,g,{className:we("recharts-cartesian-axis-tick-line",Yi(s,"className"))})),o&&pi.renderTickItem(o,_,"".concat(typeof l=="function"?l(y.value,v):y.value).concat(c||"")))});return x.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},x):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:b.createElement(Mr,{className:we("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Pr.renderCallByParent(this.props))}}Py(pi,"displayName","CartesianAxis");Py(pi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Q7=["x1","y1","x2","y2","key"],V7=["offset"],W7=["xAxisId","yAxisId"],K7=["xAxisId","yAxisId"];function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){H7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H7(e,t,r){return(t=G7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(null,arguments)}function Ud(e,t){if(e==null)return{};var r,n,s=J7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function J7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var X7=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return b.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function kC(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=Ud(t,Q7),u=Pe(c,!1),d=Ud(u,V7);r=b.createElement("line",Di({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Z7(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,W7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return kC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function eQ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Ud(e,K7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return kC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function tQ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],p=m?s+o-f:u[h+1]-f;if(p<=0)return null;var x=h%t.length;return b.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:p,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function rQ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var m=!u[h+1],p=m?s+o-f:u[h+1]-f;if(p<=0)return null;var x=h%r.length;return b.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:p,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var nQ=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return c2(ky(Kt(Kt(Kt({},pi.defaultProps),r),{},{ticks:u2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},sQ=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return c2(ky(Kt(Kt(Kt({},pi.defaultProps),r),{},{ticks:u2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},iQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Bd(e){var t=p2(),r=g2(),n=m2(),s=Kt(Kt({},bs(e,iQ)),{},{x:le(e.x)?e.x:n.left,y:le(e.y)?e.y:n.top,width:le(e.width)?e.width:n.width,height:le(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:m}=s,p=or(),x=de(E=>gj(E,"xAxis",i,p)),y=de(E=>gj(E,"yAxis",o,p));if(!le(u)||u<=0||!le(d)||d<=0||!le(l)||l!==+l||!le(c)||c!==+c)return null;var v=s.verticalCoordinatesGenerator||nQ,g=s.horizontalCoordinatesGenerator||sQ,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof g=="function"){var j=h&&h.length,N=g({yAxis:y?Kt(Kt({},y),{},{ticks:j?h:y.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);kl(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var S=m&&m.length,k=v({xAxis:x?Kt(Kt({},x),{},{ticks:S?m:x.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);kl(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(X7,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),b.createElement(tQ,Di({},s,{horizontalPoints:w})),b.createElement(rQ,Di({},s,{verticalPoints:_})),b.createElement(Z7,Di({},s,{offset:n,horizontalPoints:w,xAxis:x,yAxis:y})),b.createElement(eQ,Di({},s,{offset:n,verticalPoints:_,xAxis:x,yAxis:y})))}Bd.displayName="CartesianGrid";var PC=(e,t,r,n)=>Bn(e,"xAxis",t,n),EC=(e,t,r,n)=>ni(e,"xAxis",t,n),CC=(e,t,r,n)=>Bn(e,"yAxis",r,n),AC=(e,t,r,n)=>ni(e,"yAxis",r,n),aQ=V([Te,PC,CC,EC,AC],(e,t,r,n,s)=>di(e,"xAxis")?Zl(t,n,!1):Zl(r,s,!1)),oQ=(e,t,r,n,s)=>s,lQ=V([lh,oQ],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),cQ=V([Te,PC,CC,EC,AC,lQ,aQ,Hx],(e,t,r,n,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:f,data:h}=i,m;if(h!=null&&h.length>0?m=h:m=c==null?void 0:c.slice(u,d+1),m!=null)return EQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:m})}}),uQ=["type","layout","connectNulls","needClip"],dQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function TC(e,t){if(e==null)return{};var r,n,s=fQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gh(e,t,r){return(t=hQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=mQ(e,"string");return typeof t=="symbol"?t:t+""}function mQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}var pQ=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function gQ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Wf(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var OC=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function xQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var yQ=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return OC(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...xQ(r,s),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function vQ(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=we("recharts-line-dot",typeof e!="boolean"?e.className:"");r=b.createElement(tC,yo({},t,{className:n}))}return r}function bQ(e,t){return e==null?!1:t?!0:e.length===1}function wQ(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!bQ(r,s))return null;var l=KS(s),c=Pe(n,!1),u=Pe(s,!0),d=r.map((h,m)=>{var p=gn(gn(gn({key:"dot-".concat(m),r:3},c),u),{},{index:m,cx:h.x,cy:h.y,dataKey:i,value:h.value,payload:h.payload,points:r});return vQ(s,p)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return b.createElement(Mr,yo({className:"recharts-line-dots",key:"dots"},f),d)}function Ag(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,f=TC(i,uQ),h=gn(gn({},Pe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:c,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(v2,yo({},h,{pathRef:r})),b.createElement(wQ,{points:n,clipPathId:t,props:i}),o&&ei.renderCallByParent(i,n))}function jQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function _Q(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:m,height:p,onAnimationEnd:x,onAnimationStart:y}=r,v=s.current,g=cC(r,"recharts-line-"),[w,_]=b.useState(!1),j=b.useCallback(()=>{typeof x=="function"&&x(),_(!1)},[x]),N=b.useCallback(()=>{typeof y=="function"&&y(),_(!0)},[y]),S=jQ(n.current),k=i.current;return b.createElement(Zi,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:j,onAnimationStart:N,key:g},E=>{var{t:P}=E,D=pn(k,S+k),O=Math.min(D(P),S),z;if(l){var R="".concat(l).split(/[,\s]+/gim).map(I=>parseFloat(I));z=yQ(O,S,R)}else z=OC(S,O);if(v){var B=v.length/o.length,F=P===1?o:o.map((I,C)=>{var T=Math.floor(C*B);if(v[T]){var A=v[T],L=pn(A.x,I.x),q=pn(A.y,I.y);return gn(gn({},I),{},{x:L(P),y:q(P)})}if(h){var ee=pn(m*2,I.x),ne=pn(p/2,I.y);return gn(gn({},I),{},{x:ee(P),y:ne(P)})}return gn(gn({},I),{},{x:I.x,y:I.y})});return s.current=F,b.createElement(Ag,{props:r,points:F,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})}return P>0&&S>0&&(s.current=o,i.current=O),b.createElement(Ag,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})})}function NQ(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=b.useRef(null),o=b.useRef(0),l=b.useRef(null),c=i.current;return s&&n&&n.length&&c!==n?b.createElement(_Q,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):b.createElement(Ag,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var SQ=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ht(e.payload,t)});class kQ extends b.Component{constructor(){super(...arguments),gh(this,"id",co("recharts-line-"))}render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:f,id:h,needClip:m,layout:p}=this.props;if(r)return null;var x=we("recharts-line",i),y=$e(h)?this.id:h,{r:v=3,strokeWidth:g=2}=(t=Pe(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=KS(n),_=v*2+g;return b.createElement(b.Fragment,null,b.createElement(Mr,{className:x},m&&b.createElement("defs",null,b.createElement(bC,{clipPathId:y,xAxisId:o,yAxisId:l}),!w&&b.createElement("clipPath",{id:"clipPath-dots-".concat(y)},b.createElement("rect",{x:u-_/2,y:c-_/2,width:d+_,height:f+_}))),b.createElement(NQ,{props:this.props,clipPathId:y}),b.createElement(gC,{direction:p==="horizontal"?"y":"x"},b.createElement(fC,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:SQ,errorBarOffset:0},this.props.children))),b.createElement(n9,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var DC={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Po.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function PQ(e){var t=bs(e,DC),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:m,yAxisId:p}=t,x=TC(t,dQ),{needClip:y}=_y(m,p),{height:v,width:g,x:w,y:_}=jy(),j=Yf(),N=or(),S=b.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),k=de(E=>cQ(E,m,p,N,S));return j!=="horizontal"&&j!=="vertical"?null:b.createElement(kQ,yo({},x,{connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:m,yAxisId:p,points:k,layout:j,height:v,width:g,left:w,top:_,needClip:y}))}function EQ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=Ht(u,o);return t==="horizontal"?{x:aw({axis:r,ticks:s,bandSize:l,entry:u,index:d}),y:$e(f)?null:n.scale(f),value:f,payload:u}:{x:$e(f)?null:r.scale(f),y:aw({axis:n,ticks:i,bandSize:l,entry:u,index:d}),value:f,payload:u}})}class xh extends b.PureComponent{render(){return b.createElement(hC,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},b.createElement(lC,{legendPayload:pQ(this.props)}),b.createElement(oC,{fn:gQ,args:this.props}),b.createElement(PQ,this.props))}}gh(xh,"displayName","Line");gh(xh,"defaultProps",DC);function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function o1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){CQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CQ(e,t,r){return(t=AQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AQ(e){var t=TQ(e,"string");return typeof t=="symbol"?t:t+""}function TQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OQ={xAxis:{},yAxis:{},zAxis:{}},MC=on({name:"cartesianAxis",initialState:OQ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=o1(o1({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:DQ,removeXAxis:MQ,addYAxis:IQ,removeYAxis:$Q,addZAxis:DK,removeZAxis:MK,updateYAxisWidth:zQ}=MC.actions,LQ=MC.reducer,RQ=["children"],FQ=["dangerouslySetInnerHTML","ticks"];function IC(e,t,r){return(t=qQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qQ(e){var t=UQ(e,"string");return typeof t=="symbol"?t:t+""}function UQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(null,arguments)}function $C(e,t){if(e==null)return{};var r,n,s=BQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QQ(e){var t=xt(),r=b.useMemo(()=>{var i=$C(e,RQ);return i},[e]),n=de(i=>js(i,r.id)),s=r===n;return b.useEffect(()=>(t(DQ(r)),()=>{t(MQ(r))}),[r,t]),s?e.children:null}var VQ=e=>{var{xAxisId:t,className:r}=e,n=de(h2),s=or(),i="xAxis",o=de(f=>Oo(f,i,t,s)),l=de(f=>fE(f,i,t,s)),c=de(f=>lE(f,t)),u=de(f=>Qq(f,t));if(c==null||u==null)return null;var d=$C(e,FQ);return b.createElement(pi,Tg({},d,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:we("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},WQ=e=>{var t,r,n,s,i;return b.createElement(QQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},b.createElement(VQ,e))};class cc extends b.Component{render(){return b.createElement(WQ,this.props)}}IC(cc,"displayName","XAxis");IC(cc,"defaultProps",{allowDataOverflow:_r.allowDataOverflow,allowDecimals:_r.allowDecimals,allowDuplicatedCategory:_r.allowDuplicatedCategory,height:_r.height,hide:!1,mirror:_r.mirror,orientation:_r.orientation,padding:_r.padding,reversed:_r.reversed,scale:_r.scale,tickCount:_r.tickCount,type:_r.type,xAxisId:0});var KQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},HQ=["dangerouslySetInnerHTML","ticks"];function zC(e,t,r){return(t=GQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GQ(e){var t=YQ(e,"string");return typeof t=="symbol"?t:t+""}function YQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Og.apply(null,arguments)}function JQ(e,t){if(e==null)return{};var r,n,s=XQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZQ(e){var t=xt();return b.useEffect(()=>(t(IQ(e)),()=>{t($Q(e))}),[e,t]),null}var eV=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=b.useRef(null),l=b.useRef(null),c=de(h2),u=or(),d=xt(),f="yAxis",h=de(v=>Oo(v,f,r,u)),m=de(v=>cE(v,r)),p=de(v=>Vq(v,r)),x=de(v=>fE(v,f,r,u));if(b.useLayoutEffect(()=>{var v;if(!(s!=="auto"||!m||wy(i)||b.isValidElement(i))){var g=o.current,w=g==null||(v=g.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:_,tickMargin:j}=g.props,N=KQ({ticks:w,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:j});Math.round(m.width)!==Math.round(N)&&d(zQ({id:r,width:N}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m==null?void 0:m.width,m,d,i,r,s]),m==null||p==null)return null;var y=JQ(e,HQ);return b.createElement(pi,Og({},y,{ref:o,labelRef:l,scale:h,x:p.x,y:p.y,width:m.width,height:m.height,className:we("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},tV=e=>{var t,r,n,s,i;return b.createElement(b.Fragment,null,b.createElement(ZQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),b.createElement(eV,e))},rV={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,hide:!1,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tickCount:Nr.tickCount,type:Nr.type,width:Nr.width,yAxisId:0};class uc extends b.Component{render(){return b.createElement(tV,this.props)}}zC(uc,"displayName","YAxis");zC(uc,"defaultProps",rV);var nV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=b;function sV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iV=typeof Object.is=="function"?Object.is:sV,aV=Tc.useSyncExternalStore,oV=Tc.useRef,lV=Tc.useEffect,cV=Tc.useMemo,uV=Tc.useDebugValue;nV.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=oV(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=cV(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return f=p}return f=m}if(p=f,iV(d,m))return p;var x=n(m);return s!==void 0&&s(p,x)?(d=m,p):(d=m,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=aV(e,i[0],i[1]);return lV(function(){o.hasValue=!0,o.value=l},[l]),uV(l),l};function dV(e){e()}function fV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var l1={notify(){},get:()=>[]};function hV(e,t){let r,n=l1,s=0,i=!1;function o(x){d();const y=n.subscribe(x);let v=!1;return()=>{v||(v=!0,y(),f())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=fV())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=l1)}function h(){i||(i=!0,d())}function m(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>n};return p}var mV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pV=mV(),gV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xV=gV(),yV=()=>pV||xV?b.useLayoutEffect:b.useEffect,vV=yV(),Sm=Symbol.for("react-redux-context"),km=typeof globalThis<"u"?globalThis:{};function bV(){if(!b.createContext)return{};const e=km[Sm]??(km[Sm]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var wV=bV();function jV(e){const{children:t,context:r,serverState:n,store:s}=e,i=b.useMemo(()=>{const c=hV(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=b.useMemo(()=>s.getState(),[s]);vV(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||wV;return b.createElement(l.Provider,{value:i},t)}var _V=jV,NV=(e,t)=>t,Ey=V([NV,Te,nq,Pt,PE,_s,H8,Nt],Z8),Cy=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},LC=rn("mouseClick"),RC=wc();RC.startListening({actionCreator:LC,effect:(e,t)=>{var r=e.payload,n=Ey(t.getState(),Cy(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(s8({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Dg=rn("mouseMove"),FC=wc();FC.startListening({actionCreator:Dg,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=dy(n,n.tooltip.settings.shared),i=Ey(n,Cy(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(bE({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(vE()))}});function SV(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var c1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},qC=on({name:"rootProps",initialState:c1,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:c1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),kV=qC.reducer,{updateOptions:PV}=qC.actions,EV=on({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),CV=EV.reducer,UC=rn("keyDown"),BC=rn("focus"),Ay=wc();Ay.startListening({actionCreator:UC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(fy(s,da(r))),l=_s(r);if(i==="Enter"){var c=$d(r,"axis","hover",String(s.index));t.dispatch(bg({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=Gq(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,h=o+f*d;if(!(l==null||h>=l.length||h<0)){var m=$d(r,"axis","hover",String(h));t.dispatch(bg({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});Ay.startListening({actionCreator:BC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=$d(r,"axis","hover",String(i));t.dispatch(bg({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ur=rn("externalEvent"),QC=wc();QC.startListening({actionCreator:Ur,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:L8(r),activeDataKey:TE(r),activeIndex:ta(r),activeLabel:AE(r),activeTooltipIndex:ta(r),isTooltipActive:R8(r)};e.payload.handler(n,e.payload.reactEvent)}}});var AV=V([Do],e=>e.tooltipItemPayloads),TV=V([AV,Ac,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),VC=rn("touchMove"),WC=wc();WC.startListening({actionCreator:VC,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=dy(n,n.tooltip.settings.shared);if(s==="axis"){var i=Ey(n,Cy({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(bE({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(R5),d=(o=c.getAttribute(F5))!==null&&o!==void 0?o:void 0,f=TV(t.getState(),u,d);t.dispatch(yE({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var OV=Fk({brush:v7,cartesianAxis:LQ,chartData:mU,graphicalItems:EB,layout:c5,legend:J5,options:cU,polarAxis:wB,polarOptions:CV,referenceElements:P7,rootProps:kV,tooltip:i8}),DV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return M3({reducer:OV,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([RC.middleware,FC.middleware,Ay.middleware,QC.middleware,WC.middleware]),devTools:{serialize:{replacer:SV},name:"recharts-".concat(r)}})};function MV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=or(),i=b.useRef(null);if(s)return r;i.current==null&&(i.current=DV(t,n));var o=hx;return b.createElement(_V,{context:o,store:i.current},r)}function IV(e){var{layout:t,width:r,height:n,margin:s}=e,i=xt(),o=or();return b.useEffect(()=>{o||(i(a5(t)),i(o5({width:r,height:n})),i(i5(s)))},[i,o,t,r,n,s]),null}function $V(e){var t=xt();return b.useEffect(()=>{t(PV(e))},[t,e]),null}var zV=["children"];function LV(e,t){if(e==null)return{};var r,n,s=RV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qd.apply(null,arguments)}var FV={width:"100%",height:"100%"},qV=b.forwardRef((e,t)=>{var r=p2(),n=g2(),s=y2();if(!wd(r)||!wd(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,b.createElement(HS,Qd({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:FV,ref:t}),i)}),UV=e=>{var{children:t}=e,r=de(Gf);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return b.createElement(HS,{width:n,height:s,x:o,y:i},t)},u1=b.forwardRef((e,t)=>{var{children:r}=e,n=LV(e,zV),s=or();return s?b.createElement(UV,null,r):b.createElement(qV,Qd({ref:t},n),r)});function BV(){var e=xt(),[t,r]=b.useState(null),n=de(L5);return b.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;zr(i)&&i!==n&&e(l5(i))}},[t,e,n]),r}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){VV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VV(e,t,r){return(t=WV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=KV(e,"string");return typeof t=="symbol"?t:t+""}function KV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HV=b.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:m,onTouchMove:p,onTouchStart:x,style:y,width:v}=e,g=xt(),[w,_]=b.useState(null),[j,N]=b.useState(null);xU();var S=BV(),k=b.useCallback(q=>{S(q),typeof t=="function"&&t(q),_(q),N(q)},[S,t,_,N]),E=b.useCallback(q=>{g(LC(q)),g(Ur({handler:i,reactEvent:q}))},[g,i]),P=b.useCallback(q=>{g(Dg(q)),g(Ur({handler:u,reactEvent:q}))},[g,u]),D=b.useCallback(q=>{g(vE()),g(Ur({handler:d,reactEvent:q}))},[g,d]),O=b.useCallback(q=>{g(Dg(q)),g(Ur({handler:f,reactEvent:q}))},[g,f]),z=b.useCallback(()=>{g(BC())},[g]),R=b.useCallback(q=>{g(UC(q.key))},[g]),B=b.useCallback(q=>{g(Ur({handler:o,reactEvent:q}))},[g,o]),F=b.useCallback(q=>{g(Ur({handler:l,reactEvent:q}))},[g,l]),I=b.useCallback(q=>{g(Ur({handler:c,reactEvent:q}))},[g,c]),C=b.useCallback(q=>{g(Ur({handler:h,reactEvent:q}))},[g,h]),T=b.useCallback(q=>{g(Ur({handler:x,reactEvent:q}))},[g,x]),A=b.useCallback(q=>{g(VC(q)),g(Ur({handler:p,reactEvent:q}))},[g,p]),L=b.useCallback(q=>{g(Ur({handler:m,reactEvent:q}))},[g,m]);return b.createElement(zE.Provider,{value:w},b.createElement(LI.Provider,{value:j},b.createElement("div",{className:we("recharts-wrapper",n),style:QV({position:"relative",cursor:"default",width:v,height:s},y),onClick:E,onContextMenu:B,onDoubleClick:F,onFocus:z,onKeyDown:R,onMouseDown:I,onMouseEnter:P,onMouseLeave:D,onMouseMove:O,onMouseUp:C,onTouchEnd:L,onTouchMove:A,onTouchStart:T,ref:k},r)))}),GV=["children","className","width","height","style","compact","title","desc"];function YV(e,t){if(e==null)return{};var r,n,s=JV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XV=b.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:u}=e,d=YV(e,GV),f=Pe(d,!1);return l?b.createElement(u1,{otherAttributes:f,title:c,desc:u},r):b.createElement(HV,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(u1,{otherAttributes:f,title:c,desc:u,ref:t},b.createElement(C7,null,r)))}),ZV=["width","height"];function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mg.apply(null,arguments)}function eW(e,t){if(e==null)return{};var r,n,s=tW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rW={top:5,right:5,bottom:5,left:5},nW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rW,reverseStackOrder:!1,syncMethod:"index"},KC=b.forwardRef(function(t,r){var n,s=bs(t.categoricalChartProps,nW),{width:i,height:o}=s,l=eW(s,ZV);if(!wd(i)||!wd(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,m={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(MV,{preloadedState:{options:m},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},b.createElement(x7,{chartData:h.data}),b.createElement(IV,{width:i,height:o,layout:s.layout,margin:s.margin}),b.createElement($V,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),b.createElement(XV,Mg({},l,{width:i,height:o,ref:r})))}),sW=["axis"],HC=b.forwardRef((e,t)=>b.createElement(KC,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sW,tooltipPayloadSearcher:RE,categoricalChartProps:e,ref:t})),iW=["axis","item"],aW=b.forwardRef((e,t)=>b.createElement(KC,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iW,tooltipPayloadSearcher:RE,categoricalChartProps:e,ref:t}));function oW({data:e,loading:t,error:r,showIndividual:n,timeframe:s="weekly",onTimeframeChange:i}){const[o,l]=b.useState("score"),c=g=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const w=e.filter(E=>{switch(g){case"score":return E.totalPossiblePoints>0;case"quizzes":return E.totalQuizzesCompleted>0;case"time":return E.totalTimeSpentMinutes>0;default:return!1}});if(w.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const _=w[w.length-1],j=w[w.length-2];let N,S;switch(g){case"score":N=_.averageScore,S=j.averageScore;break;case"quizzes":N=_.totalQuizzesCompleted,S=j.totalQuizzesCompleted;break;case"time":N=_.totalTimeSpentMinutes,S=j.totalTimeSpentMinutes;break}if(S===0)return{direction:"stable",value:0,color:"text-gray-600"};const k=(N-S)/S*100;return Math.abs(k)<5?{direction:"stable",value:k,color:"text-gray-600"}:k>0?{direction:"up",value:k,color:"text-green-600"}:{direction:"down",value:k,color:"text-red-600"}},u=g=>{switch(g){case"up":return a.jsx(wr,{className:"h-4 w-4"});case"down":return a.jsx(q0,{className:"h-4 w-4"});default:return a.jsx(yS,{className:"h-4 w-4"})}},d=({active:g,payload:w,label:_})=>{var j;if(g&&w&&w.length){const N=w[0].payload;return a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900 mb-2",children:_}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(j=N.averageScore)==null?void 0:j.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",N.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Questions: ",N.totalQuestionsAnswered]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Time: ",Mt(N.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Correct: ",N.correctAnswers," | Incorrect: ",N.incorrectAnswers]})]})]})}return null},h=(()=>{switch(o){case"score":return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]};case"quizzes":return{dataKey:"totalQuizzesCompleted",color:"#10b981",yAxisFormatter:g=>g.toString(),domain:[0,"dataMax"]};case"time":return{dataKey:"totalTimeSpentMinutes",color:"#8b5cf6",yAxisFormatter:g=>Mt(g),domain:[0,"dataMax"]};default:return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]}}})(),m=e.reduce((g,w)=>g+w.totalQuizzesCompleted,0),p=e.reduce((g,w)=>g+w.totalQuestionsAnswered,0),x=e.reduce((g,w)=>g+w.totalTimeSpentMinutes,0),y=e.reduce((g,w)=>g+w.totalPossiblePoints,0)>0?e.reduce((g,w)=>g+w.totalPointsEarned,0)/e.reduce((g,w)=>g+w.totalPossiblePoints,0)*100:0,v=c(o);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Progression Report"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Progression"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance trends over time":"Team performance trends over time"})]})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>i("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing progression data..."})]}):e.length===0||m===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progression Data"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual needs to complete more quizzes to see progression trends.":"The team needs to complete more quizzes to see progression trends."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[y.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Overall Score"})]}),a.jsx(zt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:m}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(it,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(it,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Mt(x)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ie,{className:"h-8 w-8 text-orange-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Average Score"}),a.jsx("button",{onClick:()=>l("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>l("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${v.color}`,children:[u(v.direction),a.jsx("span",{className:"font-medium",children:v.direction==="up"?"Improving":v.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[o==="score"&&"Average Score",o==="quizzes"&&"Quiz Activity",o==="time"&&"Study Time",Math.abs(v.value)>0&&a.jsxs("span",{className:v.color,children:[" ","(",v.value>0?"+":"",v.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[o==="score"&&"Average Score Trend",o==="quizzes"&&"Quiz Activity Trend",o==="time"&&"Study Time Trend"]}),e.length===0?a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Data Available"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Complete more quizzes to see progression trends"})]})}):a.jsx("div",{className:"h-64",children:a.jsx(Ng,{width:"100%",height:"100%",children:a.jsxs(HC,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280",angle:-45,textAnchor:"end",height:60}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:h.yAxisFormatter,domain:h.domain}),a.jsx(_g,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:h.dataKey,stroke:h.color,strokeWidth:3,dot:{fill:h.color,strokeWidth:2,r:5},activeDot:{r:7,stroke:h.color,strokeWidth:2},connectNulls:!1})]})})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((g,w)=>{const _=g.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${w>0?"border-t border-gray-100":""} ${_?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.periodStart.toLocaleDateString()," - ",g.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:_?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[g.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.totalQuizzesCompleted," quiz",g.totalQuizzesCompleted!==1?"es":"",", ",g.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Mt(g.totalTimeSpentMinutes)," study time"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No activity"})})]})},g.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(wr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Progression Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Track your progress toward the 90% pass rate goal"}),a.jsx("li",{children:" Identify periods of high activity and strong performance"}),a.jsx("li",{children:" Use trends to adjust study schedules and focus areas"}),a.jsx("li",{children:" Consistent practice leads to better retention and scores"})]})]})]})})]})})]})}function f1(){var h,m;const{selectedMemberId:e,progressionTimeframe:t,setProgressionTimeframe:r,analyticsData:n,analyticsLoading:s,analyticsError:i,progressionData:o,progressionLoading:l,progressionError:c}=ui();if(s)return a.jsx(Lt,{text:"Loading overview data...",className:"py-8"});if(i)return a.jsx(Ue,{type:"error",message:i});const u=[{name:"Quizzes Completed",value:((h=n==null?void 0:n.totalQuizzesCompleted)==null?void 0:h.toLocaleString())||"0",icon:ke,iconColor:"text-indigo-600"},{name:"Questions Answered",value:((m=n==null?void 0:n.totalQuestionsAnswered)==null?void 0:m.toLocaleString())||"0",icon:it,iconColor:"text-green-600"},{name:"Average Score",value:n!=null&&n.averageScore?`${n.averageScore.toFixed(1)}%`:"0%",icon:mr,iconColor:"text-blue-600"},{name:"Total Study Time",value:Mt((n==null?void 0:n.totalTimeSpentMinutes)||0),icon:Ie,iconColor:"text-purple-600"},{name:"Study Streak",value:n!=null&&n.studyStreak?`${n.studyStreak} day${n.studyStreak===1?"":"s"}`:"0 days",icon:zt,iconColor:"text-yellow-600"}],d=({active:p,payload:x,label:y})=>{var v;if(p&&x&&x.length){const g=x[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900",children:y}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(v=g.averageScore)==null?void 0:v.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",g.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Time: ",Mt(g.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Questions: ",g.totalQuestionsAnswered]})]})]})}return null},f=(p,x)=>{switch(x){case"averageScore":return`${p}%`;case"totalTimeSpentMinutes":return Mt(p);default:return p.toString()}};return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6",children:u.map(p=>a.jsx(He,{title:p.name,value:p.value,icon:p.icon,iconColor:p.iconColor},p.name))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:e===void 0?"Team Performance Trends":"Performance Overview"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading chart data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(wr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load chart data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Ng,{width:"100%",height:"100%",children:a.jsxs(HC,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:p=>f(p,"averageScore")}),a.jsx(_g,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:"averageScore",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(wr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No progression data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see trends"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Activity Distribution"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading activity data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load activity data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Ng,{width:"100%",height:"100%",children:a.jsxs(aW,{data:o,children:[a.jsx(Bd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(_g,{formatter:(p,x)=>[x==="totalQuizzesCompleted"?`${p} quizzes`:`${p} questions`,x==="totalQuizzesCompleted"?"Quizzes Completed":"Questions Answered"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px"}}),a.jsx(Fd,{dataKey:"totalQuizzesCompleted",fill:"#10b981",name:"Quizzes",radius:[2,2,0,0]}),a.jsx(Fd,{dataKey:"totalQuestionsAnswered",fill:"#3b82f6",name:"Questions",radius:[2,2,0,0]})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No activity data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see activity distribution"})]})})]})]}),a.jsx(oW,{data:o,loading:l,error:c,showIndividual:e!==void 0,timeframe:t,onTimeframeChange:r})]})}function kn({isOpen:e,onClose:t,title:r,children:n,footer:s,maxWidth:i="md",themeClasses:o,isFullScreen:l=!1}){var h;if(!e)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"},u=(o==null?void 0:o.card)==="bg-transparent"?(h=o==null?void 0:o.text)!=null&&h.includes("text-white")?"bg-gray-900":"bg-white":(o==null?void 0:o.card)||"bg-white",d=(o==null?void 0:o.text)||"text-gray-900",f=(o==null?void 0:o.border)||"border-gray-200";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${u} rounded-xl p-6 w-full ${c[i]} max-h-[90vh] overflow-y-auto ${l?"":"border "+f}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:`text-lg font-semibold ${d}`,children:r}),a.jsx("button",{onClick:t,className:`${(o==null?void 0:o.textSecondary)||"text-gray-400"} hover:${(o==null?void 0:o.text)||"text-gray-600"} transition-colors duration-200`,children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:n}),s&&a.jsx("div",{className:"flex items-center justify-end space-x-3",children:s})]})})}function GC({isOpen:e,onClose:t,quizSessionId:r,quizTitle:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState("all");b.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{if(r){l(!0),u(null);try{console.log(" Fetching question details for quiz session:",r);const{data:y,error:v}=await Q.from("quiz_question_logs").select(`
          id,
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          answered_at,
          questions!inner (
            book_of_bible,
            chapter,
            question,
            answer,
            points,
            tier
          )
        `).eq("quiz_session_id",r).order("answered_at",{ascending:!0});if(v)throw console.error(" Error fetching question details:",v),v;console.log(" Question details fetched:",(y==null?void 0:y.length)||0,"questions"),i(y||[])}catch(y){console.error(" Error fetching question details:",y),u(y.message||"Failed to load question details")}finally{l(!1)}}},m=s.filter(y=>{switch(d){case"correct":return y.is_correct;case"incorrect":return!y.is_correct;default:return!0}}),p={total:s.length,correct:s.filter(y=>y.is_correct).length,incorrect:s.filter(y=>!y.is_correct).length,totalPoints:s.reduce((y,v)=>y+v.points_earned,0),maxPoints:s.reduce((y,v)=>y+v.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((y,v)=>y+v.time_spent,0)/s.length):0},x=p.total>0?Math.round(p.correct/p.total*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:`Quiz Details${n?`: ${n}`:""}`,maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:o?a.jsx(Lt,{text:"Loading question details...",className:"py-8"}):c?a.jsx(Ue,{type:"error",message:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p.total}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[x,"%"]}),a.jsx("div",{className:"text-sm text-green-700",children:"Accuracy"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p.totalPoints}),a.jsx("div",{className:"text-sm text-purple-700",children:"Points Earned"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_l(p.averageTime)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Avg Time"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R0,{className:"h-4 w-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",p.total,")"]}),a.jsxs("button",{onClick:()=>f("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",p.correct,")"]}),a.jsxs("button",{onClick:()=>f("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",p.incorrect,")"]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",m.length," of ",p.total," questions"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:m.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Questions Found"}),a.jsx("p",{className:"text-gray-600",children:d==="all"?"No question details available for this quiz.":`No ${d} questions found.`})]}):m.map((y,v)=>a.jsxs("div",{className:`border rounded-lg p-4 ${y.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{children:y.question?a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(ke,{className:"h-4 w-4"}),a.jsxs("span",{children:[y.question.book_of_bible," Chapter ",y.question.chapter]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"capitalize",children:[y.question.tier," tier"]})]}):a.jsx("div",{className:"text-sm text-gray-500 italic",children:"Question details not available"})}),a.jsx("div",{children:y.is_correct?a.jsx(Ot,{className:"h-5 w-5 text-green-600"}):a.jsx($s,{className:"h-5 w-5 text-red-600"})})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(mr,{className:"h-4 w-4 text-purple-600"}),a.jsxs("span",{className:"font-medium",children:[y.points_earned,"/",y.total_points_possible," pts"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{children:_l(y.time_spent)})]})]}),y.question?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Question:"}),a.jsx("div",{className:"text-gray-900",children:y.question.question})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Correct Answer:"}),a.jsx("div",{className:"text-gray-900",children:y.question.answer})]}),!y.is_correct&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded p-2",children:[a.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Result:"}),a.jsxs("div",{className:"text-red-800",children:["Incorrect answer - ",y.points_earned," of ",y.total_points_possible," points earned"]})]})]}):a.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Question details are not available for this entry. This may occur if the question was deleted after the quiz was completed."})})]},y.id))})]})})}function lW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=f=>{o(f.id),c(f.title),s(!0)},d=[{key:"title",header:"Quiz Title",render:f=>a.jsx("div",{className:"font-medium text-gray-900",children:f.title})},{key:"type",header:"Type",render:f=>a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:_S(f.type)})})},{key:"completed_at",header:"Date",render:f=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(f.completed_at).toLocaleDateString()})},{key:"score",header:"Score",render:f=>{const h=f.max_points>0?f.total_points/f.max_points*100:0,m=h>=90?"text-green-600":h>=70?"text-blue-600":"text-red-600";return a.jsxs("div",{className:`font-bold text-lg ${m}`,children:[h.toFixed(1),"%"]})},className:"text-center",headerClassName:"text-center"},{key:"questions_count",header:"Questions",render:f=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f.questions_count})]})}),className:"text-center",headerClassName:"text-center"},{key:"estimated_minutes",header:"Time",render:f=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:Mt(f.estimated_minutes)})]})}),className:"text-center",headerClassName:"text-center"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(Fn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Quiz History"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Completed Quizzes"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of quizzes completed by this team member."})]})]})}),a.jsx(sn,{columns:d,data:e,loading:t,onRowClick:u,emptyState:{icon:ke,title:"No Quizzes Completed",description:"This team member has not completed any quizzes in the selected date range."}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Showing latest completed quizzes. Click on a row to view detailed results."})}),a.jsx(GC,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function cW(){const{quizHistoryData:e,quizHistoryLoading:t,quizHistoryError:r}=ui();return a.jsx(lW,{data:e,loading:t,error:r})}function uW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=p=>{p.completed&&p.quiz_session_id&&(o(p.quiz_session_id),c(`Study Assignment - ${ao(p.study_items)}`),s(!0))},d=p=>{const x=h(p)?"bg-orange-50 border-l-4 border-orange-400":"";return p.completed&&p.quiz_session_id?`${x} cursor-pointer hover:bg-gray-50`.trim():x},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",h=p=>{if(!p.completed||!p.completed_at)return!1;const x=new Date(p.date);return x.setHours(23,59,59,999),new Date(p.completed_at)>x},m=[{key:"study_items",header:"Study Items",render:p=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(p.study_items)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[p.study_items.length," item",p.study_items.length!==1?"s":""]})]})},{key:"date",header:"Date",render:p=>a.jsx("div",{className:"text-sm text-gray-900",children:lo(p.date,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),className:"whitespace-nowrap"},{key:"completed_at",header:"Completed",render:p=>a.jsx("div",{className:"text-sm text-gray-600",children:p.completed_at?a.jsxs("div",{className:h(p)?"text-orange-700 font-medium":"",children:[lo(new Date(p.completed_at),{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),h(p)&&a.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"(Late completion)"})]}):a.jsx("span",{className:"text-gray-400",children:""})}),className:"whitespace-nowrap"},{key:"score",header:"Score",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_points_earned!==void 0&&p.max_points_possible!==void 0?a.jsx("div",{className:`font-bold text-lg ${f(p.max_points_possible>0?p.total_points_earned/p.max_points_possible*100:0)}`,children:p.max_points_possible>0?`${Math.round(p.total_points_earned/p.max_points_possible*100)}%`:"0%"}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"questions",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_questions_answered!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.total_questions_answered})]}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"time",header:"Time",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_time_spent_minutes!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.total_time_spent_minutes,"m"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:""})}),className:"text-center"},{key:"completed",header:"Status",render:p=>a.jsx("div",{className:"flex items-center space-x-2",children:p.completed?a.jsxs("div",{className:`flex items-center space-x-2 ${h(p)?"text-orange-700":""}`,children:[a.jsx(Ot,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:`text-sm font-medium ${h(p)?"text-orange-700":"text-green-700"}`,children:h(p)?"Completed Late":"Completed"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"})]})}),className:"whitespace-nowrap"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(Fn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Study Schedule"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Study Schedule Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of study assignments and completion status."})]})]})}),a.jsx(sn,{columns:m,data:e,loading:t,onRowClick:u,getRowClassName:d,emptyState:{icon:Yt,title:"No Study Assignments",description:"No study assignments found for the selected date range. Study assignments are created through the Study Schedule feature."}}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(p=>p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(p=>!p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click on completed assignments to view detailed quiz results."})})]}),a.jsx(GC,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function dW(){const{studyScheduleData:e,studyScheduleLoading:t,studyScheduleError:r}=ui();return a.jsx(uW,{data:e,loading:t,error:r})}function fW({data:e,loading:t,error:r,showIndividual:n}){const s=l=>{switch(l){case"book":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"chapter":return a.jsx(it,{className:"h-4 w-4 text-green-600"});case"tier":return a.jsx(Op,{className:"h-4 w-4 text-purple-600"});default:return a.jsx(Fn,{className:"h-4 w-4 text-gray-600"})}},i=l=>l>=80?"text-yellow-600":l>=70?"text-orange-600":"text-red-600",o=l=>l>=80?"bg-yellow-50 border-yellow-200":l>=70?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200";return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(Fn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Knowledge Gaps"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(q0,{className:"h-6 w-6 text-red-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Knowledge Gaps Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Topics where this individual struggles most (below 90% accuracy)":"Topics where the team struggles most (below 90% accuracy)"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing knowledge gaps..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(it,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Knowledge Gaps Found"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual is performing well across all topics (90%+ accuracy)!":"The team is performing well across all topics (90%+ accuracy)!"})]}):a.jsxs("div",{className:"space-y-4",children:[e.map((l,c)=>a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-200 hover:shadow-md ${o(l.averageScore)}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",c+1]}),s(l.type)]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:l.topic}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[l.totalAttempts," attempts"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[l.correctAnswers," correct"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[l.incorrectAnswers," incorrect"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-2xl font-bold ${i(l.averageScore)}`,children:[l.averageScore.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Accuracy"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.averageScore>=80?"bg-yellow-500":l.averageScore>=70?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(l.averageScore,5)}%`}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0%"}),a.jsx("span",{children:"100%"})]})]}),a.jsxs("div",{className:"mt-3 flex items-start space-x-2",children:[a.jsx(L0,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Recommendation:"})," Focus additional study time on ",l.topic.toLowerCase(),l.type==="chapter"&&l.book&&l.chapter?` by reviewing ${l.book} chapter ${l.chapter} content and practicing more questions from this section.`:l.type==="book"&&l.book?` by reviewing ${l.book} content and practicing more questions from this book.`:l.type==="tier"&&l.tier?` by practicing more ${l.tier} level questions to build confidence.`:" to improve performance in this area."]})]})]},`${l.type}-${l.topic}`)),e.length>0&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Op,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Study Tips:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Focus on the topics with the lowest scores first"}),a.jsx("li",{children:" Create custom quizzes targeting these specific areas"}),a.jsx("li",{children:" Review source material for chapters with low performance"}),a.jsx("li",{children:" Practice regularly to improve retention and understanding"})]})]})]})})]})})]})}function hW(){const{selectedMemberId:e,knowledgeGapsData:t,knowledgeGapsLoading:r,knowledgeGapsError:n}=ui();return a.jsx(fW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function xr({type:e,value:t,showIcon:r=!1,size:n="sm"}){const s=()=>{switch(e){case"role":switch(t){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}case"status":switch(t){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}case"tier":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"plan":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"teamRole":switch(t){case"owner":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}default:return"bg-gray-100 text-gray-800"}},i=()=>{if(!r)return null;switch(e){case"role":return t==="admin"?a.jsx(_n,{className:"h-3 w-3"}):a.jsx(Ge,{className:"h-3 w-3"});case"status":switch(t){case"active":return a.jsx(Ot,{className:"h-3 w-3"});case"pending":return a.jsx(Ie,{className:"h-3 w-3"});case"suspended":return a.jsx($s,{className:"h-3 w-3"});default:return a.jsx(tn,{className:"h-3 w-3"})}case"tier":switch(t){case"enterprise":return a.jsx(ds,{className:"h-3 w-3"});case"pro":return a.jsx(Ki,{className:"h-3 w-3"});default:return null}case"teamRole":switch(t){case"owner":return a.jsx(ds,{className:"h-3 w-3"});case"admin":return a.jsx(_n,{className:"h-3 w-3"});default:return a.jsx(Ge,{className:"h-3 w-3"})}default:return null}},o=n==="md"?"px-3 py-1 text-sm":"px-2 py-1 text-xs",l=i();return a.jsxs("span",{className:`inline-flex items-center ${o} font-semibold rounded-full ${s()}`,children:[l&&a.jsx("span",{className:"mr-1",children:l}),a.jsx("span",{className:"capitalize",children:t})]})}function mW({isOpen:e,onClose:t,question:r,teamId:n}){const[s,i]=b.useState([]),[o,l]=b.useState("all"),c=async()=>{if(!(!r||!n))try{console.log(" Fetching all attempts for question:",r.question_id,"in team:",n);const{data:x,error:y}=await Q.rpc("get_question_attempts_with_user_details",{p_question_id:r.question_id,p_team_id:n});if(y){console.error(" Error fetching all attempts:",y),console.warn(" Team member attempt details not available, continuing without them"),i([]);return}console.log(" All attempts fetched:",(x==null?void 0:x.length)||0,"attempts"),i(x||[])}catch(x){console.error(" Error fetching all attempts:",x),i([])}};if(b.useEffect(()=>{e&&r&&n&&c()},[e,r,n]),!r)return null;const u=x=>x>=90?"text-green-600":x>=50?"text-yellow-600":"text-red-600",d=x=>x>=90?"bg-green-50 border-green-200":x>=50?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",f=s.filter(x=>{switch(o){case"correct":return x.is_correct;case"incorrect":return!x.is_correct;default:return!0}}),h={total:s.length,correct:s.filter(x=>x.is_correct).length,incorrect:s.filter(x=>!x.is_correct).length,totalPoints:s.reduce((x,y)=>x+y.points_earned,0),maxPoints:s.reduce((x,y)=>x+y.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((x,y)=>x+y.time_spent,0)/s.length):0},m=x=>x>=90?"Easy":x>=70?"Moderate":x>=50?"Challenging":"Difficult",p=r.total_points_possible>0?Math.round(r.total_points_earned/r.total_points_possible*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:"Question Performance Details",maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`border rounded-lg p-4 ${d(r.accuracy_rate)}`,children:a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[r.book_of_bible," Chapter ",r.chapter]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(xr,{type:"tier",value:r.tier,showIcon:!0}),a.jsx("span",{className:"text-sm text-gray-600",children:""}),a.jsxs("span",{className:"text-sm text-gray-600",children:[r.points," points"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-3xl font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:m(r.accuracy_rate)})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.total_attempts}),a.jsxs("div",{className:"text-sm text-blue-700 flex items-center justify-center space-x-1",children:[a.jsx(Ge,{className:"h-4 w-4"}),a.jsx("span",{children:"Total Attempts"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.correct_attempts}),a.jsxs("div",{className:"text-sm text-green-700 flex items-center justify-center space-x-1",children:[a.jsx(Ot,{className:"h-4 w-4"}),a.jsx("span",{children:"Correct"})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-900",children:r.incorrect_attempts}),a.jsxs("div",{className:"text-sm text-red-700 flex items-center justify-center space-x-1",children:[a.jsx($s,{className:"h-4 w-4"}),a.jsx("span",{children:"Incorrect"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_l(r.average_time_spent)}),a.jsxs("div",{className:"text-sm text-purple-700 flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{children:"Avg Time"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(it,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{children:"Question"})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.question_text})})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(Ot,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"Correct Answer"})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.answer_text})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center space-x-2",children:[a.jsx(sr,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{children:"Performance Analysis"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Success Rate"}),a.jsxs("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Points Efficiency"}),a.jsxs("span",{className:`font-bold ${u(p)}`,children:[p,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Difficulty Level"}),a.jsx("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:m(r.accuracy_rate)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Average Response Time"}),a.jsx("span",{className:"font-bold text-gray-900",children:_l(r.average_time_spent)})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h5",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[a.jsx(wr,{className:"h-4 w-4"}),a.jsx("span",{children:"Recommendations"})]}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[r.accuracy_rate<50&&a.jsx("p",{children:" Consider reviewing this question for clarity or difficulty"}),r.accuracy_rate>=50&&r.accuracy_rate<70&&a.jsx("p",{children:" This question provides good challenge - consider similar difficulty"}),r.accuracy_rate>=90&&a.jsx("p",{children:" This question may be too easy - consider increasing difficulty"}),r.average_time_spent>60&&a.jsx("p",{children:" Users take longer than expected - question may need simplification"}),r.total_attempts<10&&a.jsx("p",{children:" Limited data available - more attempts needed for reliable analysis"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Distribution"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"bg-green-500 h-4 rounded-l-full transition-all duration-300",style:{width:`${r.correct_attempts/r.total_attempts*100}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[a.jsxs("span",{children:[r.correct_attempts," Correct"]}),a.jsxs("span",{children:[r.total_attempts," Total Attempts"]}),a.jsxs("span",{children:[r.incorrect_attempts," Incorrect"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Team Member Attempts"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>l("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",h.total,")"]}),a.jsxs("button",{onClick:()=>l("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",h.correct,")"]}),a.jsxs("button",{onClick:()=>l("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",h.incorrect,")"]})]})]}),s.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Attempts Found"}),a.jsx("p",{className:"text-gray-600",children:"No team member attempts available for this question."})]}):f.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",o.charAt(0).toUpperCase()+o.slice(1)," Attempts"]}),a.jsxs("p",{className:"text-gray-600",children:["No ",o," attempts found for this question."]})]}):a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:f.map((x,y)=>a.jsxs("div",{className:`border rounded-lg p-4 ${x.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:x.user_name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:x.user_name}),a.jsx("div",{className:"text-sm text-gray-600",children:$p(x.answered_at)})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-sm text-orange-600",children:_l(x.time_spent)})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_correct?"Correct":"Incorrect"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Points: ",x.points_earned," / ",x.total_points_possible]})]},`${x.user_id}-${x.answered_at}`))})]})]})})}function pW({data:e,loading:t,error:r,showIndividual:n,user:s}){const[i,o]=b.useState("accuracy_rate"),[l,c]=b.useState("asc"),[u,d]=b.useState(!1),[f,h]=b.useState(null),m=ae.useMemo(()=>[...e].sort((_,j)=>{const N=_[i],S=j[i];return typeof N=="number"&&typeof S=="number"?l==="desc"?S-N:N-S:typeof N=="string"&&typeof S=="string"?l==="desc"?S.localeCompare(N):N.localeCompare(S):0}),[e,i,l]),p=_=>{i===_?c(l==="desc"?"asc":"desc"):(o(_),c(_==="accuracy_rate"?"asc":"desc"))},x=_=>{h(_),d(!0)},y=_=>_>=90?"text-green-600":_>=70?"text-blue-600":_>=50?"text-yellow-600":"text-red-600",v=_=>{if(_<60)return`${_}s`;const j=Math.floor(_/60),N=_%60;return`${j}:${N.toString().padStart(2,"0")}`},w=[{key:"question_text",header:"Question",render:_=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:_.question_text}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.points," point",_.points!==1?"s":""]})]})},{key:"book_chapter",header:"Book & Chapter",render:_=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",_.chapter]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:_=>a.jsx(xr,{type:"tier",value:_.tier,showIcon:!0}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:_=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${y(_.accuracy_rate)}`,children:[_.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.correct_attempts,"/",_.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:_.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:v(_.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:_=>{const j=_.total_points_possible>0?Math.round(_.total_points_earned/_.total_points_possible*100):0;return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${y(j)}`,children:[j,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.total_points_earned,"/",_.total_points_possible]})]})},className:"text-center",headerClassName:"text-center"}].map(_=>({..._,header:_.sortable?a.jsxs("button",{onClick:()=>p(_.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:_.header}),i===_.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${l==="desc"?"rotate-180":""}`})]}):_.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Question Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Question Performance Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual question performance and difficulty analysis":"Team-wide question performance and difficulty analysis"})]})]})}),a.jsx(sn,{columns:w,data:m,loading:t,onRowClick:x,emptyState:{icon:sr,title:"No Question Data",description:"No question performance data available yet. Complete some quizzes to see question analysis!"},getRowClassName:_=>_.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":_.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions Analyzed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(_=>_.accuracy_rate<50).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Difficult (<50%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(_=>_.accuracy_rate>=50&&_.accuracy_rate<70).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Moderate (50-70%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(_=>_.accuracy_rate>=90).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Easy (>90%)"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Questions with low accuracy rates may need review"})})]}),a.jsx(mW,{isOpen:u,onClose:()=>{d(!1),h(null)},question:f,teamId:s==null?void 0:s.teamId})]})}function gW(){const{selectedMemberId:e,user:t,questionPerformanceData:r,questionPerformanceLoading:n,questionPerformanceError:s}=ui();return a.jsx(pW,{data:r,loading:n,error:s,showIndividual:e!==void 0,user:t})}function xW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("date"),[o,l]=b.useState("desc"),c=ae.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:_ instanceof Date&&j instanceof Date?o==="desc"?j.getTime()-_.getTime():_.getTime()-j.getTime():typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l("desc"))},d=(g,w)=>g===0?{level:"No Activity",color:"text-gray-500"}:g>=3||w>=50?{level:"High",color:"text-green-600"}:g>=2||w>=20?{level:"Medium",color:"text-blue-600"}:{level:"Low",color:"text-yellow-600"},h=[{key:"date",header:"Date",render:g=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.dateObj.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:g.dateObj.toLocaleDateString()})]}),className:"whitespace-nowrap",sortable:!0},{key:"quizzesCompleted",header:"Quizzes",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.quizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"questionsAnswered",header:"Questions",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.questionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"timeSpentMinutes",header:"Study Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:Mt(g.timeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageSessionTime",header:"Avg Session",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.averageSessionTime>0?Mt(g.averageSessionTime):""})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"activity_level",header:"Activity Level",render:g=>{const{level:w,color:_}=d(g.quizzesCompleted,g.questionsAnswered);return a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`font-medium ${_}`,children:w})})},className:"text-center",headerClassName:"text-center"},{key:"studyStreak",header:"Streak",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.studyStreak>0?`${g.studyStreak}`:""})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),m=e.reduce((g,w)=>g+w.quizzesCompleted,0),p=e.reduce((g,w)=>g+w.questionsAnswered,0),x=e.reduce((g,w)=>g+w.timeSpentMinutes,0),y=e.filter(g=>g.quizzesCompleted>0).length,v=e.length>0?Math.max(...e.map(g=>g.studyStreak)):0;return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(Fn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Engagement Data"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(no,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Daily Activity & Engagement"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Daily study activity and engagement patterns for this individual":"Daily study activity and engagement patterns for the team"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:m}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Quizzes"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:p}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Mt(x)}),a.jsx("div",{className:"text-sm text-purple-700",children:"Total Time"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:y}),a.jsx("div",{className:"text-sm text-orange-700",children:"Active Days"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:v}),a.jsx("div",{className:"text-sm text-yellow-700",children:"Best Streak"})]})]})}),a.jsx(sn,{columns:h,data:c,loading:t,emptyState:{icon:no,title:"No Activity Data",description:"No daily activity data available for the selected date range. Complete some quizzes to see engagement patterns!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Activity levels: High (3+ quizzes or 50+ questions), Medium (2+ quizzes or 20+ questions), Low (1+ quiz)"})})})]})}function yW(){const{selectedMemberId:e,engagementData:t,engagementLoading:r,engagementError:n}=ui();return a.jsx(xW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function vW({data:e,loading:t,error:r,timeframe:n="weekly",onTimeframeChange:s}){const[i,o]=b.useState("score"),l=x=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const y=e.filter(N=>{switch(x){case"score":return N.totalPossiblePoints>0;case"quizzes":return N.totalQuizzesCompleted>0;case"time":return N.totalTimeSpentMinutes>0;case"members":return N.activeMembers>0;default:return!1}});if(y.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const v=y[y.length-1],g=y[y.length-2];let w,_;switch(x){case"score":w=v.averageScore,_=g.averageScore;break;case"quizzes":w=v.totalQuizzesCompleted,_=g.totalQuizzesCompleted;break;case"time":w=v.totalTimeSpentMinutes,_=g.totalTimeSpentMinutes;break;case"members":w=v.activeMembers,_=g.activeMembers;break}if(_===0)return{direction:"stable",value:0,color:"text-gray-600"};const j=(w-_)/_*100;return Math.abs(j)<5?{direction:"stable",value:j,color:"text-gray-600"}:j>0?{direction:"up",value:j,color:"text-green-600"}:{direction:"down",value:j,color:"text-red-600"}},c=x=>{switch(x){case"up":return a.jsx(wr,{className:"h-4 w-4"});case"down":return a.jsx(q0,{className:"h-4 w-4"});default:return a.jsx(yS,{className:"h-4 w-4"})}},u=e.reduce((x,y)=>x+y.totalQuizzesCompleted,0),d=e.reduce((x,y)=>x+y.totalQuestionsAnswered,0),f=e.reduce((x,y)=>x+y.totalTimeSpentMinutes,0),h=e.reduce((x,y)=>x+y.totalPossiblePoints,0)>0?e.reduce((x,y)=>x+y.totalPointsEarned,0)/e.reduce((x,y)=>x+y.totalPossiblePoints,0)*100:0,m=e.length>0?Math.max(...e.map(x=>x.activeMembers)):0;e.reduce((x,y)=>x+y.activeDays,0);const p=l(i);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team Performance Trends"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ge,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Performance Trends"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track your team's collective performance and activity over time"})]})]}),s&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>s("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing team performance trends..."})]}):e.length===0||u===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Performance Data"}),a.jsx("p",{className:"text-gray-600",children:"Your team needs to complete more quizzes to see performance trends over time."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Team Average Score"})]}),a.jsx(zt,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:u}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(it,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:d}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(it,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Mt(f)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ie,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:m}),a.jsx("div",{className:"text-sm text-indigo-700",children:"Active Members"})]}),a.jsx(Ge,{className:"h-8 w-8 text-indigo-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Team Score"}),a.jsx("button",{onClick:()=>o("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>o("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"}),a.jsx("button",{onClick:()=>o("members"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="members"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Active Members"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${p.color}`,children:[c(p.direction),a.jsx("span",{className:"font-medium",children:p.direction==="up"?"Improving":p.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[i==="score"&&"Team Average Score",i==="quizzes"&&"Quiz Activity",i==="time"&&"Study Time",i==="members"&&"Active Members",Math.abs(p.value)>0&&a.jsxs("span",{className:p.color,children:[" ","(",p.value>0?"+":"",p.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[i==="score"&&"Team Average Score Trend",i==="quizzes"&&"Team Quiz Activity Trend",i==="time"&&"Team Study Time Trend",i==="members"&&"Active Members Trend"]}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Interactive Chart Would Go Here"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Integration with charting library (e.g., Chart.js, Recharts) needed"}),a.jsx("div",{className:"mt-4 text-xs text-gray-400",children:a.jsxs("p",{children:["Data points available: ",e.filter(x=>{switch(i){case"score":return x.totalPossiblePoints>0;case"quizzes":return x.totalQuizzesCompleted>0;case"time":return x.totalTimeSpentMinutes>0;case"members":return x.activeMembers>0;default:return!1}}).length," periods"]})})]})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((x,y)=>{const v=x.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${y>0?"border-t border-gray-100":""} ${v?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:x.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[x.periodStart.toLocaleDateString()," - ",x.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:v?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[x.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[x.totalQuizzesCompleted," quiz",x.totalQuizzesCompleted!==1?"es":"",", ",x.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Mt(x.totalTimeSpentMinutes)," study time, ",x.activeMembers," active members"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No team activity"})})]})},x.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(wr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Team Performance Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:" Monitor team engagement and collective learning progress"}),a.jsx("li",{children:" Identify periods of high activity and strong team performance"}),a.jsx("li",{children:" Use trends to motivate team members and celebrate achievements"}),a.jsx("li",{children:" Track how many team members are actively participating"})]})]})]})})]})})]})}function bW(){const{progressionTimeframe:e,setProgressionTimeframe:t,teamTrendsData:r,teamTrendsLoading:n,teamTrendsError:s}=ui();return a.jsx(vW,{data:r,loading:n,error:s,timeframe:e,onTimeframeChange:t})}function wW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("accuracy_rate"),[o,l]=b.useState("asc"),c=ae.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l(g==="accuracy_rate"?"asc":"desc"))},d=g=>g>=90?"text-green-600":g>=70?"text-blue-600":g>=50?"text-yellow-600":"text-red-600",f=g=>{if(g<60)return`${g}s`;const w=Math.floor(g/60),_=g%60;return`${w}:${_.toString().padStart(2,"0")}`},m=[{key:"book_of_bible",header:"Book",render:g=>a.jsx("div",{className:"font-medium text-gray-900",children:g.book_of_bible}),sortable:!0},{key:"chapter",header:"Chapter",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.chapter})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${d(g.accuracy_rate)}`,children:[g.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.correct_attempts,"/",g.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f(g.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${d(g.points_efficiency)}`,children:[g.points_efficiency,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.total_points_earned,"/",g.total_points_possible]})]}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),p=new Set(e.map(g=>g.book_of_bible)).size,x=e.length,y=e.length>0?Math.round(e.reduce((g,w)=>g+w.accuracy_rate,0)/e.length):0,v=e.reduce((g,w)=>g+w.total_attempts,0);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Book/Chapter Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Book & Chapter Performance"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance breakdown by Bible book and chapter":"Team performance breakdown by Bible book and chapter"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p}),a.jsx("div",{className:"text-sm text-blue-700",children:"Books Analyzed"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:x}),a.jsx("div",{className:"text-sm text-green-700",children:"Chapters Analyzed"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[y,"%"]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Overall Accuracy"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:v}),a.jsx("div",{className:"text-sm text-orange-700",children:"Total Attempts"})]})]})}),a.jsx(sn,{columns:m,data:c,loading:t,emptyState:{icon:ke,title:"No Book/Chapter Data",description:"No book and chapter performance data available yet. Complete some quizzes to see detailed analysis!"},getRowClassName:g=>g.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":g.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(g=>g.accuracy_rate<50).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Struggling (","<50%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(g=>g.accuracy_rate>=50&&g.accuracy_rate<70).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Needs Work (","50-70%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.filter(g=>g.accuracy_rate>=70&&g.accuracy_rate<90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Good (","70-90%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(g=>g.accuracy_rate>=90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Excellent (",">90%",")"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Focus study time on chapters with low accuracy rates"})})]})]})}function jW(){const{selectedMemberId:e,bookChapterData:t,bookChapterLoading:r,bookChapterError:n}=ui();return a.jsx(wW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}const _W=3,h1=[{id:"overview",name:"Overview",icon:sr},{id:"quiz-history",name:"Quiz History",icon:ke,requiresIndividualView:!0},{id:"study-schedule",name:"Study Schedule",icon:Yt,requiresIndividualView:!0},{id:"knowledge-gaps",name:"Knowledge Gaps",icon:Op},{id:"question-performance",name:"Question Performance",icon:it},{id:"activity",name:"Daily Activity",icon:no},{id:"book-chapter-performance",name:"Book/Chapter",icon:ke},{id:"team-trends",name:"Team Trends",icon:wr,requiresTeamView:!0}];function NW(){var U;const{user:e,refreshUser:t,developerLog:r}=ge(),n=_t(),s=b.useRef(!1),[i,o]=b.useState(void 0),[l,c]=b.useState("weekly"),[u,d]=b.useState("overview"),[f,h]=b.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-_W),K}),[m,p]=b.useState(new Date),{teamMembers:x,loading:y,error:v}=$S(),{data:g,loading:w,error:_}=uI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),{data:j,loading:N,error:S}=dI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),{data:k,loading:E,error:P}=fI({teamId:e==null?void 0:e.teamId,userId:i,timeframe:l,startDate:f,endDate:m}),{data:D,loading:O,error:z}=hI({userId:i,startDate:f,endDate:m}),{data:R,loading:B,error:F}=mI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),{data:I,loading:C,error:T}=pI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),{data:A,loading:L,error:q}=gI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),{data:ee,loading:ne,error:Y}=bI({teamId:i===void 0?e==null?void 0:e.teamId:void 0,timeframe:l,startDate:f,endDate:m}),{data:ve,loading:je,error:Et}=wI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:m}),Z=b.useCallback(K=>{const G=new Date(K.target.value);G<=m&&h(G)},[m]),W=b.useCallback(K=>{const G=new Date(K.target.value);G>=f&&p(G)},[f]),te=b.useCallback(K=>K.toISOString().split("T")[0],[]),H=b.useCallback(async()=>{try{await t()}catch(K){console.error("Failed to refresh data:",K)}},[t]),De=b.useCallback(K=>{const G=i===void 0,J=h1.find(ue=>ue.id===K);J&&(J.requiresIndividualView&&G||J.requiresTeamView&&!G||d(K))},[i]),pe=b.useMemo(()=>i?x.find(K=>K.userId===i):void 0,[i,x]),Ee=b.useMemo(()=>{const K=i===void 0;return h1.filter(G=>!(G.requiresIndividualView&&K||G.requiresTeamView&&!K))},[i]),Le=b.useMemo(()=>Math.ceil((m.getTime()-f.getTime())/(1e3*60*60*24)),[f,m]),at=b.useMemo(()=>({user:e,selectedMemberId:i,setSelectedMemberId:o,teamMembers:x,canSelectIndividuals:(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",startDate:f,setStartDate:h,endDate:m,setEndDate:p,progressionTimeframe:l,setProgressionTimeframe:c,analyticsData:g,analyticsLoading:w,analyticsError:_,knowledgeGapsData:j,knowledgeGapsLoading:N,knowledgeGapsError:S,progressionData:k,progressionLoading:E,progressionError:P,quizHistoryData:D,quizHistoryLoading:O,quizHistoryError:z,studyScheduleData:R,studyScheduleLoading:B,studyScheduleError:F,questionPerformanceData:I,questionPerformanceLoading:C,questionPerformanceError:T,engagementData:A,engagementLoading:L,engagementError:q,teamTrendsData:ee,teamTrendsLoading:ne,teamTrendsError:Y,bookChapterData:ve,bookChapterLoading:je,bookChapterError:Et,selectedMemberInfo:pe}),[e,i,x,f,m,l,g,w,_,j,N,S,k,E,P,D,O,z,R,B,F,I,C,T,A,L,q,ee,ne,Y,ve,je,Et,pe]);b.useEffect(()=>{e&&x.length>0&&!s.current&&(e.teamRole==="member"?o(e.id):o(void 0),s.current=!0)},[e,x]),b.useEffect(()=>{Ee.find(G=>G.id===u)||d("overview")},[Ee,u]);const Je=((U=e==null?void 0:e.planSettings)==null?void 0:U.allow_analytics_access)??!1,oe=w||N||E||O||B||C||L||ne||je,M=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",$=b.useCallback(()=>{try{switch(u){case"overview":return a.jsx(f1,{});case"quiz-history":return a.jsx(cW,{});case"study-schedule":return a.jsx(dW,{});case"knowledge-gaps":return a.jsx(hW,{});case"question-performance":return a.jsx(gW,{});case"activity":return a.jsx(yW,{});case"team-trends":return a.jsx(bW,{});case"book-chapter-performance":return a.jsx(jW,{});default:return a.jsx(f1,{})}}catch(K){return console.error("Error rendering tab content:",K),a.jsx("div",{className:"text-center py-8",children:a.jsx(Ue,{type:"error",message:"Failed to load tab content. Please try refreshing the page."})})}},[u]);return y?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading analytics data..."})}):v?a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsx(Ue,{type:"error",message:v||"Failed to load data."})})}):Je?a.jsx(he,{children:a.jsx(jI,{value:at,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Track performance and progress insights."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:H,disabled:oe,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:oe?"Loading...":"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(mS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter analytics data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:te(f),onChange:Z,max:te(m),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:te(m),onChange:W,min:te(f),max:te(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Le," days"]})]})]})}),a.jsx(Rp,{teamMembers:x,selectedMemberId:i,onSelectMember:o,selectedMemberInfo:pe,disabled:!M,includeAllTeamOption:!0}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6 overflow-x-auto",role:"tablist",children:Ee.map(K=>{const G=K.icon,J=u===K.id;return a.jsxs("button",{onClick:()=>De(K.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${J?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,role:"tab","aria-selected":J,"aria-controls":`${K.id}-panel`,children:[a.jsx(G,{className:"h-4 w-4"}),a.jsx("span",{children:K.name})]},K.id)})})}),a.jsx("div",{className:"p-6",role:"tabpanel",id:`${u}-panel`,"aria-labelledby":`${u}-tab`,children:$()})]})]})})}):a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your current plan does not include access to Analytics. Upgrade your subscription to unlock this feature and gain valuable insights."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade Your Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Access detailed performance metrics, user engagement data, and more by upgrading to a higher tier."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>n("/billing"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>n("/dashboard"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Dashboard"})]})]})})})}function SW(){const[e,t]=b.useState(!1),[r,n]=b.useState(null);return{createCheckoutSession:async i=>{t(!0),n(null);try{const{priceId:o,mode:l,successUrl:c,cancelUrl:u}=i,d=`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,f=`${window.location.origin}/billing`,{data:h,error:m}=await Q.functions.invoke("stripe-checkout",{body:{price_id:o,mode:l,success_url:c||`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:u||f}});return m?(console.error("Checkout error:",m),n(m.message||"Failed to create checkout session"),{error:m.message||"Failed to create checkout session"}):h!=null&&h.url?(console.log(" Checkout session created, redirecting to:",h.url),window.location.href=h.url,{sessionId:h.sessionId,url:h.url}):(n("No checkout URL received"),{error:"No checkout URL received"})}catch(o){console.error("Checkout error:",o);const l=o.message||"An unexpected error occurred";return n(l),{error:l}}finally{t(!1)}},loading:e,error:r}}function kW(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{var f,h;if(!e){l(!1);return}l(!0),u(null);try{t(" Fetching billing data for user:",e.id);const{data:m,error:p}=await Q.functions.invoke("fetch-payment-methods",{headers:{Authorization:`Bearer ${(f=(await Q.auth.getSession()).data.session)==null?void 0:f.access_token}`}});p?(console.error(" Error fetching payment methods:",p),console.warn(" Payment methods not available, continuing without them"),n([])):(t(" Payment methods fetched:",(m==null?void 0:m.length)||0),n(m||[]));const{data:x,error:y}=await Q.functions.invoke("fetch-invoices",{headers:{Authorization:`Bearer ${(h=(await Q.auth.getSession()).data.session)==null?void 0:h.access_token}`}});y?(console.error(" Error fetching invoices:",y),console.warn(" Invoices not available, continuing without them"),i([])):(t(" Invoices fetched:",(x==null?void 0:x.length)||0),i(x||[]))}catch(m){console.error(" Failed to fetch billing data:",m),u("Billing data temporarily unavailable"),n([]),i([])}finally{l(!1)}},[e,t]);return b.useEffect(()=>{d()},[d]),{paymentMethods:r,invoices:s,loading:o,error:c,refreshBillingData:d}}function PW(){var F;const{user:e}=ge(),{createCheckoutSession:t,loading:r}=SW(),{subscription:n,orders:s,loading:i,error:o,cancelCurrentSubscription:l}=W0(),{invoices:c,paymentMethods:u,loading:d,error:f}=kW(),[h,m]=b.useState(null),[p,x]=b.useState(!1),[y,v]=b.useState(!1),[g,w]=b.useState(null),[_,j]=b.useState("month"),N=n!=null&&n.subscription_id?n:null,S=N==null?void 0:N.price_id,k=Ip.find(I=>I.priceId===S);console.log(" Billing Debug - Current subscription data:",{hasCurrentSubscription:!!N,subscriptionStatus:N==null?void 0:N.subscription_status,cancelAtPeriodEnd:N==null?void 0:N.cancel_at_period_end,subscriptionId:N==null?void 0:N.subscription_id,priceId:S,foundProduct:!!k}),console.log(" Billing Debug - Billing data:",{invoicesCount:c.length,ordersCount:s.length,billingLoading:d,billingError:f,invoices:c.slice(0,2),paymentMethods:u.slice(0,1)});const E=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end);console.log(" Billing Debug - Cancel button condition:",{statusIsActive:(N==null?void 0:N.status)==="active",notCancelAtPeriodEnd:!(N!=null&&N.cancel_at_period_end),shouldShowCancelButton:E});const P=Ip.filter(I=>I.interval===_),D=!N||((F=e==null?void 0:e.subscription)==null?void 0:F.plan)==="free",O=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end),z=async I=>{m(I);try{await t({priceId:I,mode:"subscription"})}catch(C){console.error("Checkout error:",C)}finally{m(null)}},R=async()=>{v(!0),w(null);try{const I=await l();I.success?x(!1):w(I.error||"Failed to cancel subscription")}catch(I){w(I.message||"An unexpected error occurred")}finally{v(!1)}},B=[{key:"id",header:"Invoice",render:I=>a.jsxs("div",{className:"font-medium text-gray-900",children:["#",I.id.substring(0,8),"..."]})},{key:"created",header:"Date",render:I=>a.jsx("span",{className:"text-sm text-gray-900",children:xa(I.created)})},{key:"amount_due",header:"Amount",render:I=>a.jsx("span",{className:"font-medium text-gray-900",children:Ko(I.amount_due/100,I.currency)})},{key:"status",header:"Status",render:I=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.status==="paid"?"bg-green-100 text-green-800":I.status==="open"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:I.status.charAt(0).toUpperCase()+I.status.slice(1)})},{key:"actions",header:"",render:I=>a.jsx("div",{className:"flex justify-end",children:I.invoice_pdf&&a.jsx("a",{href:I.invoice_pdf,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Download Invoice",children:a.jsx(hb,{className:"h-4 w-4"})})}),className:"text-right"}];return i?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading billing information..."})}):o&&o.includes("does not exist")?a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsx(Ue,{type:"warning",title:"Billing Setup Required",message:"Billing features are being set up. Please contact support if this persists.",className:"mb-6"})})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),a.jsx("p",{className:"text-gray-600",children:"Manage your subscription and view billing history."})]}),o&&a.jsx(Ue,{type:"error",message:o,className:"mb-6"}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Subscription"}),N&&k?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:k.name}),k.interval==="year"?a.jsx(ds,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Ki,{className:"h-5 w-5 text-blue-500"})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:k.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Ko(k.price,k.currency),a.jsxs("span",{className:"text-lg font-normal text-gray-600",children:["/",k.interval]})]}),N.current_period_end&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:N.cancel_at_period_end?`Ends on: ${xa(N.current_period_end)}`:`Next billing: ${xa(N.current_period_end)}`})]})]}),N.payment_method_last4&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mt-2",children:[a.jsx(sd,{className:"h-4 w-4"}),a.jsxs("span",{children:[N.payment_method_brand,"  ",N.payment_method_last4]})]})]}),a.jsxs("div",{className:"text-right",children:[N.subscription_status==="active"&&N.cancel_at_period_end?a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-500"}),a.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["Ending ",xa(N.current_period_end)]})]}):a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${N.subscription_status==="active"?"bg-green-500":"bg-yellow-500"}`}),a.jsx("span",{className:`text-sm font-medium capitalize ${N.subscription_status==="active"?"text-green-600":"text-yellow-600"}`,children:N.subscription_status})]}),N.subscription_status==="active"&&!N.cancel_at_period_end&&a.jsx("button",{onClick:()=>x(!0),className:"text-sm text-red-600 hover:text-red-700 transition-colors duration-200 mt-2",children:"Downgrade to Free"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Pn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Subscription"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You're currently on the free plan. Upgrade to unlock premium features."})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pricing"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start for free. Upgrade as you go."}),a.jsxs("div",{className:"flex items-center justify-center space-x-1 bg-gray-100 rounded-lg p-1 w-fit mx-auto mb-4",children:[a.jsx("button",{onClick:()=>j("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>j("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="year"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Yearly"})]}),_==="year"&&a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Save 17% on a yearly subscription"})]}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${D?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[D&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Free"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:"0"}),a.jsx("span",{className:"text-gray-600",children:"/month"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Perfect for getting started"})]}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic quiz features"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Limited question access"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic progress tracking"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Up to 5 team members"})]})]}),a.jsx("button",{onClick:()=>O?x(!0):void 0,disabled:D||!O,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${D?"bg-gray-100 text-gray-500 cursor-not-allowed":O?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:D?a.jsx("span",{children:"Current Plan"}):O?a.jsx("span",{children:"Downgrade to Free"}):a.jsx("span",{children:"Already Downgrading"})})]}),P.map(I=>{const C=S===I.priceId,T=h===I.priceId,A=_==="year";return a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${C?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[A&&!C&&_==="year"&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-indigo-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Best Value"})}),C&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_==="year"?"Pro Yearly":"Pro"}),I.interval==="year"?a.jsx(ds,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Ki,{className:"h-5 w-5 text-blue-500"}),A&&a.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-full",children:"POPULAR"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:Ko(I.price,I.currency)}),a.jsxs("span",{className:"text-gray-600",children:["/",_==="year"?"year":"month"]}),_==="year"&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Ko(I.price/12,I.currency)," per month"]})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.description})]}),a.jsx("ul",{className:"space-y-2 mb-6",children:I.features.map(L=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:L})]},L))}),a.jsx("button",{onClick:()=>z(I.priceId),disabled:C||T||r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${C?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"}`,children:T?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):C?a.jsx("span",{children:"Current Plan"}):a.jsxs("span",{children:["Upgrade to ",I.name]})})]},I.id)})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billing History"}),f&&a.jsx(Ue,{type:"warning",message:`${f}. Stripe billing functions may not be deployed yet.`,className:"mb-4"}),!1,c.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Invoices"}),a.jsx(sn,{columns:B,data:c,loading:d,emptyState:{title:"No Invoices",description:"No invoices found for your account."}})]}):s.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Orders"}),a.jsx("div",{className:"space-y-3",children:s.map(I=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Order #",I.order_id]}),a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${I.payment_status==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.payment_status})]}),a.jsx("div",{className:"text-sm text-gray-600",children:new Date(I.order_date).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:Ko(I.amount_total/100,I.currency)}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-700",children:a.jsx(hb,{className:"h-4 w-4"})})]})]},I.order_id))})]}):d?a.jsx(Lt,{text:"Loading billing history...",className:"py-8"}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(sd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Billing History"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your invoices and billing history will appear here once you make a purchase."}),N&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," You have an active subscription, but billing history may take a few minutes to appear. If you don't see invoices after 10 minutes, please contact support."]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-8",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Billing Information"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"All subscriptions are managed through Stripe. You can cancel or modify your subscription at any time. Changes will take effect at the end of your current billing period."})]})]})}),a.jsxs(kn,{isOpen:p,onClose:()=>{x(!1),w(null)},title:"Downgrade to Free Plan",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{x(!1),w(null)},disabled:y,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Keep Subscription"}),a.jsx("button",{onClick:R,disabled:y,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Downgrade to Free"})]})})]}),children:[g&&a.jsx(Ue,{type:"error",message:g,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Are you sure you want to downgrade to the free plan?"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Your subscription will remain active until the end of your current billing period (",N!=null&&N.current_period_end?xa(N.current_period_end):"end of period","), after which you'll be moved to the free plan."]})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"You will lose access to:"}),a.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:k==null?void 0:k.features.map(I=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Ln,{className:"h-3 w-3 text-red-600"}),a.jsx("span",{children:I})]},I))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:[" Your subscription will continue until ",N!=null&&N.current_period_end?xa(N.current_period_end):"the end of your billing period"]}),a.jsx("li",{children:" You'll keep all premium features until then"}),a.jsx("li",{children:" After that, you'll be automatically moved to the free plan"}),a.jsx("li",{children:" You can resubscribe at any time to regain premium features"})]})]})]})]})]})})}class m1 extends ae.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("BillingSuccess Error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ot,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Completed!"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Your payment was processed successfully. Please check your dashboard for updated subscription details."}),a.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]})})}):this.props.children}}function EW({sessionId:e,onDashboardClick:t,onBillingClick:r,processingState:n}){return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:`h-16 w-16 rounded-full flex items-center justify-center mx-auto mb-6 ${n==="error"?"bg-yellow-100":"bg-green-100"}`,children:n==="error"?a.jsx(tn,{className:"h-8 w-8 text-yellow-600"}):a.jsx(Ot,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n==="error"?"Payment Received!":"Payment Successful!"}),a.jsxs("p",{className:"text-gray-600 mb-8",children:[n==="processing"&&"Your payment is being processed. Subscription details will be available shortly.",n==="complete"&&"Thank you for your purchase! Your subscription has been activated and you now have access to all the premium features.",n==="error"&&"Your payment was successful, but subscription details are still being processed. If you don't see your subscription in a few minutes, please contact support."]}),e&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Session ID:"})," ",e.substring(0,20),"..."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(sM,{className:"h-4 w-4"}),a.jsx("span",{children:"Go to Dashboard"})]}),a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("span",{children:"View Billing"}),a.jsx(hS,{className:"h-4 w-4"})]})]})]})})})}function CW(){return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing your payment..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your subscription."})]})})}function AW(){const[e]=FN(),t=_t(),{refreshUser:r,user:n}=ge(),{forceRefresh:s}=W0(),[i,o]=b.useState(!0),[l,c]=b.useState("processing"),u=e.get("session_id");b.useEffect(()=>{let h=0;const m=3;let p=!1;const x=async()=>{if(!p){h++;try{console.log(` Attempt ${h}/${m}: Refreshing user data after payment`);const[v]=await Promise.all([r(),s()]);if(v){p=!0,c("complete"),o(!1),console.log(" User and subscription data refreshed successfully after payment");return}else console.warn(" User refresh returned null, but continuing...")}catch(v){console.error(` Attempt ${h} failed:`,v)}if(h>=m)console.error(" Max attempts reached, subscription may still be processing"),p=!0,c("error"),o(!1);else{const v=Math.pow(2,h)*1e3;console.log(` Retrying in ${v}ms...`),setTimeout(x,v)}}},y=setTimeout(x,2e3);return()=>{clearTimeout(y),p=!0}},[]),b.useEffect(()=>{u&&console.log(" Payment completed successfully, session ID:",u)},[u]);const d=()=>{console.log(" Navigating to dashboard"),t("/dashboard")},f=()=>{console.log(" Navigating to billing"),t("/billing")};return i?a.jsx(m1,{children:a.jsx(CW,{})}):a.jsx(m1,{children:a.jsx(EW,{sessionId:u,onDashboardClick:d,onBillingClick:f,processingState:l})})}function TW(){var Z;ge();const{user:e}=ge(),{teamMembers:t,teamInvitations:r,teamStats:n,loading:s,error:i,setError:o,inviteMember:l,suspendMember:c,reinstateMember:u,resendInvitation:d,cancelInvitation:f,generateInvitationLink:h,getRoleIcon:m}=$S(),[p,x]=b.useState(""),[y,v]=b.useState(!1),[g,w]=b.useState(!1),[_,j]=b.useState(""),[N,S]=b.useState("member"),[k,E]=b.useState(""),[P,D]=b.useState(null),[O,z]=b.useState("members"),[R,B]=b.useState(null),[F,I]=b.useState(null),C=ae.useMemo(()=>t.filter(W=>{const te=W.user.name.toLowerCase().includes(p.toLowerCase()),H=W.user.email!=="Email restricted"&&W.user.email.toLowerCase().includes(p.toLowerCase());return te||H}),[t,p]),T=ae.useMemo(()=>sI(e),[e]),A=ae.useMemo(()=>iI(e),[e]),L=ae.useCallback(async()=>{const W=await l(_,N);W.success&&W.invitationLink?(E(W.invitationLink),w(!0),j(""),S("member"),v(!1),o(null)):o(W.error||"Failed to send invitation")},[l,_,N,E,w,j,S,v,o]),q=ae.useCallback(async(W,te)=>{if(!confirm(`Are you sure you want to suspend ${te}? They will be logged out and unable to access the team.`))return;B(W);const H=await c(W);H.success||o(H.error||"Failed to suspend member"),B(null)},[c,o]),ee=ae.useCallback(async(W,te)=>{if(!confirm(`Are you sure you want to reinstate ${te}? They will regain access to the team.`))return;I(W);const H=await u(W);H.success||o(H.error||"Failed to reinstate member"),I(null)},[u,o]),ne=ae.useCallback(async(W,te)=>{try{await navigator.clipboard.writeText(W),D(te),setTimeout(()=>D(null),2e3)}catch(H){console.error("Failed to copy link:",H);const De=document.createElement("textarea");De.value=W,document.body.appendChild(De),De.select(),document.execCommand("copy"),document.body.removeChild(De),D(te),setTimeout(()=>D(null),2e3)}},[]),Y=ae.useCallback(async()=>{try{await navigator.clipboard.writeText(k),D("modal"),setTimeout(()=>D(null),2e3)}catch(W){console.error("Failed to copy link:",W);const te=document.createElement("textarea");te.value=k,document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te),D("modal"),setTimeout(()=>D(null),2e3)}},[k]),ve=ae.useCallback(async W=>{const te=await d(W);te.success||o(te.error||"Failed to resend invitation")},[d,o]),je=ae.useCallback(async W=>{const te=await f(W);te.success||o(te.error||"Failed to cancel invitation")},[f,o]),Et=((Z=e==null?void 0:e.planSettings)==null?void 0:Z.max_team_members)||5;return e!=null&&e.teamId?a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your team members and invitations."})]}),T&&a.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(bM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invite Member"})]})]}),i&&a.jsx(Ue,{type:"error",message:i,className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(He,{title:"Total Members",value:n.totalMembers,icon:Ge,iconColor:"text-indigo-600",subtitle:`of ${Et} max`}),a.jsx(He,{title:"Admins",value:n.admins,icon:_n,iconColor:"text-blue-600"}),a.jsx(He,{title:"Pending Invites",value:n.pendingInvites,icon:Ie,iconColor:"text-yellow-600"}),a.jsx(He,{title:"Active Members",value:n.activeMembers,icon:Dt,iconColor:"text-green-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8 px-6",children:[a.jsxs("button",{onClick:()=>z("members"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${O==="members"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Team Members (",t.length,")"]}),A&&a.jsxs("button",{onClick:()=>z("invitations"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${O==="invitations"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Invitations (",r.length,")"]})]})}),a.jsxs("div",{className:"p-6",children:[O==="members"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:p,onChange:W=>x(W.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})}),T?a.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ds,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("p",{className:"font-medium",children:"Enhanced Access"}),a.jsxs("p",{children:["As a team ",e==null?void 0:e.teamRole,", you can view and manage all team member details including names and email addresses."]})]})]})}):a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Limited View"}),a.jsx("p",{children:"As a team member, you can only see your own contact details. Team owners and admins can view all member information."})]})]})}),s?a.jsx(Lt,{text:"Loading team members...",className:"py-12"}):C.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Members"}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Your team doesn't have any members yet.":"No members match your search criteria."}),T&&t.length===0&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Invite Your First Member"})]}):a.jsx("div",{className:"space-y-4",children:C.map(W=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:W.user.name.split(" ").map(te=>te[0]).join("")})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:W.user.name}),W.role==="owner"&&a.jsx(ds,{className:"h-4 w-4 text-yellow-500",title:"Team Owner"})]}),a.jsx("p",{className:`text-sm truncate ${W.user.email==="Email restricted"?"text-gray-400 italic":"text-gray-600"}`,children:W.user.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(W.joinedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end",children:[a.jsx(xr,{type:"teamRole",value:W.role,showIcon:!0}),a.jsx(xr,{type:"status",value:W.status}),T&&W.role!=="owner"&&W.userId!==(e==null?void 0:e.id)&&W.status==="active"&&a.jsxs("button",{onClick:()=>q(W.id,W.user.name),disabled:R===W.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Suspend member",children:[R===W.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-red-600"}):a.jsx(bS,{className:"h-3 w-3"}),a.jsx("span",{children:"Suspend"})]}),T&&W.role!=="owner"&&W.userId!==(e==null?void 0:e.id)&&W.status==="suspended"&&a.jsxs("button",{onClick:()=>ee(W.id,W.user.name),disabled:F===W.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Reinstate member",children:[F===W.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-green-600"}):a.jsx(vS,{className:"h-3 w-3"}),a.jsx("span",{children:"Reinstate"})]}),T&&W.role!=="owner"&&W.userId!==(e==null?void 0:e.id)&&a.jsx("div",{className:"relative",children:a.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(hM,{className:"h-5 w-5"})})})]})]},W.id))})]}),O==="invitations"&&A&&a.jsx("div",{className:"space-y-4",children:s?a.jsx(Lt,{text:"Loading invitations...",className:"py-12"}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There are no pending invitations for your team."}),T&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Send an Invitation"})]}):r.map(W=>{const te=h(W.token),H=P===W.id;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Yl,{className:"h-6 w-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:W.email}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Invited ",new Date(W.createdAt).toLocaleDateString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expires ",new Date(W.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(xr,{type:"teamRole",value:W.role,showIcon:!0}),a.jsx(xr,{type:"status",value:"pending"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[a.jsx(aM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invitation Link"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:te,readOnly:!0,className:"flex-1 px-3 py-2 text-sm font-mono bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),a.jsx("button",{onClick:()=>ne(te,W.id),className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${H?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:H?a.jsxs(a.Fragment,{children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(fb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with the invited team member. The link will expire in 7 days."})]}),T&&a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsxs("button",{onClick:()=>ve(W.id),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-indigo-50",disabled:s,children:[a.jsx(pM,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Extend"})]}),a.jsxs("button",{onClick:()=>je(W.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-red-50",disabled:s,children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]},W.id)})})]})]}),a.jsxs(kn,{isOpen:y,onClose:()=>{v(!1),o(null),j(""),S("member")},title:"Invite Team Member",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{v(!1),o(null),j(""),S("member")},className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",disabled:s,children:"Cancel"}),a.jsxs("button",{onClick:L,disabled:!_.trim()||s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[s&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Send Invitation"})]})]}),children:[i&&a.jsx(Ue,{type:"error",message:i,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:_,onChange:W=>j(W.target.value),placeholder:"colleague@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:N,onChange:W=>S(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="admin"?"Can manage team members and settings":"Can access team resources and collaborate"})]})]})]}),a.jsxs(kn,{isOpen:g,onClose:()=>{w(!1),E(""),D(null)},title:"Invitation Sent Successfully",maxWidth:"lg",footer:a.jsx("button",{onClick:()=>{w(!1),E(""),D(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-3",children:[a.jsx(Dt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Invitation created successfully!"})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"You can share this invitation link with the team member. The link will expire in 7 days."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invitation Link"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:k,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),a.jsx("button",{onClick:Y,className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${P==="modal"?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:P==="modal"?a.jsxs(a.Fragment,{children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(fb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(nM,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Share this link"}),a.jsx("p",{children:"Send this link to the invited team member via email, chat, or any other communication method."})]})]})})]})]})]})}):a.jsx(he,{children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You are not currently a member of any team."})]})})})}function OW(){const{user:e}=ge(),t=_t(),[r,n]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(null);b.useEffect(()=>{e&&d()},[e]);const d=async()=>{if(e)try{i(!0),l(null);const{data:m,error:p}=await Q.from("team_invitations").select(`
          id,
          team_id,
          email,
          role,
          invited_by,
          status,
          expires_at,
          created_at,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("email",e.email).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(p){console.error("Error loading invitations:",p),l("Failed to load invitations");return}const x=[...new Set((m||[]).map(_=>_.invited_by))],{data:y,error:v}=await Q.from("user_profiles").select("id, name").in("id",x);v&&console.error("Error loading inviter profiles:",v);const g=new Map((y||[]).map(_=>[_.id,_])),w=(m||[]).map(_=>{var j;return{id:_.id,teamId:_.team_id,email:_.email,role:_.role,invitedBy:_.invited_by,status:_.status,expiresAt:_.expires_at,createdAt:_.created_at,team:{id:_.teams.id,name:_.teams.name,description:_.teams.description},inviter:{name:((j=g.get(_.invited_by))==null?void 0:j.name)||"Unknown User"}}});n(w)}catch(m){console.error("Error loading invitations:",m),l("An unexpected error occurred")}finally{i(!1)}},f=async(m,p)=>{if(e)try{if(u(m),l(null),!r.find(y=>y.id===m)){l("Invitation not found");return}if(p==="accept"){const{data:y,error:v}=await Q.rpc("accept_team_invitation",{p_invitation_id:m});if(v){console.error("Error accepting invitation:",v),l("Failed to accept invitation. Please try again.");return}if(!y.success){l(y.error||"Failed to accept invitation");return}alert("Successfully joined the team!"),window.location.reload()}else{const{error:y}=await Q.from("team_invitations").update({status:"declined"}).eq("id",m);if(y){console.error("Error declining invitation:",y),l("Failed to decline invitation. Please try again.");return}n(v=>v.filter(g=>g.id!==m))}}catch(x){console.error("Error processing invitation:",x),l("An unexpected error occurred")}finally{u(null)}},h=m=>{const p=new Date,y=new Date(m).getTime()-p.getTime(),v=Math.ceil(y/(1e3*60*60*24));return v<=0?"Expired":v===1?"1 day remaining":`${v} days remaining`};return s?a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]})})}):a.jsx(he,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Invitations"}),a.jsx("p",{className:"text-gray-600",children:"Manage your pending team invitations."})]}),o&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:"text-red-700",children:o})]})}),r.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any pending team invitations at the moment."}),a.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]}):a.jsx("div",{className:"space-y-6",children:r.map(m=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m.team.name}),a.jsx(xr,{type:"plan",value:m.team.plan})]}),a.jsxs("p",{className:"text-gray-600 mb-3",children:[a.jsx("strong",{children:m.inviter.name})," invited you to join their team as ",a.jsx(xr,{type:"teamRole",value:m.role}),"."]}),m.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:m.team.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[ae.createElement(cI(m.role),{className:"h-4 w-4 text-gray-500"}),a.jsx(xr,{type:"teamRole",value:m.role})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsxs("span",{children:["Invited ",new Date(m.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{className:h(m.expiresAt).includes("Expired")?"text-red-600":"",children:h(m.expiresAt)})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>f(m.id,"decline"),disabled:c===m.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Decline"})]}),a.jsx("button",{onClick:()=>f(m.id,"accept"),disabled:c===m.id,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:c===m.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsx("span",{children:"Accept"})]})})]})]})},m.id))})]})})}function DW(){const[e]=FN(),t=_t(),{user:r,login:n,signup:s,signupForInvitation:i,refreshUser:o,loading:l,developerLog:c}=ge(),[u,d]=b.useState(null),[f,h]=b.useState(!0),[m,p]=b.useState(null),[x,y]=b.useState("signup"),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(!1),[S,k]=b.useState(!1),[E,P]=b.useState(!1),D=e.get("token"),O=Gi(),z=Gi(),R=O.watch("password");b.useEffect(()=>{if(c(" InvitationAccept: Component mounted with token:",D),!D){c(" InvitationAccept: No token provided in URL"),p("Invalid invitation link"),h(!1);return}B()},[D]),b.useEffect(()=>{c(" InvitationAccept: State change detected"),c(" User state:",r?{id:r.id,email:r.email,name:r.name}:"null"),c(" Invitation state:",u?{id:u.id,email:u.email,teamName:u.team.name}:"null"),c(" Processing state:",j),c(" Auth loading state:",l),r&&u&&!j&&!l&&!S?(c(" InvitationAccept: Conditions met for auto-acceptance - calling handleAcceptInvitation"),k(!0),F()):c(" InvitationAccept: Auto-acceptance conditions not met:",{hasUser:!!r,hasInvitation:!!u,isProcessing:j,isAuthLoading:l,acceptanceAttempted:S})},[r,u,j,l,S]);const B=async()=>{if(D)try{c(" InvitationAccept: Loading invitation with token:",D),h(!0),p(null);const{data:T,error:A}=await Q.from("team_invitations").select(`
          id,
          email,
          role,
          status,
          expires_at,
          invited_by,
          team_id,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("token",D).eq("status","pending").gt("expires_at",new Date().toISOString()).maybeSingle();if(A){c(" InvitationAccept: Error loading invitation:",A),p("Failed to load invitation details");return}if(!T){c(" InvitationAccept: No invitation found for token:",D),p("Invitation not found or has expired");return}c(" InvitationAccept: Invitation data loaded:",T),c(" InvitationAccept: Raw team data from join:",T.teams),c(" InvitationAccept: Raw team_id:",T.team_id);let L=T.teams;if(!L&&T.team_id){c(" InvitationAccept: Loading team data separately for:",T.team_id);const{data:ne,error:Y}=await Q.from("teams").select("id, name, description").eq("id",T.team_id).single();!Y&&ne?(L=ne,c(" InvitationAccept: Team data loaded separately:",L)):c(" InvitationAccept: Failed to load team data:",Y)}if(!L){c(" InvitationAccept: Team data missing from invitation"),p("The team associated with this invitation no longer exists");return}let q="Unknown User";if(T.invited_by){c(" InvitationAccept: Loading inviter profile for:",T.invited_by);const{data:ne,error:Y}=await Q.rpc("get_user_name_by_id",{p_user_id:T.invited_by});!Y&&ne?(q=ne,c(" InvitationAccept: Inviter profile loaded:",q)):c(" InvitationAccept: Could not load inviter name:",Y)}const ee={id:T.id,email:T.email,role:T.role,status:T.status,expiresAt:T.expires_at,team:{id:L.id,name:L.name,description:L.description},inviter:{name:q}};c(" InvitationAccept: Complete invitation data prepared:",ee),d(ee),y("signup")}catch(T){c(" InvitationAccept: Unexpected error loading invitation:",T),p("An unexpected error occurred")}finally{h(!1)}},F=async()=>{if(c(" InvitationAccept: handleAcceptInvitation called"),c(" Current user:",r?{id:r.id,email:r.email}:"null"),c(" Current invitation:",u?{id:u.id,email:u.email}:"null"),!u||!r){c(" InvitationAccept: Cannot accept invitation - missing data:",{hasInvitation:!!u,hasUser:!!r});return}try{if(c(" InvitationAccept: Starting invitation acceptance process"),N(!0),p(null),c(" InvitationAccept: Verifying email match"),c(" Invitation email:",u.email.toLowerCase()),c(" User email:",r.email.toLowerCase()),u.email.toLowerCase()!==r.email.toLowerCase()){c(" InvitationAccept: Email mismatch"),p("This invitation is for a different email address. Please log in with the correct account or contact the team administrator.");return}c(" InvitationAccept: Email verification passed"),c(" InvitationAccept: Skipping client-side team capacity check - will be handled by database function"),c(" InvitationAccept: Calling accept_team_invitation function with ID:",u.id);const{data:T,error:A}=await Q.rpc("accept_team_invitation",{p_invitation_id:u.id});if(A){c(" InvitationAccept: Database function error:",A),p("Failed to accept invitation. Please try again.");return}if(c(" InvitationAccept: Database function response:",T),!T.success){c(" InvitationAccept: Database function returned failure:",T.error),T.error&&T.error.includes("maximum capacity")?(P(!0),p("This team has reached its maximum capacity. Please contact the team owner to increase the team size or remove inactive members.")):p(T.error||"Failed to accept invitation");return}c(" InvitationAccept: Invitation accepted successfully!"),c(" InvitationAccept: Refreshing user profile to get updated team info");try{await o(),c(" InvitationAccept: User profile refreshed after invitation acceptance")}catch(L){c(" Could not refresh user profile after invitation acceptance:",L)}y("processing"),c(" InvitationAccept: Setting redirect timer"),setTimeout(()=>{c(" InvitationAccept: Redirecting to dashboard"),t("/dashboard",{replace:!0})},2e3)}catch(T){c(" InvitationAccept: Unexpected error accepting invitation:",T),p("An unexpected error occurred")}finally{N(!1)}},I=async T=>{if(u){if(c(" InvitationAccept: Signup form submitted"),c(" Signup email:",u.email),c(" Signup name:",T.name),E){p("Cannot create account - the team has reached maximum capacity. Please contact the team owner.");return}try{p(null),c(" InvitationAccept: Calling signupForInvitation function"),await i(u.email,T.password,T.name),c(" InvitationAccept: Signup completed successfully")}catch(A){c(" InvitationAccept: Signup error:",A),A.message&&A.message.toLowerCase().includes("user already registered")?(c(" InvitationAccept: User already exists, switching to login mode"),p("An account with this email already exists. Please sign in instead."),y("login")):p(A.message||"Failed to create account")}}},C=async T=>{if(u){c(" InvitationAccept: Login form submitted"),c(" Login email:",u.email);try{p(null),c(" InvitationAccept: Calling login function"),await n(u.email,T.password),c(" InvitationAccept: Login completed successfully")}catch(A){c(" InvitationAccept: Login error:",A),A.message&&(A.message.toLowerCase().includes("invalid")||A.message.toLowerCase().includes("not found"))?(c(" InvitationAccept: Invalid credentials, switching to signup mode"),p("Invalid credentials. If you don't have an account, please create one."),y("signup")):p(A.message||"Invalid password")}}};return f?(c(" InvitationAccept: Rendering loading state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitation..."})]})})):m&&!u?(c(" InvitationAccept: Rendering error state (no invitation)"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(tn,{className:"h-7 w-7 text-red-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Invalid Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:m})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>t("/"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Home"})})]})})):x==="processing"?(c(" InvitationAccept: Rendering success/processing state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Ot,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to the Team!"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["You have successfully joined ",a.jsx("strong",{children:u==null?void 0:u.team.name}),". Redirecting you to the dashboard..."]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})})]})})):u?(c(" InvitationAccept: Rendering main form in mode:",x),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Team Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"You've been invited to join a team"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-1",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.team.name})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:u.inviter.name})," invited you to join as"," ",a.jsx(xr,{type:"teamRole",value:u.role,showIcon:!0})]})]})]}),u.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:u.team.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Invitation expires: ",new Date(u.expiresAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:[m&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{children:m}),E&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{p(null),P(!1),k(!1),r&&u&&F()},className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm font-medium transition-colors",children:"Try Again"})})]})]})}),x==="signup"&&!E?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Your Account"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Complete your account setup to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:O.handleSubmit(I),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full name"}),a.jsx("input",{id:"name",type:"text",autoComplete:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...O.register("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),O.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...O.register("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),O.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.formState.errors.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:w?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...O.register("confirmPassword",{required:"Please confirm your password",validate:T=>T===R||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>_(!w),children:w?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),O.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.formState.errors.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Creating account..."})]}):"Create Account & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx("button",{onClick:()=>y("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Sign in instead"})]})})]}):E?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800 mb-4",children:[a.jsx(Ge,{className:"h-6 w-6"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Team at Capacity"})]}),a.jsxs("p",{className:"text-yellow-700 mb-4",children:["The team ",a.jsx("strong",{children:u.team.name})," has reached its maximum member limit."]}),a.jsx("p",{className:"text-sm text-yellow-600",children:'Please contact the team owner to increase the team capacity or remove inactive members, then use the "Try Again" button above.'})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign In to Join"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Sign in to your account to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:z.handleSubmit(C),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...z.register("password",{required:"Password is required"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]}),z.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.formState.errors.password.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Signing in..."})]}):"Sign In & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>y("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Create one now"})]})})]})]})]})})):(c(" InvitationAccept: No invitation data available"),null)}function MW({userId:e,startDate:t,endDate:r}){const{developerLog:n}=ge(),[s,i]=b.useState(null),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){n(" useUserAnalytics: No userId provided, skipping data fetch"),l(!1),i(null);return}n(" useUserAnalytics: Starting user analytics fetch for user:",e,"with date range:",t,r),l(!0),u(null);try{n(" useUserAnalytics: Using secure function to fetch user analytics data");const{data:f,error:h}=await Q.rpc("get_user_analytics_data",{p_user_id:e,p_start_date:t==null?void 0:t.toISOString(),p_end_date:r==null?void 0:r.toISOString()});if(h)throw console.error(" Error fetching user analytics data:",h),h;n(" useUserAnalytics: Raw RPC response:",f),n(" useUserAnalytics: RPC response type:",typeof f),n(" useUserAnalytics: RPC response keys:",f?Object.keys(f):"null");let m=null;Array.isArray(f)&&f.length>0?(m=f[0],n(" useUserAnalytics: Extracted data from array:",m)):f&&!Array.isArray(f)?(m=f,n(" useUserAnalytics: Using data directly (not array):",m)):n(" useUserAnalytics: No valid data found in RPC response");const p={totalQuizzesCompleted:Number((m==null?void 0:m.total_quizzes_completed)||0),totalQuestionsAnswered:Number((m==null?void 0:m.total_questions_answered)||0),averageScore:Number((m==null?void 0:m.average_score)||0),totalTimeSpentMinutes:Number((m==null?void 0:m.total_time_spent_minutes)||0),studyStreak:Number((m==null?void 0:m.study_streak)||0),totalPointsEarned:Number((m==null?void 0:m.total_points_earned)||0),totalPossiblePoints:Number((m==null?void 0:m.total_possible_points)||0)};n(" useUserAnalytics: Transformed analytics data:",p),n(" useUserAnalytics: Individual field transformations:",{totalQuizzesCompleted:`${m==null?void 0:m.total_quizzes_completed} -> ${p.totalQuizzesCompleted}`,averageScore:`${m==null?void 0:m.average_score} -> ${p.averageScore}`,totalTimeSpentMinutes:`${m==null?void 0:m.total_time_spent_minutes} -> ${p.totalTimeSpentMinutes}`,studyStreak:`${m==null?void 0:m.study_streak} -> ${p.studyStreak}`}),i(p)}catch(f){console.error(" useUserAnalytics: Error fetching user analytics data:",f),n(" useUserAnalytics: Error details:",{message:f.message,code:f.code,details:f.details,hint:f.hint}),u(f.message||"Failed to load user analytics data"),i(null)}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{const f=setTimeout(()=>{d()},100);return()=>clearTimeout(f)},[d]),{data:s,loading:o,error:c,refreshData:d}}function IW(){var z,R,B,F,I,C,T;const{developerLog:e}=ge(),t=_t(),{user:r}=ge(),{questions:n}=ia(),{getActiveSessionsForUser:s,deleteQuizSession:i}=aa(),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),[h,m]=b.useState(!1),[p,x]=b.useState(null),y=r?s(r.id):[],v=b.useMemo(()=>({startDate:new Date(Date.now()-30*24*60*60*1e3),endDate:new Date}),[]),{data:g,loading:w,error:_}=MW({userId:r==null?void 0:r.id,startDate:v.startDate,endDate:v.endDate});ae.useEffect(()=>{e(" Quiz Center: Analytics data received:",{userAnalytics:g,analyticsLoading:w,analyticsError:_,userId:r==null?void 0:r.id,dateRange:v})},[g,w,_,r==null?void 0:r.id,v,e]);const j=ae.useCallback((A,L)=>L===0?0:Math.round(A/L*100),[]),N=ae.useCallback((A,L)=>L===0?0:Math.round(A/L*100),[]),S=ae.useCallback(A=>{x(A),m(!0)},[]),k=async()=>{if(r)try{u(!0),f(null),e(" Loading recent quiz activities for user:",r.id);const{data:A,error:L}=await Q.from("quiz_sessions").select("id, title, total_points, max_points, completed_at, estimated_minutes, type").eq("user_id",r.id).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(10);if(L)throw console.error(" Error loading recent activities:",L),L;e(" Recent activities loaded:",(A==null?void 0:A.length)||0,"activities"),e(" Quiz Center: Recent activities data:",A),l(A||[])}catch(A){console.error(" Error loading recent activities:",A),f("Failed to load recent quiz activities")}finally{u(!1)}},E=ae.useCallback(async()=>{if(p)try{await i(p),await k(),m(!1),x(null)}catch(A){console.error("Error deleting quiz session:",A)}},[p,i,k]),P=ae.useCallback(A=>{t(`/quiz/runner/${A}`)},[t]);b.useEffect(()=>{r?k():u(!1)},[r]);const D=[{id:"quick-start",title:"Quick Start",description:"Jump into a random quiz with questions from your subscription tier. Perfect for quick practice sessions.",icon:Pn,color:"bg-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",hoverColor:"hover:bg-green-100",features:["Random questions from your tier","90 questions per session","Instant feedback","Mock PBE test experience"],action:"Start Quiz",onClick:()=>t("/quiz/quick-start"),disabled:!((z=r==null?void 0:r.planSettings)!=null&&z.allow_quick_start_quiz),tooltip:(R=r==null?void 0:r.planSettings)!=null&&R.allow_quick_start_quiz?"":"Not available on your current plan"},{id:"create-your-own",title:"Create Your Own",description:"Build custom quizzes by selecting specific books, chapters, and difficulty levels. Tailor your study experience.",icon:ko,color:"bg-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-100",features:["Choose specific Bible books","Select chapter ranges","Set difficulty level","Customize question count"],action:"Create Quiz",onClick:()=>t("/quiz/create-own"),disabled:!((B=r==null?void 0:r.planSettings)!=null&&B.allow_create_own_quiz),tooltip:(F=r==null?void 0:r.planSettings)!=null&&F.allow_create_own_quiz?"":"Not available on your current plan"},{id:"study-schedule",title:"Study Schedule",description:"Follow a structured study plan with progressive difficulty and comprehensive coverage of the material.",icon:Yt,color:"bg-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-100",features:["Structured learning path","Progressive difficulty","Track your progress","Daily study goals"],action:"View Schedule",onClick:()=>t("/schedule"),disabled:!((I=r==null?void 0:r.planSettings)!=null&&I.allow_study_schedule_quiz),tooltip:(C=r==null?void 0:r.planSettings)!=null&&C.allow_study_schedule_quiz?"":"Upgrade to Pro plan to access Study Schedule"}],O=b.useMemo(()=>{const A=n.length,L=(g==null?void 0:g.averageScore)||0,q=(g==null?void 0:g.studyStreak)||0,ee=(g==null?void 0:g.totalTimeSpentMinutes)||0;let ne=0;if(o.length>0){const Et=o.reduce((W,te)=>W+te.total_points,0),Z=o.reduce((W,te)=>W+te.max_points,0);ne=Z>0?Math.round(Et/Z*100):0}const Y=xf(o),ve=o.reduce((Et,Z)=>Et+(Z.estimated_minutes||0),0),je=_||!g;return e(" Quiz Center: Stats calculation debug:",{userAnalytics:g,analyticsError:_,useFallback:je,recentActivitiesCount:o.length,fallbackAverageScore:ne,fallbackStudyStreak:Y,fallbackTimeMinutes:ve,finalValues:{averageScore:je?ne:L,studyStreak:je?Y:q,totalStudyTime:je?ve:ee}}),[{label:"Questions Available",value:A>0?`${A}`:"0",icon:ke},{label:"Average Score",value:`${je?ne:L}%`,icon:it},{label:"Study Streak",value:(je?Y:q)>0?`${je?Y:q} day${(je?Y:q)!==1?"s":""}`:"0 days",icon:zt},{label:"Study Time",value:je?Mt(ve)||"0m":Mt(ee)||"0m",icon:Ie}]},[n.length,o,g,_,e]);return a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Quiz Center"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Practice your Pathfinder Bible Experience knowledge with interactive quizzes."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Stats show your performance over the last 30 days"})]}),a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:O.map(A=>a.jsx(He,{title:A.label,value:w&&A.label==="Study Time"&&!_?"Loading...":A.value,icon:A.icon,iconColor:"text-indigo-600"},A.label))}),y.length>0&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[a.jsx(Wi,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Resume Quiz Sessions"})]}),a.jsx("div",{className:"space-y-4",children:y.map(A=>{const L=N(A.current_question_index,A.questions.length),q=A.results.length,ee=A.questions.length;return y.find(ne=>ne.id===p),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:ae.createElement(gb(A.type),{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:A.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:_S(A.type)}),a.jsx("span",{children:""}),A.type==="study-assignment"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:ao(A.study_items||[])}),a.jsx("span",{children:""})]}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Question ",A.current_question_index+1," of ",ee]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[A.total_points," points earned"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[L,"% complete (",q,"/",ee," answered)"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end flex-shrink-0",children:[a.jsxs("div",{className:"text-right text-sm text-gray-600 flex-shrink-0",children:[a.jsx("div",{children:"Started"}),a.jsx("div",{children:$p(A.created_at)})]}),a.jsx("button",{onClick:()=>S(A.id),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(Hi,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:()=>P(A.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(Wi,{className:"h-4 w-4"}),a.jsx("span",{children:"Resume"})]})]})]},A.id)})})]}),a.jsx(kn,{isOpen:h,onClose:()=>{m(!1),x(null)},title:"Delete Quiz Session",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{m(!1),x(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Delete Session"})]}),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Fn,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 mb-2",children:"Are you sure you want to delete this quiz session?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. All progress and results for this session will be permanently lost."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:D.map(A=>a.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 ${A.borderColor} transition-all duration-200 group ${A.disabled?"opacity-60 cursor-not-allowed":`${A.hoverColor} hover:shadow-md cursor-pointer`}`,children:[A.disabled&&A.tooltip&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-xl z-10",children:a.jsx("span",{className:"text-white text-center p-4 font-semibold text-sm",children:A.tooltip})}),a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:`h-12 w-12 ${A.color} rounded-lg flex items-center justify-center`,children:a.jsx(A.icon,{className:"h-6 w-6 text-white"})}),a.jsx("div",{className:"ml-4",children:a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:A.title})})]}),a.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:A.description}),a.jsx("div",{className:"space-y-2 mb-6",children:A.features.map((L,q)=>a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full mr-3 flex-shrink-0"}),a.jsx("span",{children:L})]},q))}),a.jsxs("button",{onClick:A.onClick,disabled:A.disabled,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 ${A.color} text-white rounded-lg transition-all duration-200 ${A.disabled?"opacity-50 cursor-not-allowed":"hover:opacity-90 group-hover:shadow-lg"}`,children:[a.jsx(io,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:A.action}),a.jsx(hS,{className:"h-4 w-4"})]})]})]},A.id))}),a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Quiz Activity"}),c&&a.jsx(Lt,{text:"Loading recent activities...",className:"py-8"}),d&&a.jsx(Ue,{type:"error",message:d,className:"mb-4"}),!c&&!d&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(zt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Recent Activity"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't completed any quizzes yet. Start your first quiz to see your activity here!"}),((T=r==null?void 0:r.planSettings)==null?void 0:T.allow_quick_start_quiz)&&a.jsx("button",{onClick:()=>t("/quiz/quick-start"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]}):o.map(A=>{const L=j(A.total_points,A.max_points),q=$p(A.completed_at),ee=gb(A.type);return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(ee,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:A.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Completed with ",L,"% accuracy"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[A.total_points,"/",A.max_points," points"]}),A.estimated_minutes>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["~",A.estimated_minutes," min"]})]})]})]})]}),a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap flex-shrink-0",children:q})]},A.id)})})]})]})})}function $W({initialTime:e,onTimeExpired:t,onTimeUpdate:r}){const[n,s]=b.useState(e),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(!1);b.useEffect(()=>{let y;return i&&n>0?y=setInterval(()=>{const v=n-1;s(v),r(v)},1e3):n===0&&i&&(o(!1),d(!0),t()),()=>{y&&clearInterval(y)}},[i,n,t,r]);const f=b.useCallback(()=>{!l&&!u&&(o(!0),c(!0))},[l,u]),h=b.useCallback(y=>{s(y),o(!1),c(!1),d(!1)},[]),m=b.useCallback(()=>{o(!1)},[]),p=b.useCallback(y=>{o(y)},[]),x=b.useCallback(y=>{c(y)},[]);return{timeLeft:n,timerActive:i,timerStarted:l,hasTimeExpired:u,startTimer:f,resetTimer:h,stopTimer:m,setHasTimeExpired:d,setTimerActiveState:p,setTimerStartedState:x}}function zW(e){const[t,r]=b.useState(!0),n=b.useMemo(()=>e?t?{background:"bg-gradient-to-b from-[#1a255b] to-[#0e132f]",card:"bg-transparent",text:"text-white",textSecondary:"text-white/80",border:"border-white/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm",progressBar:"bg-white"}:{background:"bg-[#FAFAFA]",card:"bg-transparent",text:"text-[#1a255b]",textSecondary:"text-[#1a255b]/80",border:"border-[#1a255b]/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-[#1a255b]/20 hover:bg-[#1a255b]/30 text-[#1a255b] backdrop-blur-sm",progressBar:"bg-[#1a255b]"}:{background:"bg-gray-50",card:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-200",button:"bg-indigo-600 hover:bg-indigo-700",timerButton:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700",progressBar:"bg-green-600"},[e,t]);return{isDarkMode:t,themeClasses:n,toggleDarkMode:()=>{r(!t)}}}function LW({isFullScreen:e,isDarkMode:t,currentQuestionIndex:r,totalQuestions:n,progressPercentage:s,timeLeft:i,timerStarted:o,showAnswer:l,themeClasses:c,onBack:u,onToggleFullScreen:d,onToggleDarkMode:f,onStartTimer:h,formatTime:m}){return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"/PBE-logo_600px.png",alt:"Pathfinder Bible Experience",className:"h-24 sm:h-32 md:h-40 w-auto"})}),a.jsxs("div",{className:`text-center ${c.text} hidden sm:block`,children:[a.jsxs("div",{className:"text-sm sm:text-lg font-semibold",children:["Question ",r+1," of ",n]}),a.jsxs("div",{className:"text-xs sm:text-sm opacity-75",children:[s,"% correct so far"]}),a.jsx("div",{className:`w-32 sm:w-64 ${c.timerButton} rounded-full h-2 mt-2 mx-auto`,children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("button",{onClick:h,disabled:o||l,className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ie,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:`font-mono text-sm sm:text-lg ${i<=10?"text-red-300":""}`,children:m(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:`p-2 ${c.text} hover:bg-white/10 rounded-lg transition-all duration-200 backdrop-blur-sm`,title:"Exit full screen",children:a.jsx(dM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}),a.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-4 sm:left-6 z-30",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:f,className:`p-2 sm:p-3 rounded-full ${t?"bg-gray-700 text-yellow-400":"bg-gray-600 text-white"} backdrop-blur-sm transition-all duration-200 hover:scale-110`,title:t?"Switch to light mode":"Switch to dark mode",children:t?a.jsx(yM,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(fM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})})})]}):a.jsxs("div",{className:`${c.card} rounded-xl shadow-sm p-6 mb-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{children:a.jsxs("h1",{className:`text-lg font-semibold ${c.text}`,children:["Question ",r+1," of ",n]})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:h,disabled:o||l,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{className:`font-mono text-lg ${i<=10?"text-red-600":""}`,children:m(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",title:"Enter full screen",children:a.jsx(lM,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})}),a.jsx("div",{className:"text-center mt-4",children:a.jsxs("div",{className:`text-sm ${c.textSecondary}`,children:[s,"% correct so far"]})})]})}function RW({question:e,hasTimeExpired:t,isFullScreen:r,isDarkMode:n,themeClasses:s}){return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 sm:mb-4 ${r?n?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${r?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("h2",{className:`font-semibold ${s.text} leading-relaxed ${r?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.question})]}),t&&a.jsxs("div",{className:`mb-6 p-4 border-2 ${r?"border-red-300 bg-red-500/20":"border-red-200 bg-red-50"} rounded-lg`,children:[a.jsxs("div",{className:`flex items-center justify-center space-x-2 ${r?"text-red-300":"text-red-700"}`,children:[a.jsx(Fn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold text-lg",children:"Time's Up!"})]}),a.jsx("p",{className:`${r?"text-red-200":"text-red-600"} text-sm mt-1`,children:'Click "Show Answer" to reveal the answer and mark your response'})]})]})}const FW=b.memo(RW);function qW({question:e,isFullScreen:t,isDarkMode:r,themeClasses:n}){return a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 ${t?r?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${t?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("div",{className:`text-sm ${n.textSecondary} mb-2`,children:"Answer:"}),a.jsx("div",{className:`font-semibold p-4 rounded-lg ${n.text} ${t?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.answer})]})})}const UW=b.memo(qW);function BW({isFullScreen:e,showAnswer:t,hasTimeExpired:r,themeClasses:n,onShowAnswer:s,onShowQuestion:i,onCorrect:o,onIncorrect:l}){return e?a.jsx("div",{className:"fixed bottom-4 sm:bottom-6 left-0 right-0 z-20 px-4 sm:px-6",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sm:hidden flex flex-col items-center space-y-3",children:[a.jsxs("button",{onClick:i,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Yr,{className:"h-5 w-5"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex space-x-3 w-full max-w-xs",children:[a.jsx("button",{onClick:o,className:"bg-[#58c16c] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Dt,{className:"h-5 w-5"})}),a.jsx("button",{onClick:l,className:"bg-[#F93F54] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Ln,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-8",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Dt,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Correct"})]}),a.jsxs("button",{onClick:i,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Yr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Ln,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Incorrect"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Jr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})}),a.jsx("div",{className:"hidden sm:flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Jr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})]})}):a.jsx("div",{className:"flex justify-center mt-6",children:t?a.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[a.jsxs("button",{onClick:i,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2 mx-auto mb-6",children:[a.jsx(Yr,{className:"h-4 w-4"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Dt,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Correct"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Ln,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Incorrect"})]})]})]}):a.jsxs("button",{onClick:s,className:"bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(Jr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})}function QW({title:e,stats:t,isFullScreen:r,themeClasses:n,onRestart:s,onBack:i,formatTime:o}){return a.jsx("div",{className:`min-h-screen ${n.background}`,children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:`${n.card} rounded-xl shadow-sm p-8 text-center border ${n.border}`,children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(zt,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:`text-2xl font-bold ${n.text} mb-4`,children:"Quiz Completed!"}),a.jsxs("p",{className:`${n.textSecondary} mb-8`,children:["Great job! Here's how you performed on your ",e.toLowerCase(),"."]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:`bg-gray-50 ${r?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[t.accuracy,"%"]}),a.jsx("div",{className:`text-sm ${n.textSecondary}`,children:"Accuracy"}),a.jsxs("div",{className:`text-xs ${n.textSecondary} mt-1`,children:[t.correctAnswers," of ",t.totalQuestions," correct"]})]}),a.jsxs("div",{className:`bg-gray-50 ${r?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.totalPointsEarned}),a.jsx("div",{className:`text-sm ${n.textSecondary}`,children:"Points Earned"}),a.jsxs("div",{className:`text-xs ${n.textSecondary} mt-1`,children:["of ",t.totalPossiblePoints," possible"]})]}),a.jsxs("div",{className:`bg-gray-50 ${r?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:o(t.averageTime)}),a.jsx("div",{className:`text-sm ${n.textSecondary}`,children:"Avg Time"}),a.jsx("div",{className:`text-xs ${n.textSecondary} mt-1`,children:"per question"})]}),a.jsxs("div",{className:`bg-gray-50 ${r?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.totalPointsEarned/t.totalPossiblePoints*100),"%"]}),a.jsx("div",{className:`text-sm ${n.textSecondary}`,children:"Score"}),a.jsx("div",{className:`text-xs ${n.textSecondary} mt-1`,children:"overall performance"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:s,className:"flex items-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:[a.jsx(Wi,{className:"h-4 w-4"}),a.jsx("span",{children:"Take Another Quiz"})]}),a.jsxs("button",{onClick:i,className:"flex items-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})]})]})})})})}function VW({isOpen:e,questionPoints:t,selectedPoints:r,onPointsChange:n,onConfirm:s,onCancel:i,themeClasses:o,isFullScreen:l}){return a.jsxs(kn,{isOpen:e,onClose:i,title:"Partial Credit",themeClasses:o,isFullScreen:l,footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 border ${o.border} ${l&&window.innerWidth<640?"text-gray-900":o.text} rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200`,children:"Cancel"}),a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Confirm"})]}),children:[a.jsxs("p",{className:`${o.textSecondary||"text-gray-600"} mb-6`,children:["This question is worth ",t," points. How many points did you earn?"]}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:t},(c,u)=>a.jsx("button",{onClick:()=>n(u),className:`p-2 rounded-lg border-2 transition-colors duration-200 ${r===u?"border-indigo-500 bg-indigo-50 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-200":"border-gray-200 hover:border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray dark:hover:border-gray-500"}`,children:u},u))})]})}function yh({quizSessionId:e,backUrl:t,onSessionDeleted:r}){const n=_t(),s=$N(),{user:i,developerLog:o}=ge(),{loadQuizSession:l,updateQuizSession:c,deleteQuizSession:u}=aa(),d=b.useRef(null),f=s.quizSessionId||e,h=t||"/quiz",[m,p]=b.useState(null),[x,y]=b.useState(!0),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(0),[S,k]=b.useState(!1),[E,P]=b.useState(!1);b.useState(!1);const{isDarkMode:D,themeClasses:O,toggleDarkMode:z}=zW(E),{timeLeft:R,timerActive:B,timerStarted:F,hasTimeExpired:I,startTimer:C,resetTimer:T,stopTimer:A,setHasTimeExpired:L,setTimerActiveState:q,setTimerStartedState:ee}=$W({initialTime:30,onTimeExpired:()=>{ne({timer_active:!1,has_time_expired:!0})},onTimeUpdate:oe=>{f&&c(f,{time_left:oe})}});b.useEffect(()=>{if(!f){console.error("No quiz session ID provided"),n("/quiz");return}try{const oe=l(f);if(!oe){console.error("Quiz session not found"),setTimeout(()=>{n(h)},2e3);return}p(oe),oe.status==="completed"?g(!0):(_(oe.show_answer),T(oe.time_left),L(oe.has_time_expired),q(oe.timer_active),ee(oe.timer_started),oe.show_answer||(d.current=Date.now()))}catch(oe){console.error("Error loading quiz session:",oe),setTimeout(()=>{n(h)},2e3)}finally{y(!1)}},[f,l,n,h,T,L,q,ee]);const ne=oe=>{if(!m)return;const M={...m,...oe};p(M),c(f,oe)},Y=async(oe,M,$,U,K)=>{if(!(!i||!m))try{o(" Logging question result to database:",{quiz_session_id:m.id,user_id:i.id,question_id:oe,points_earned:M,total_points_possible:$,time_spent:U,is_correct:K});const{error:G}=await Q.from("quiz_question_logs").insert([{quiz_session_id:m.id,user_id:i.id,question_id:oe,points_earned:M,total_points_possible:$,time_spent:U,answered_at:new Date().toISOString(),is_correct:K}]);G?o(" Error logging question result:",G):o(" Question result logged successfully")}catch(G){o(" Unexpected error logging question result:",G)}},ve=()=>{_(!0),A(),L(!1),ne({show_answer:!0,timer_active:!1,has_time_expired:!1})},je=()=>{if(!m)return;const oe=m.questions[m.current_question_index];_(!1);const M=(oe==null?void 0:oe.time_to_answer)||30;T(M),L(!1),ne({show_answer:!1,time_left:M,timer_active:!1,timer_started:!1,has_time_expired:!1})},Et=async()=>{if(!m)return;const oe=m.questions[m.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0,$={questionId:oe.id,pointsEarned:oe.points,totalPoints:oe.points,timeSpent:M,answeredAt:new Date().toISOString()},U=[...m.results,$],K=m.total_points+oe.points;await Y(oe.id,oe.points,oe.points,M,!0),ne({results:U,total_points:K}),te()},Z=async()=>{if(!m)return;const oe=m.questions[m.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0;if(oe.points>1)k(!0);else{const $={questionId:oe.id,pointsEarned:0,totalPoints:oe.points,timeSpent:M,answeredAt:new Date().toISOString()};await Y(oe.id,0,oe.points,M,!1);const U=[...m.results,$];ne({results:U}),te()}},W=async()=>{if(!m)return;const oe=m.questions[m.current_question_index],M=d.current?Math.floor((Date.now()-d.current)/1e3):0,$={questionId:oe.id,pointsEarned:j,totalPoints:oe.points,timeSpent:M,answeredAt:new Date().toISOString()};await Y(oe.id,j,oe.points,M,!1);const U=[...m.results,$],K=m.total_points+j;ne({results:U,total_points:K}),k(!1),N(0),te()},te=()=>{if(m)if(m.current_question_index<m.questions.length-1){const oe=m.current_question_index+1,M=m.questions[oe],$=(M==null?void 0:M.time_to_answer)||30;_(!1),L(!1),T($),d.current=Date.now(),ne({current_question_index:oe,show_answer:!1,has_time_expired:!1,time_left:$,timer_active:!1,timer_started:!1})}else g(!0),A(),ne({status:"completed",completed_at:new Date().toISOString(),timer_active:!1})},H=()=>{if(!m)return{totalPointsEarned:0,totalPossiblePoints:0,accuracy:0,correctAnswers:0,totalQuestions:0,averageTime:0};const oe=m.results.reduce((G,J)=>G+J.pointsEarned,0),M=m.results.reduce((G,J)=>G+J.totalPoints,0),$=m.results.filter(G=>G.pointsEarned===G.totalPoints).length,U=m.results.length>0?Math.round($/m.results.length*100):0,K=m.results.length>0?Math.round(m.results.reduce((G,J)=>G+J.timeSpent,0)/m.results.length):0;return{totalPointsEarned:oe,totalPossiblePoints:M,accuracy:U,correctAnswers:$,totalQuestions:m.results.length,averageTime:K}},De=()=>{r?(u(f),r()):n(h)},pe=()=>{window.innerWidth<640||P(!E)},Ee=oe=>{const M=Math.floor(oe/60),$=oe%60;return`${M}:${$.toString().padStart(2,"0")}`};if(x)return a.jsx(he,{hideHeaderAndSidebar:E,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading quiz session..."})]})})});if(!m)return a.jsx(he,{hideHeaderAndSidebar:E,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quiz Session Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The quiz session could not be loaded. You will be redirected shortly."}),a.jsx("button",{onClick:()=>n(h),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go Back Now"})]})})});const Le=m.questions[m.current_question_index],at=H(),Je=m.results.length>0?Math.round(at.correctAnswers/m.results.length*100):0;return v?a.jsx(he,{hideHeaderAndSidebar:E,children:a.jsx(QW,{title:m.title,stats:at,isFullScreen:E,themeClasses:O,onRestart:De,onBack:()=>n(h),formatTime:Ee})}):a.jsx(he,{hideHeaderAndSidebar:E,children:a.jsxs("div",{className:`min-h-screen ${O.background} relative overflow-x-hidden`,children:[a.jsx(LW,{isFullScreen:E,isDarkMode:D,currentQuestionIndex:m.current_question_index,totalQuestions:m.questions.length,progressPercentage:Je,timeLeft:R,timerStarted:F,showAnswer:w,themeClasses:O,onBack:()=>n(h),onToggleFullScreen:pe,onToggleDarkMode:z,onStartTimer:C,formatTime:Ee}),a.jsx("div",{className:`${E?"pt-28 sm:pt-40 px-4 sm:px-6 pb-32 sm:pb-32":"p-4 sm:p-6"}`,children:a.jsx("div",{className:`${E?"w-full max-w-none":"max-w-4xl mx-auto"}`,children:a.jsx("div",{className:`${O.card} rounded-xl shadow-sm p-4 sm:p-8 ${E?"w-full":"mx-auto max-w-3xl"} ${E?"":"border "+O.border}`,children:w?a.jsx(UW,{question:Le,isFullScreen:E,isDarkMode:D,themeClasses:O}):a.jsx(FW,{question:Le,hasTimeExpired:I,isFullScreen:E,isDarkMode:D,themeClasses:O})})})}),a.jsx(BW,{isFullScreen:E,showAnswer:w,hasTimeExpired:I,themeClasses:O,onShowAnswer:ve,onShowQuestion:je,onCorrect:Et,onIncorrect:Z}),a.jsx(VW,{isOpen:S,questionPoints:(Le==null?void 0:Le.points)||0,selectedPoints:j,onPointsChange:N,onConfirm:W,onCancel:()=>k(!1),themeClasses:O,isFullScreen:E})]})})}function WW(){const e=_t(),{user:t,developerLog:r}=ge(),{questions:n,fetchQuestions:s}=ia(),{createQuizSession:i,getActiveSessionsForUser:o}=aa(),[l,c]=b.useState(null),[u,d]=b.useState(!0),[f,h]=b.useState(null),m=b.useRef(!1);b.useEffect(()=>{s()},[s]),b.useEffect(()=>{if(m.current){d(!1);return}if(!t){h("User not authenticated"),d(!1);return}if(l){d(!1);return}if(n.length===0)return;(async()=>{var y,v;m.current=!0,d(!0);try{r(" Checking for existing active quick-start sessions...");const w=o(t.id).find(D=>D.type==="quick-start"&&(D.status==="active"||D.status==="paused"));if(w){r(" Found existing quick-start session, resuming:",w.id),e(`/quiz/runner/${w.id}`);return}r(" No existing quick-start session found, creating new one..."),r(" Initializing quiz session with",n.length,"total questions");const _=((y=t==null?void 0:t.planSettings)==null?void 0:y.question_tier_access)||["free"];r(" User accessible tiers:",_);const j=n.filter(D=>_.includes(D.tier));if(r(" Accessible questions:",j.length),j.length===0){h("No questions available for your subscription tier"),d(!1);return}const N=[...j].sort(()=>.5-Math.random()),S=N.slice(0,Math.min(90,N.length));r(" Selected questions for quiz:",S.length);const k=S.reduce((D,O)=>D+O.points,0),E=Math.round(S.reduce((D,O)=>D+O.time_to_answer,0)/60);r(" Quiz metadata - Points:",k,"Minutes:",E);const P=await i({type:"quick-start",title:"Quick Start Quiz",description:"Test your Pathfinder Bible Experience knowledge with random questions. Each question has a time limit and point value based on difficulty.",user_id:t.id,team_id:t.teamId,questions:S,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((v=S[0])==null?void 0:v.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,estimated_minutes:E});r(" Quiz session created with ID:",P),c(P),e(`/quiz/runner/${P}`)}catch(g){r(" Error initializing quiz session:",g),h(g instanceof Error?g.message:"Failed to create quiz session"),m.current=!1,d(!1)}})()},[t,n,i,o,e]);const p=()=>{c(null),window.location.href="/quiz"};return u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Preparing your quiz..."})]})}):f?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-600 text-xl",children:""})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Start Quiz"}),a.jsx("p",{className:"text-gray-600 mb-4",children:f}),a.jsx("button",{onClick:()=>window.location.href="/quiz",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Back to Quiz Center"})]})}):l?a.jsx(yh,{quizSessionId:l,backUrl:"/quiz",onSessionDeleted:p}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Starting quiz session..."})]})})}function KW(){var B,F,I;const e=_t(),{user:t}=ge(),{questions:r,loading:n,fetchQuestions:s}=ia(),{createQuizSession:i}=aa(),[o,l]=b.useState(null);b.useEffect(()=>{t&&t.planSettings&&!t.planSettings.allow_create_own_quiz&&e("/quiz",{replace:!0})},[t,e]);const[c,u]=b.useState([]),[d,f]=b.useState({}),[h,m]=b.useState(20);b.useEffect(()=>{s()},[s]);const p=ae.useMemo(()=>jS(r),[r]),x=ae.useCallback(()=>{var A;if(c.length===0)return[];let C=[];return c.forEach(L=>{const q=d[L]||[];if(q.length>0){const ee=r.filter(ne=>ne.book_of_bible===L&&q.includes(ne.chapter));C=[...C,...ee]}}),C=Ma(C,((A=t==null?void 0:t.subscription)==null?void 0:A.plan)||"free"),[...C].sort(()=>.5-Math.random()).slice(0,Math.min(h,C.length))},[c,d,r,(B=t==null?void 0:t.subscription)==null?void 0:B.plan,h]),y=ae.useCallback(()=>{if(c.length===0)return 0;let C=0;return c.forEach(T=>{var L;const A=d[T]||[];if(A.length>0){const q=r.filter(ee=>ee.book_of_bible===T&&A.includes(ee.chapter));C+=Ma(q,((L=t==null?void 0:t.subscription)==null?void 0:L.plan)||"free").length}}),C},[c,d,r,(F=t==null?void 0:t.subscription)==null?void 0:F.plan]),v=ae.useCallback(()=>c.length===0?"Custom Quiz":c.length===1?`${c[0]} Quiz`:c.length===2?`${c[0]} & ${c[1]} Quiz`:`Multi-Book Quiz (${c.length} books)`,[c]),g=x(),w=ae.useCallback(()=>{if(c.length===0)return"Custom quiz";const C=Object.values(d).reduce((A,L)=>A+L.length,0);return`Custom quiz covering ${c.length<=2?c.join(" & "):`${c.slice(0,2).join(", ")} and ${c.length-2} more`} with ${C} chapters and ${g.length} questions.`},[c,d,g.length]),j=(()=>{var C;return((C=t==null?void 0:t.planSettings)==null?void 0:C.max_questions_custom_quiz)||20})(),N=((I=t==null?void 0:t.subscription)==null?void 0:I.plan)||"free",S=ae.useCallback(C=>{u(T=>{const A=T.includes(C)?T.filter(L=>L!==C):[...T,C];return A.includes(C)||f(L=>{const q={...L};return delete q[C],q}),A})},[]),k=ae.useCallback((C,T)=>{f(A=>{const L=A[C]||[],q=L.includes(T)?L.filter(ee=>ee!==T):[...L,T];return{...A,[C]:q}})},[]),E=ae.useCallback(C=>{const T=Va(C,r),L=(d[C]||[]).length===T.length;f(q=>({...q,[C]:L?[]:T}))},[r,d]),P=y(),D=ae.useCallback(async()=>{var q;if(g.length===0||!t)return;const C=g.reduce((ee,ne)=>ee+ne.points,0),T=Math.round(g.reduce((ee,ne)=>ee+ne.time_to_answer,0)/60),A=v(),L=w();try{const ee=await i({type:"custom",title:A,description:L,user_id:t.id,team_id:t.teamId,questions:g,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((q=g[0])==null?void 0:q.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:C,estimated_minutes:T});l(ee)}catch(ee){console.error("Error creating quiz session:",ee)}},[g,t,v,w,i]),O=Math.round(g.reduce((C,T)=>C+T.time_to_answer,0)/60),z=g.reduce((C,T)=>C+T.points,0),R=()=>{l(null)};return o?a.jsx(yh,{quizSessionId:o,backUrl:"/quiz",onSessionDeleted:R}):n?a.jsx(he,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-6",children:a.jsx(oM,{className:"h-6 w-6 text-blue-600 animate-spin"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading Questions..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the available questions."})]})]})})})}):a.jsx(he,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Qa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Own Quiz"}),a.jsx("p",{className:"text-gray-600",children:"Customize your study experience by selecting specific books and chapters."})]})]}),r.length===0&&!n&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-900",children:"No Questions Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No questions were found in the database. Please check if questions have been added to the system."})]})]})}),p.length===0&&r.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Loading Books"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Analyzing available Bible books from the question database..."})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[N==="enterprise"?a.jsx(ds,{className:"h-5 w-5 text-purple-600"}):N==="pro"?a.jsx(Ki,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 capitalize",children:[N," Plan"]}),a.jsx("div",{className:"text-sm text-gray-600",children:N==="enterprise"?"Unlimited questions per quiz":`Up to ${j} questions per quiz`})]})]}),N==="free"&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Upgrade Plan"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Bible Books"}),p.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No books available"}),a.jsx("p",{className:"text-sm",children:"Questions need to be added to the system"})]}):a.jsx("div",{className:"grid grid-cols-1 gap-2",children:p.map(C=>{var A;const T=Ma(r.filter(L=>L.book_of_bible===C),((A=t==null?void 0:t.subscription)==null?void 0:A.plan)||"free").length;return a.jsx("button",{onClick:()=>S(C),className:`p-4 rounded-lg border-2 text-left transition-all duration-200 ${c.includes(C)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:C}),a.jsxs("div",{className:"text-sm text-gray-500",children:[T," questions available"]})]}),c.includes(C)&&a.jsx(Dt,{className:"h-5 w-5 text-blue-600"})]})},C)})}),c.length>0&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[c.length," book",c.length!==1?"s":""," selected"]})]}),c.map(C=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[C," Chapters"]}),a.jsx("button",{onClick:()=>E(C),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:(d[C]||[]).length===Va(C,r).length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 mb-4",children:Va(C,r).map(T=>{var q;const A=Ma(r.filter(ee=>ee.book_of_bible===C&&ee.chapter===T),((q=t==null?void 0:t.subscription)==null?void 0:q.plan)||"free").length,L=(d[C]||[]).includes(T);return a.jsxs("button",{onClick:()=>k(C,T),className:`p-3 rounded-lg border-2 text-center transition-all duration-200 ${L?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,title:`${C} Chapter ${T} - ${A} questions`,children:[a.jsx("div",{className:"font-medium",children:T}),a.jsxs("div",{className:"text-xs text-gray-500",children:[A,"q"]})]},`${C}-${T}`)})})]},C)),P>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Maximum Questions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"range",min:"1",max:Math.min(j,P),value:Math.min(h,P),onChange:C=>m(parseInt(C.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[Math.min(h,P)," question",Math.min(h,P)!==1?"s":""]}),a.jsxs("span",{className:"text-gray-500",children:[P," available"]})]}),h>P&&a.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 text-sm",children:[a.jsx(tn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Not enough questions available. Maximum: ",P]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quiz Preview"}),g.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["~",O]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:z}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Book",c.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Coverage"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Books:"})," ",c.join(", ")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Total Chapters:"})," ",Object.values(d).reduce((C,T)=>C+T.length,0)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Difficulty:"})," Mixed levels"]})]})]}),a.jsxs("button",{onClick:D,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Custom Quiz"})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Select books and chapters to see your quiz preview"})]})]})]})]})]})})})})}function HW(){var F;const{assignmentId:e}=$N(),t=li(),r=_t(),{user:n}=ge(),{questions:s}=ia(),{getAssignmentById:i}=H0(),{createQuizSession:o,loadQuizSession:l,getSessionForAssignment:c,updateQuizSession:u}=aa(),[d,f]=b.useState(null),[h,m]=b.useState(null),[p,x]=b.useState(!0),[y,v]=b.useState(null),[g,w]=b.useState("random"),_=t.state,j=ae.useCallback(()=>{var T;if(!d)return[];const I=(_==null?void 0:_.selectedStudyItems)||d.study_items;let C=wS(s,I);return C=Ma(C,((T=n==null?void 0:n.subscription)==null?void 0:T.plan)||"free"),g==="verse"?[...C].sort((A,L)=>{if(A.book_of_bible!==L.book_of_bible)return A.book_of_bible.localeCompare(L.book_of_bible);if(A.chapter!==L.chapter)return A.chapter-L.chapter;const q=A.verse||1,ee=L.verse||1;return q-ee}):[...C].sort(()=>.5-Math.random())},[d,_==null?void 0:_.selectedStudyItems,s,(F=n==null?void 0:n.subscription)==null?void 0:F.plan,g]),N=ae.useCallback(I=>!I||I.length===0?"":I.map(C=>{if(C.verses&&C.verses.length>0){const T=S(C.verses);return C.chapters.length===1?`${C.book} ${C.chapters[0]}:${T}`:`${C.book} (Ch. ${C.chapters.join(", ")}, Verses: ${T})`}else return C.chapters.length===1?`${C.book} Chapter ${C.chapters[0]}`:`${C.book} (Ch. ${C.chapters.join(", ")})`}).join(", "),[]),S=ae.useCallback(I=>{if(!I||I.length===0)return"";const C=[...I].sort((q,ee)=>q-ee),T=[];let A=C[0],L=C[0];for(let q=1;q<C.length;q++)C[q]===L+1?L=C[q]:(T.push(A===L?`${A}`:`${A}-${L}`),A=L=C[q]);return T.push(A===L?`${A}`:`${A}-${L}`),T.join(", ")},[]),k=ae.useCallback(async()=>{var ee;if(!d||!n)return;const I=j();if(I.length===0){v("No questions available for this assignment");return}const C=I.reduce((ne,Y)=>ne+Y.points,0),T=Math.round(I.reduce((ne,Y)=>ne+Y.time_to_answer,0)/60),A=(_==null?void 0:_.selectedStudyItems)||d.study_items,L=A.length===1?`${A[0].book} Study Quiz`:"Multi-Book Study Quiz",q=`Study quiz for assignment: ${d.description||"Study assignment"}`;try{const ne=await o({type:"study-assignment",title:L,description:q,user_id:n.id,team_id:n.teamId,assignment_id:d.id,questions:I,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((ee=I[0])==null?void 0:ee.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:C,estimated_minutes:T});m(ne)}catch(ne){console.error("Error creating quiz session:",ne),v("Failed to create quiz session")}},[d,n,j,_==null?void 0:_.selectedStudyItems,o]),E=ae.useCallback(()=>{const I=c(e,n.id);I&&m(I.id)},[e,n,c]),P=ae.useCallback(()=>{m(null)},[]);if(ae.useCallback(I=>{if(I.length===0)return"";if(I.length===1){const C=I[0];return`${C.book} (Ch. ${C.chapters.join(", ")})`}return`${I.length} books`},[]),b.useEffect(()=>{n&&n.planSettings&&!n.planSettings.allow_study_schedule_quiz&&r("/quiz",{replace:!0})},[n,r]),b.useEffect(()=>{if(!e||!n){v("Assignment not found"),x(!1);return}(async()=>{try{console.log(" Loading assignment:",e);const C=await i(e);if(!C){v("Assignment not found"),x(!1);return}if(!(C.user_id===n.id||n.teamRole&&["owner","admin"].includes(n.teamRole))){v("You do not have access to this assignment"),x(!1);return}console.log(" Assignment loaded successfully:",C),f(C);const A=c(e,n.id);A&&m(A.id),x(!1)}catch(C){console.error(" Error loading assignment:",C),v("Failed to load assignment"),x(!1)}})()},[e,n,c,i]),p)return a.jsx(he,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading assignment..."})]})})});if(y)return a.jsx(he,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(tn,{className:"h-8 w-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:y}),a.jsx("button",{onClick:()=>r("/schedule"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Return to Schedule"})]})]})})})});if(h)return a.jsx(yh,{quizSessionId:h,backUrl:"/schedule",onSessionDeleted:P});if(!d)return null;const D=(_==null?void 0:_.selectedStudyItems)||d.study_items,O=j(),z=c(e,n.id),R=O.reduce((I,C)=>I+C.points,0),B=Math.round(O.reduce((I,C)=>I+C.time_to_answer,0)/60);return a.jsx(he,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Study Assignment Quiz"}),a.jsx("p",{className:"text-gray-600",children:d.description||"Complete your study assignment"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Assignment Details"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Study Items:"})," ",N(D)]}),(_==null?void 0:_.selectedStudyItems)&&a.jsx("div",{className:"text-blue-600 text-xs mt-2",children:" Custom selection applied"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-purple-900 mb-3",children:"Question Order"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"verse",checked:g==="verse",onChange:I=>w(I.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"By Verse Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in biblical sequence)"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"random",checked:g==="random",onChange:I=>w(I.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Random Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in mixed order)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:O.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["~",B]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:R}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]})]}),O.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No questions available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"There are no questions available for the selected study items with your current subscription tier."})]}):a.jsx("div",{className:"space-y-4",children:z?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[a.jsx(Ie,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Quiz in Progress"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"You have an active quiz session for this assignment. You can resume where you left off."}),a.jsxs("div",{className:"mt-3 text-sm text-yellow-700",children:[a.jsxs("div",{children:["Progress: ",z.results.length," of ",z.questions.length," questions"]}),a.jsxs("div",{children:["Current Score: ",z.total_points," points"]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:E,className:"flex items-center justify-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200 flex-1",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Resume Quiz"})]}),a.jsxs("button",{onClick:k,className:"flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex-1",children:[a.jsx(Wi,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Over"})]})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Study Quiz"})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Study Items"}),a.jsx("div",{className:"space-y-3",children:D.map((I,C)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:I.book}),a.jsx("div",{className:"text-sm text-gray-600",children:I.verses&&I.verses.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Chapters: ",I.chapters.join(", ")]}),a.jsxs("div",{className:"text-purple-600 font-medium",children:["Verses: ",S(I.verses)]})]}):a.jsxs("div",{children:["Chapters: ",I.chapters.join(", ")," (All verses)"]})})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[(()=>{let T=s.filter(A=>A.book_of_bible===I.book&&I.chapters.includes(A.chapter));return I.verses&&I.verses.length>0&&(T=T.filter(A=>{const L=A.verse||1;return I.verses.includes(L)})),T.length})()," questions"]})]},C))})]})]})})})})}function GW(){const{userAchievements:e,achievements:t,loading:r,error:n}=K0();if(r)return a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})});if(n)return a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsx(Ue,{type:"error",message:n,className:"mb-6"})})});const s=new Map(e.map(i=>[i.achievement_id,i]));return a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Achievements"}),a.jsx("p",{className:"text-gray-600",children:"Track your progress and unlock new milestones!"})]}),t.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(zt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Achievements Defined"}),a.jsx("p",{className:"text-gray-600",children:"It looks like there are no achievements configured in the system yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>{var c;const o=s.has(i.id),l=o?(c=s.get(i.id))==null?void 0:c.unlocked_at:null;return a.jsxs("div",{className:we("bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",o?"border-2 border-green-200":"opacity-70 grayscale"),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:we("h-16 w-16 rounded-full flex items-center justify-center",o?"bg-green-100":"bg-gray-100"),children:i.badge_icon_url?a.jsx("img",{src:i.badge_icon_url,alt:i.name,className:"h-10 w-10"}):a.jsx(zt,{className:we("h-8 w-8",o?"text-green-600":"text-gray-400")})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:we("text-lg font-semibold",o?"text-gray-900":"text-gray-600"),children:i.name}),a.jsx("p",{className:we("text-sm",o?"text-gray-600":"text-gray-500"),children:i.description}),o?a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 mt-1",children:[a.jsx(Ot,{className:"h-3 w-3"}),a.jsxs("span",{children:["Unlocked on ",new Date(l).toLocaleDateString()]})]}):a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-1",children:[a.jsx(xS,{className:"h-3 w-3"}),a.jsx("span",{children:"Locked"})]})]})]},i.id)})})]})})}function YW(e){const[t,r]=b.useState(new Date),n=b.useMemo(()=>{const l=t.getFullYear(),c=t.getMonth(),u=Wr(new Date),d=Wr(new Date(l,c,1));Wr(new Date(l,c+1,0));const f=Wr(new Date(d));f.setDate(f.getDate()-d.getDay());const h=[],m=Wr(new Date(f));for(let p=0;p<42;p++){const x=e.find(y=>Cb(y.date,m));h.push({date:new Date(m),isCurrentMonth:m.getMonth()===c,isToday:Cb(m,u),assignment:x}),m.setDate(m.getDate()+1)}return h},[t,e]);return{currentDate:t,setCurrentDate:r,calendarDays:n,navigateMonth:l=>{const c=new Date(t);c.setMonth(c.getMonth()+(l==="next"?1:-1)),r(c)},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}function JW(e){const[t,r]=b.useState([]),[n,s]=b.useState(""),[i,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState(""),[f,h]=b.useState(""),[m,p]=b.useState(""),x=b.useCallback(R=>{const B=e.filter(I=>I.book_of_bible===R);return B.length===0?1:Math.max(...B.map(I=>I.chapter))},[e]),y=b.useCallback((R,B)=>tm(R,B,e),[e]),v=b.useCallback(R=>{o(B=>B.includes(R)?B.filter(F=>F!==R):[...B,R].sort((F,I)=>F-I)),c([])},[]),g=b.useCallback(()=>{if(!n)return;const R=Va(n,e);o(R),c([])},[n,e]),w=b.useCallback(()=>{o([]),c([])},[]),_=b.useCallback(R=>{c(B=>B.includes(R)?B.filter(F=>F!==R):[...B,R].sort((F,I)=>F-I))},[]),j=b.useCallback(()=>{if(!n||i.length!==1)return;const R=tm(n,i[0],e);c(R)},[n,i,e]),N=b.useCallback(()=>{c([]),d(""),h("")},[]),S=b.useCallback(()=>{if(!n||i.length!==1)return;const R=parseInt(u),B=parseInt(f);if(isNaN(R)||isNaN(B)||R>B||R<1)return;const F=tm(n,i[0],e),I=Math.max(...F);if(B>I)return;const C=[];for(let T=R;T<=B;T++)F.includes(T)&&C.push(T);c(C)},[n,i,u,f,e]),k=b.useCallback(R=>{d(R)},[]),E=b.useCallback(R=>{h(R)},[]),P=b.useCallback(()=>{if(!n||i.length===0)return;const R={book:n,chapters:[...i],verses:l.length>0?[...l]:void 0};r(B=>[...B,R]),s(""),o([]),c([]),d(""),h("")},[n,i,l]),D=b.useCallback(R=>{r(B=>B.filter((F,I)=>I!==R))},[]),O=b.useCallback(()=>{r([]),s(""),o([]),c([]),d(""),h(""),p("")},[]),z=b.useCallback((R,B="")=>{r(R),p(B),s(""),o([]),c([]),d(""),h("")},[]);return{studyItems:t,currentBook:n,currentChapters:i,currentVerses:l,startVerseInput:u,endVerseInput:f,description:m,setCurrentBook:s,setDescription:p,toggleChapter:v,selectAllChapters:g,clearChapters:w,toggleVerse:_,selectAllVerses:j,clearVerses:N,selectVerseRange:S,updateStartVerseInput:k,updateEndVerseInput:E,addStudyItem:P,removeStudyItem:D,resetForm:O,initializeForm:z,getMaxChapters:x,getVersesForBookChapter:y}}function XW({currentDate:e,calendarDays:t,dayNames:r,monthNames:n,onNavigateMonth:s,onDateClick:i,onToday:o,formatStudyItems:l,normalizeAssignment:c,getSessionForAssignment:u,onStartQuiz:d,onResumeQuiz:f,user:h,canManageSchedules:m=!1}){const{developerLog:p}=ge();return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:[n[e.getMonth()]," ",e.getFullYear()]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>s("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(pS,{className:"h-5 w-5 text-gray-600"})}),a.jsx("button",{onClick:o,className:"px-3 py-2 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",children:"Today"}),a.jsx("button",{onClick:()=>s("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(L0,{className:"h-5 w-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[r.map(x=>a.jsx("div",{className:"p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:x},x)),t.map((x,y)=>{var w,_,j,N;const v=x.assignment&&h&&u&&u(x.assignment.id,h.id);x.assignment&&p(" Calendar Day Debug:",{date:x.date.toDateString(),assignmentId:(w=x.assignment)==null?void 0:w.id,assignmentUserId:(_=x.assignment)==null?void 0:_.user_id,currentUserId:h==null?void 0:h.id,hasActiveSession:!!v,activeSessionId:v==null?void 0:v.id,assignmentCompleted:(j=x.assignment)==null?void 0:j.completed,isUserAssignment:((N=x.assignment)==null?void 0:N.user_id)===(h==null?void 0:h.id),onStartQuizExists:!!d,onResumeQuizExists:!!f});const g=x.isCurrentMonth&&(m||x.assignment&&x.assignment.user_id===(h==null?void 0:h.id));return a.jsxs("button",{onClick:()=>g?i(x):void 0,onClick:S=>{const k=S.target,E=k.closest(".quiz-action-button");p(" Calendar day clicked:",{date:x.date.toDateString(),isClickable:g,isQuizButtonClick:!!E,targetElement:k.tagName,targetClasses:k.className}),!E&&g&&i(x)},className:`
                relative p-2 sm:p-3 h-20 sm:h-24 text-left rounded-lg transition-all duration-200
                ${x.isCurrentMonth?g?"hover:bg-gray-50 cursor-pointer":"cursor-default":"text-gray-300 cursor-default"}
                ${x.isToday?"bg-indigo-50 border-2 border-indigo-200":"border border-gray-100"}
                ${x.assignment?x.assignment.completed?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":""}
              `,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium ${x.isToday?"text-indigo-600":x.isCurrentMonth?"text-gray-900":"text-gray-300"}`,children:x.date.getDate()}),x.assignment&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:`text-xs font-medium truncate hidden sm:block ${x.assignment.completed?"text-green-700":"text-yellow-700"}`,children:l(c(x.assignment).study_items)}),a.jsx("div",{className:"flex items-center justify-between mt-1",children:x.assignment.completed?a.jsx("span",{className:"text-xs text-green-600 hidden sm:inline",children:" Completed"}):x.assignment.user_id===(h==null?void 0:h.id)&&d&&f?a.jsxs("button",{className:"quiz-action-button flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700",onClick:S=>{S.stopPropagation(),p(" Calendar Quiz Button Clicked:",{date:x.date.toDateString(),assignmentId:x.assignment.id,hasActiveSession:!!v,activeSessionId:v==null?void 0:v.id,action:v?"resume":"start"}),v?(f(x.assignment),p(" Calling onResumeQuiz with assignment:",x.assignment.id)):(d(x.assignment),p(" Calling onStartQuiz with assignment:",x.assignment.id))},title:v?"Resume Quiz":"Start Quiz",children:[v?a.jsx(Wi,{className:"h-3 w-3 sm:h-4 sm:w-4"}):a.jsx(io,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:v?"Resume":"Start"})]}):v?a.jsx("span",{className:"text-xs text-blue-600 hidden sm:inline",children:"Active"}):a.jsx("span",{className:"text-xs text-yellow-600 hidden sm:inline",children:"Pending"})})]})]},y)})]})]})}function ZW({stats:e}){return a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Assignments"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.totalAssignments})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"This Month"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.thisMonth})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Completed"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.completed})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ke,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Books Scheduled"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.booksScheduled})]})]})})]})}function eK({isOpen:e,onClose:t,selectedDate:r,teamMembers:n,isNewAssignment:s,initialSelectedMembers:i,editingAssignment:o,studyItems:l,currentBook:c,currentChapters:u,currentVerses:d,description:f,onBookChange:h,onDescriptionChange:m,onToggleChapter:p,onSelectAllChapters:x,onClearChapters:y,onToggleVerse:v,onSelectAllVerses:g,onClearVerses:w,selectVerseRange:_,startVerseInput:j,endVerseInput:N,updateStartVerseInput:S,updateEndVerseInput:k,onAddStudyItem:E,onRemoveStudyItem:P,onSave:D,onDelete:O,getMaxChapters:z,getVersesForBookChapter:R,questions:B}){const[F,I]=ae.useState(i);if(ae.useEffect(()=>{I(i)},[i]),!r)return null;const C=Y=>{I(ve=>ve.includes(Y)?ve.filter(je=>je!==Y):[...ve,Y])},T=()=>{I(n.filter(Y=>Y.role==="member").map(Y=>Y.userId))},A=()=>{I([])},L=()=>{if(F.length===0)return"No members selected";if(F.length===1){const Y=n.find(ve=>ve.userId===F[0]);return(Y==null?void 0:Y.user.name)||"Unknown member"}return`${F.length} members selected`},q=ae.useMemo(()=>jS(B),[B]),ee=c&&u.length===1,ne=ee?R(c,u[0]):[];return a.jsxs(kn,{isOpen:e,onClose:t,title:o?"Edit Assignment":"Add Study Assignment",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{children:o&&a.jsxs("button",{onClick:O,className:"flex items-center space-x-2 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete"})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>D(F,l,f),disabled:l.length===0||F.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(F0,{className:"h-4 w-4"}),a.jsxs("span",{children:[o?"Update":"Save"," Assignment"]})]})]})]}),children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Assignment for: ",L()]}),a.jsx("div",{className:"text-sm text-blue-700",children:lo(r,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s&&a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(Ge,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{children:"Select Team Members"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:T,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Select All"}),a.jsx("button",{type:"button",onClick:A,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:n.filter(Y=>Y.role==="member").map(Y=>a.jsxs("button",{type:"button",onClick:()=>C(Y.userId),className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all duration-200 text-left ${F.includes(Y.userId)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:Y.user.name.split(" ").map(ve=>ve[0]).join("")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:Y.user.name}),a.jsx("div",{className:"text-sm text-gray-500 capitalize",children:Y.role})]}),F.includes(Y.userId)&&a.jsx(Dt,{className:"h-5 w-5 text-indigo-600 flex-shrink-0"})]},Y.userId))}),F.length>0&&a.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[F.length," member",F.length!==1?"s":""," selected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Add Study Item"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bible Book"}),a.jsxs("select",{value:c,onChange:Y=>h(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"",children:"Select a book"}),q.map(Y=>a.jsx("option",{value:Y,children:Y},Y))]}),q.length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No books available. Questions need to be added to the system."})]}),c&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chapters"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:x,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:y,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-6 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:Va(c,B).map(Y=>a.jsx("button",{type:"button",onClick:()=>p(Y),className:`p-2 text-sm rounded transition-colors duration-200 ${u.includes(Y)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Y},Y))}),Va(c,B).length===0&&a.jsxs("p",{className:"text-sm text-gray-500",children:["No chapters available for ",c,". Questions need to be added for this book."]}),u.length>0&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",u.join(", ")," (",u.length," chapter",u.length!==1?"s":"",")"]})]}),ee&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verses (Optional)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:g,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:w,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),ne.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-900 mb-2",children:"Quick Range Selection"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",min:"1",max:Math.max(...ne),value:j,onChange:Y=>S(Y.target.value),placeholder:"Start",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("span",{className:"text-purple-700 font-medium",children:"to"}),a.jsx("input",{type:"number",min:"1",max:Math.max(...ne),value:N,onChange:Y=>k(Y.target.value),placeholder:"End",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("button",{type:"button",onClick:_,disabled:!j||!N,className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Select Range"})]}),a.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Example: Enter 1 to 15 to select verses 1-15"})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:ne.map(Y=>a.jsx("button",{type:"button",onClick:()=>v(Y),className:`p-1 text-xs rounded transition-colors duration-200 ${d.includes(Y)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Y},Y))}),d.length>0&&a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Selected verses: ",d.join(", ")," (",d.length," verse",d.length!==1?"s":"",")"]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to include all verses in ",c," Chapter ",u[0]]}),a.jsxs("div",{className:"text-xs text-purple-600 mt-2 p-2 bg-purple-50 rounded",children:[" ",a.jsx("strong",{children:"Tip:"})," Use the range selector above for consecutive verses (e.g., 1-15), or click individual verses below for specific selections"]})]}):a.jsxs("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-lg",children:["No verses available for ",c," Chapter ",u[0],". Questions need to be added for this chapter."]})]}),c&&u.length>1&&a.jsx("div",{className:"text-xs text-gray-500 p-2 bg-blue-50 rounded-lg",children:" Select exactly one chapter to enable verse-specific selection"}),a.jsxs("button",{type:"button",onClick:E,disabled:!c||u.length===0||q.length===0,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add to Assignment"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Assignment Items"}),l.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No study items added yet"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map((Y,ve)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:Y.book}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Chapters: ",Y.chapters.join(", ")," (",Y.chapters.length," chapter",Y.chapters.length!==1?"s":"",")",Y.verses&&Y.verses.length>0&&a.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Verses: ",Y.verses.join(", ")," (",Y.verses.length," verse",Y.verses.length!==1?"s":"",")"]})]})]}),a.jsx("button",{type:"button",onClick:()=>P(ve),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(Hi,{className:"h-4 w-4"})})]},ve))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Notes (Optional)"}),a.jsx("textarea",{value:f,onChange:Y=>m(Y.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Add study focus, themes, or special instructions..."})]})]})]})]})}function tK({memberAssignments:e,selectedMember:t,user:r,getSessionForAssignment:n,onResumeQuiz:s,onStartQuiz:i,onEditAssignment:o,normalizeAssignment:l,canManageSchedules:c=!1,onDeleteQuizSession:u}){const d=Wr(new Date),f=e.filter(h=>h.date.getTime()>=d.getTime()).sort((h,m)=>h.date.getTime()-m.date.getTime()).slice(0,5);return a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Upcoming Assignments ",t?`for ${t.user.name}`:""]}),a.jsxs("div",{className:"space-y-3",children:[f.map(h=>{const m=l(h),p=r&&n&&n(h.id,r.id),x=h.user_id===(r==null?void 0:r.id);return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${h.completed?"bg-green-100":p?"bg-blue-100":"bg-yellow-100"}`,children:h.completed?a.jsx(Dt,{className:"h-5 w-5 text-green-600"}):p?a.jsx(Wi,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(m.study_items)}),a.jsxs("div",{className:"text-sm text-gray-600",children:[lo(h.date,{weekday:"long",month:"short",day:"numeric"}),h.completed&&a.jsx("span",{className:"ml-2 text-green-600 font-medium",children:" Completed"}),p&&!h.completed&&a.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:" Quiz Active"})]}),h.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!h.completed&&x&&a.jsxs("div",{className:"flex items-center space-x-2",children:[p&&u&&a.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quiz session? All progress will be lost.")&&u(p.id)},className:"flex items-center space-x-1 px-2 py-1 rounded-lg text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(Hi,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>{p?s(h):i(h)},className:`flex items-center space-x-1 px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${p?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:p?a.jsxs(a.Fragment,{children:[a.jsx(Wi,{className:"h-3 w-3"}),a.jsx("span",{children:"Resume"})]}):a.jsxs(a.Fragment,{children:[a.jsx(io,{className:"h-3 w-3"}),a.jsx("span",{children:"Quiz"})]})})]}),c&&a.jsx("button",{onClick:()=>o(h),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})})]})]},h.id)}),f.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No upcoming assignments ",t?`for ${t.user.name}`:""]}),a.jsx("p",{className:"text-sm text-gray-400",children:c?"Click on a calendar date to add an assignment":"Your team admin will assign study schedules"})]})]})]})}function rK(){var Oc,zo;const{user:e,refreshUser:t}=ge(),{developerLog:r}=ge(),{questions:n,fetchQuestions:s}=ia(),{getSessionForAssignment:i,deleteQuizSession:o}=aa(),l=_t(),{assignments:c,teamMembers:u,loading:d,error:f,normalizeAssignment:h,saveAssignment:m,deleteAssignment:p}=H0(),[x,y]=b.useState(""),[v,g]=b.useState([]);b.useEffect(()=>{u.length>0&&!x&&e&&y(e.id)},[u,x,e]);const w=c.filter(me=>me.user_id===x),{currentDate:_,setCurrentDate:j,calendarDays:N,navigateMonth:S,monthNames:k,dayNames:E}=YW(w),{studyItems:P,currentBook:D,currentChapters:O,currentVerses:z,startVerseInput:R,endVerseInput:B,description:F,setCurrentBook:I,setDescription:C,toggleChapter:T,selectAllChapters:A,clearChapters:L,toggleVerse:q,selectAllVerses:ee,clearVerses:ne,selectVerseRange:Y,updateStartVerseInput:ve,updateEndVerseInput:je,addStudyItem:Et,removeStudyItem:Z,resetForm:W,initializeForm:te,getMaxChapters:H,getVersesForBookChapter:De}=JW(n);b.useEffect(()=>{s()},[s]);const[pe,Ee]=b.useState(null),[Le,at]=b.useState(!1),[Je,oe]=b.useState(null),[M,$]=b.useState(!1),U=u.find(me=>me.userId===x),K=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin";if(r(" Schedule: Current user:",e),r(" Schedule: User team info:",{teamId:e==null?void 0:e.teamId,teamRole:e==null?void 0:e.teamRole}),r(" Schedule: Plan settings:",e==null?void 0:e.planSettings),r(" Schedule: Schedule access:",(Oc=e==null?void 0:e.planSettings)==null?void 0:Oc.allow_study_schedule_quiz),!(((zo=e==null?void 0:e.planSettings)==null?void 0:zo.allow_study_schedule_quiz)??!1))return a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yt,{className:"h-8 w-8 text-purple-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Study Schedule"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Study Schedule is a premium feature that helps you organize and track your Bible study progress with structured assignments."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Get access to Study Schedule and other premium features by upgrading your subscription."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{r(" Schedule: Manually refreshing user profile..."),await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>l("/billing"),className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>l("/quiz"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Quiz Center"})]})]})})});r("Schedule: All assignments:",c),r("Schedule: Selected viewing member ID:",x),r("Schedule: Filtered member assignments:",w);const J={totalAssignments:w.length,thisMonth:w.filter(me=>me.date.getMonth()===_.getMonth()&&me.date.getFullYear()===_.getFullYear()).length,completed:w.filter(me=>me.completed).length,booksScheduled:new Set(w.flatMap(me=>h(me).study_items.map(Ns=>Ns.book))).size},ue=me=>{if(!(!me.isCurrentMonth||!x||!K)){if(Ee(me.date),me.assignment){const Xt=h(me.assignment);oe(Xt),te(Xt.study_items,Xt.description||""),g([Xt.user_id]),$(!1)}else oe(null),W(),g(x?[x]:[]),$(!0);at(!0)}},Ne=async(me,Xt,Ns)=>{if(!(!pe||Xt.length===0||me.length===0||!e))try{for(const bh of me){const YC={id:(Je==null?void 0:Je.id)||crypto.randomUUID(),user_id:bh,team_id:e.teamId||"",date:pe,study_items:[...Xt],description:Ns.trim()||void 0,created_by:e.id,created_at:(Je==null?void 0:Je.created_at)||new Date().toISOString(),completed:(Je==null?void 0:Je.completed)||!1,completed_at:Je==null?void 0:Je.completed_at};await m(YC)}at(!1),W(),Ee(null),oe(null),g([]),$(!1)}catch(bh){console.error("Error saving assignment:",bh)}},Oe=async()=>{if(Je)try{await p(Je.id),at(!1),W(),Ee(null),oe(null),g([]),$(!1)}catch(me){console.error("Error deleting assignment:",me)}},Jt=me=>{l(`/quiz/study-assignment/${me.id}`,{state:{selectedStudyItems:me.study_items}})},gi=me=>{l(`/quiz/study-assignment/${me.id}`)},Cn=me=>{if(!K)return;const Xt=new Date(me.date);Ee(Xt);const Ns=h(me);oe(Ns),te(Ns.study_items,Ns.description||""),g([Ns.user_id]),$(!1),at(!0)},vh=async me=>{try{await o(me)}catch(Xt){console.error("Error deleting quiz session:",Xt)}},Io=me=>{I(me),L()},$o=me=>{K&&y(me)};return e!=null&&e.teamId?a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Study Schedule"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:K?"Plan and manage individual study assignments for your team members.":"View your personal study assignments and start quizzes."})]}),a.jsx(Rp,{teamMembers:u,selectedMemberId:x,onSelectMember:$o,selectedMemberInfo:U,disabled:!K}),a.jsx(ZW,{stats:J}),a.jsx("div",{className:"mb-8",children:a.jsx(IS,{allAssignments:w,loading:d,user:e,questions:n,getSessionForAssignment:i,developerLog:r})}),a.jsx(XW,{currentDate:_,calendarDays:N,dayNames:E,monthNames:k,onNavigateMonth:S,onDateClick:ue,onToday:()=>j(new Date),formatStudyItems:me=>ao(me),normalizeAssignment:h,getSessionForAssignment:i,onStartQuiz:Jt,onResumeQuiz:gi,user:e,canManageSchedules:K}),a.jsx(tK,{memberAssignments:w,selectedMember:U,user:e,getSessionForAssignment:i,onResumeQuiz:gi,onStartQuiz:Jt,onEditAssignment:Cn,normalizeAssignment:h,canManageSchedules:K,onDeleteQuizSession:vh}),Le&&K&&a.jsx(eK,{isOpen:Le,onClose:()=>{at(!1),W(),Ee(null),oe(null),g([]),$(!1)},selectedDate:pe,teamMembers:u.filter(me=>me.role==="member"),isNewAssignment:M,initialSelectedMembers:v,editingAssignment:Je,studyItems:P,currentBook:D,currentChapters:O,currentVerses:z,description:F,onBookChange:Io,onDescriptionChange:C,onToggleChapter:T,onSelectAllChapters:A,onClearChapters:L,onToggleVerse:q,onSelectAllVerses:ee,onClearVerses:ne,selectVerseRange:Y,startVerseInput:R,endVerseInput:B,updateStartVerseInput:ve,updateEndVerseInput:je,onAddStudyItem:Et,onRemoveStudyItem:Z,onSave:Ne,onDelete:Oe,getMaxChapters:H,getVersesForBookChapter:De,questions:n})]})}):a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsx(Rp,{teamMembers:[],selectedMemberId:"",onSelectMember:()=>{},disabled:!0})})})}function nK({teamId:e,startDate:t,endDate:r}){const{developerLog:n}=ge(),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){n(" useTeamLeaderboardData: No teamId provided, skipping data fetch"),l(!1),i([]);return}n(" useTeamLeaderboardData: Starting team leaderboard data fetch for team:",e,"with date range:",t,r),l(!0),u(null);try{n(" useTeamLeaderboardData: Using secure function to fetch team leaderboard data");const{data:f,error:h}=await Q.rpc("get_team_leaderboard_data",{p_team_id:e});if(h)throw console.error(" Error fetching team leaderboard data:",h),h;n(" useTeamLeaderboardData: Fetched leaderboard data:",(f==null?void 0:f.length)||0,"members");const m=(f||[]).map(p=>({userId:p.user_id,userName:p.user_name,role:p.role,totalQuizzesCompleted:Number(p.total_quizzes_completed),totalQuestionsAnswered:Number(p.total_questions_answered),averageScore:Number(p.average_score),totalTimeSpentMinutes:Number(p.total_time_spent_minutes),studyStreak:Number(p.study_streak),totalPointsEarned:Number(p.total_points_earned),totalPossiblePoints:Number(p.total_possible_points)}));n(" useTeamLeaderboardData: Transformed leaderboard data:",m),i(m)}catch(f){console.error(" useTeamLeaderboardData: Error fetching team leaderboard data:",f),u(f.message||"Failed to load team leaderboard data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function sK({data:e,loading:t,error:r}){const[n,s]=b.useState("totalPointsEarned"),[i,o]=b.useState("desc"),l=e.filter(p=>p.role==="member"),c=ae.useMemo(()=>[...l].sort((p,x)=>{const y=p[n],v=x[n];return typeof y=="number"&&typeof v=="number"?i==="desc"?v-y:y-v:typeof y=="string"&&typeof v=="string"?i==="desc"?v.localeCompare(y):y.localeCompare(v):0}),[l,n,i]),u=p=>{n===p?o(i==="desc"?"asc":"desc"):(s(p),o("desc"))},d=p=>{switch(p){case 0:return a.jsx(zt,{className:"h-5 w-5 text-yellow-500"});case 1:return a.jsx(cM,{className:"h-5 w-5 text-gray-400"});case 2:return a.jsx(mr,{className:"h-5 w-5 text-amber-600"});default:return a.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",p+1]})}},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",m=[{key:"rank",header:a.jsx("div",{className:"text-center",children:"Rank"}),render:(p,x)=>a.jsx("div",{className:"flex items-center justify-center",children:d(x)}),className:"text-center w-16",headerClassName:"text-center"},{key:"userName",header:"Team Member",render:p=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:p.userName.split(" ").map(x=>x[0]).join("")})}),a.jsx("div",{children:a.jsx("div",{className:"font-medium text-gray-900",children:p.userName})})]})},{key:"totalPointsEarned",header:"Total Points",render:p=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-lg text-gray-900",children:p.totalPointsEarned.toLocaleString()}),a.jsxs("div",{className:"text-xs text-gray-500",children:["of ",p.totalPossiblePoints.toLocaleString()]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageScore",header:"Average Score",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:`font-bold text-lg ${f(p.averageScore)}`,children:[p.averageScore.toFixed(1),"%"]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuizzesCompleted",header:"Quizzes",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuestionsAnswered",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuestionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalTimeSpentMinutes",header:"Study Time",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:Mt(p.totalTimeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"studyStreak",header:"Streak",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.studyStreak," day",p.studyStreak!==1?"s":""]})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(p=>({...p,header:p.sortable?a.jsxs("button",{onClick:()=>u(p.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:p.header}),n===p.key&&a.jsx(wr,{className:`h-3 w-3 transition-transform duration-200 ${i==="desc"?"rotate-180":""}`})]}):p.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(wr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Leaderboard"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(zt,{className:"h-6 w-6 text-yellow-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Leaderboard"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Team performance ranked by total points earned"})]})]})}),a.jsx(sn,{columns:m,data:c,loading:t,emptyState:{icon:zt,title:"No Team Data",description:"No team member analytics data available yet. Complete some quizzes to see the leaderboard!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort  Rankings based on total points earned"})})]})}function iK(){const{user:e}=ge(),[t,r]=b.useState(()=>{const m=new Date;return m.setDate(m.getDate()-30),m}),[n,s]=b.useState(new Date),{data:i,loading:o,error:l,refreshData:c}=nK({teamId:e==null?void 0:e.teamId,startDate:t,endDate:n}),u=m=>{const p=new Date(m.target.value);r(p)},d=m=>{const p=new Date(m.target.value);s(p)},f=m=>m.toISOString().split("T")[0],h=ae.useMemo(()=>{if(!i||i.length===0)return{totalMembers:0,totalQuizzes:0,totalQuestions:0,totalTime:0,averageScore:0,topPerformer:null};const m=i.reduce((_,j)=>_+j.totalQuizzesCompleted,0),p=i.reduce((_,j)=>_+j.totalQuestionsAnswered,0),x=i.reduce((_,j)=>_+j.totalTimeSpentMinutes,0),y=i.reduce((_,j)=>_+j.totalPointsEarned,0),v=i.reduce((_,j)=>_+j.totalPossiblePoints,0),g=v>0?y/v*100:0,w=i.length>0?i[0]:null;return{totalMembers:i.length,totalQuizzes:m,totalQuestions:p,totalTime:x,averageScore:g,topPerformer:w}},[i]);return e!=null&&e.teamId?a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Leaderboard"}),a.jsx("p",{className:"text-gray-600",children:"Track your team's performance and see how members rank against each other."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(wr,{className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(mS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter leaderboard data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:f(t),onChange:u,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:f(n),onChange:d,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Math.ceil((n.getTime()-t.getTime())/(1e3*60*60*24))," days"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[a.jsx(He,{title:"Team Members",value:h.totalMembers,icon:Ge,iconColor:"text-indigo-600"}),a.jsx(He,{title:"Total Quizzes",value:h.totalQuizzes.toLocaleString(),icon:it,iconColor:"text-green-600"}),a.jsx(He,{title:"Team Average",value:`${h.averageScore.toFixed(1)}%`,icon:mr,iconColor:"text-blue-600"}),a.jsx(He,{title:"Total Study Time",value:Mt(h.totalTime),icon:Ie,iconColor:"text-purple-600"})]}),h.topPerformer&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx(zt,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:[" Top Performer: ",h.topPerformer.userName]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[a.jsxs("span",{children:[h.topPerformer.totalPointsEarned.toLocaleString()," points"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[h.topPerformer.averageScore.toFixed(1),"% average score"]}),a.jsx("span",{children:""}),a.jsxs("span",{children:[h.topPerformer.totalQuizzesCompleted," quizzes completed"]})]})]})]})}),l&&a.jsx(Ue,{type:"error",message:l,className:"mb-6"}),o&&a.jsx(Lt,{text:"Loading team leaderboard...",className:"py-8"}),!o&&a.jsx(sK,{data:i,loading:o,error:l})]})}):a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ge,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to view the leaderboard."})]})})})}function aK(){const{developerLog:e}=ge(),[t,r]=b.useState({totalUsers:0,freeUsers:0,proUsers:0,enterpriseUsers:0,totalTeams:0,newUsersLast30Days:0,newUsersPrev30Days:0,subscriptionsCancelledLast30Days:0,activeUsers:0,activeTeams:0}),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e(" Loading admin statistics...");const d=new Date,f=new Date(d.getTime()-30*24*60*60*1e3),h=new Date(d.getTime()-60*24*60*60*1e3),{data:m,error:p}=await Q.from("user_profiles").select("id, created_at");if(p)throw console.error(" Error loading user profiles:",p),p;const{data:x,error:y}=await Q.from("subscriptions").select("user_id, plan, status, cancelled_at, created_at").order("created_at",{ascending:!1});if(y)throw console.error(" Error loading subscriptions:",y),y;const{data:v,error:g}=await Q.from("teams").select("id, created_at");if(g)throw console.error(" Error loading teams:",g),g;const{data:w,error:_}=await Q.from("team_members").select("team_id, status, joined_at").eq("status","active");if(_)throw console.error(" Error loading team members:",_),_;const j=new Map,N=new Map;(x||[]).forEach(A=>{N.has(A.user_id)||N.set(A.user_id,[]),N.get(A.user_id).push(A),A.status==="active"&&!j.has(A.user_id)&&j.set(A.user_id,A)});const S=Array.from(j.values()),k=(m==null?void 0:m.length)||0,E=S.filter(A=>A.plan==="free").length,P=S.filter(A=>A.plan==="pro").length,D=S.filter(A=>A.plan==="enterprise").length,O=(m==null?void 0:m.filter(A=>new Date(A.created_at)>=f).length)||0,z=(m==null?void 0:m.filter(A=>{const L=new Date(A.created_at);return L>=h&&L<f}).length)||0,R=(x||[]).filter(A=>A.cancelled_at&&new Date(A.cancelled_at)>=f).length,B=S.length,I=new Set((w==null?void 0:w.map(A=>A.team_id))||[]).size,C={totalUsers:k,freeUsers:E,proUsers:P,enterpriseUsers:D,totalTeams:(v==null?void 0:v.length)||0,newUsersLast30Days:O,newUsersPrev30Days:z,subscriptionsCancelledLast30Days:R,activeUsers:B,activeTeams:I};e(" Admin statistics calculated:",C),r(C);const T=[{id:1,type:"user_signup",message:`${O} new users registered in the last 30 days`,timestamp:"2 hours ago",severity:"info"},{id:2,type:"subscription",message:`${P+D} users have active paid subscriptions`,timestamp:"4 hours ago",severity:"success"},{id:3,type:"teams",message:`${I} teams are currently active`,timestamp:"6 hours ago",severity:"info"},{id:4,type:"cancellation",message:`${R} subscription cancellations in the last 30 days`,timestamp:"8 hours ago",severity:R>5?"warning":"info"}];s(T)}catch(d){console.error(" Error loading admin statistics:",d),c("Failed to load admin statistics")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{stats:t,recentActivities:n,loading:i,error:l,refreshStats:u}}function oK(){const{stats:e,recentActivities:t,loading:r,error:n}=aK(),s=e.proUsers+e.enterpriseUsers,i=e.totalUsers>0?Math.round(e.freeUsers/e.totalUsers*100):0,o=e.totalUsers>0?Math.round(s/e.totalUsers*100):0,l=e.totalTeams>0?Math.round(e.totalUsers/e.totalTeams):0,c=e.newUsersPrev30Days>0?Math.round((e.newUsersLast30Days-e.newUsersPrev30Days)/e.newUsersPrev30Days*100):0,u=e.totalUsers>0?Math.round(e.activeUsers/e.totalUsers*100):0,d=e.totalTeams>0?Math.round(e.activeTeams/e.totalTeams*100):0,f=[{name:"Total Users",value:e.totalUsers.toLocaleString(),change:`${i}% free, ${o}% paid`,changeType:"neutral",icon:Ge},{name:"Total Teams",value:e.totalTeams.toLocaleString(),change:`${l} avg members`,changeType:"neutral",icon:Gl},{name:"New Users (30D)",value:e.newUsersLast30Days.toLocaleString(),change:`${c>=0?"+":""}${c}%`,changeType:c>=0?"positive":"negative",icon:vS},{name:"Cancellations (30D)",value:e.subscriptionsCancelledLast30Days.toLocaleString(),change:`${e.totalUsers>0?Math.round(e.subscriptionsCancelledLast30Days/e.totalUsers*100):0}% of total`,changeType:e.subscriptionsCancelledLast30Days>0?"negative":"positive",icon:bS},{name:"Active Users",value:`${u}%`,change:`${e.activeUsers} users`,changeType:u>=90?"positive":u>=70?"neutral":"negative",icon:no},{name:"Active Teams",value:`${d}%`,change:`${e.activeTeams} teams`,changeType:d>=90?"positive":d>=70?"neutral":"negative",icon:_n},{name:"Free Plans",value:e.freeUsers.toLocaleString(),change:`${i}% of users`,changeType:"neutral",icon:Ge},{name:"Paid Plans",value:s.toLocaleString(),change:`${o}% of users`,changeType:"positive",icon:sd}],h=[{name:"CPU Usage",value:45,status:"good"},{name:"Memory Usage",value:67,status:"warning"},{name:"Disk Usage",value:23,status:"good"},{name:"Network I/O",value:89,status:"critical"}],m=[{plan:"Free",count:e.freeUsers,color:"bg-gray-500"},{plan:"Pro",count:e.proUsers,color:"bg-blue-500"},{plan:"Enterprise",count:e.enterpriseUsers,color:"bg-purple-500"}],p=y=>{switch(y){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},x=y=>{switch(y){case"success":return"bg-green-50 text-green-700 border-green-200";case"warning":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"error":return"bg-red-50 text-red-700 border-red-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}};return r?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading admin data..."})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Monitor system performance and manage your application."})]}),n&&a.jsx(Ue,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:f.map(y=>a.jsx(He,{title:y.name,value:y.value,icon:y.icon,trend:{value:y.change,type:y.changeType}},y.name))}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(gM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"System Metrics"})]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:h.map(y=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-0 flex-1 truncate pr-3",children:y.name}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[a.jsx("div",{className:"w-20 sm:w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${p(y.status)}`,style:{width:`${y.value}%`}})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:[y.value,"%"]})]})]},y.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(mM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Subscription Breakdown"})]}),a.jsx("div",{className:"space-y-4",children:m.map(y=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${y.color}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:y.plan})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900",children:y.count}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.totalUsers>0?Math.round(y.count/e.totalUsers*100):0,"%"]})]})]},y.plan))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(rM,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Backup Database"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(_n,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Security Scan"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(Ge,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Manage Users"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(no,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"View Logs"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Recent Activities"}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:t.slice(0,8).map(y=>a.jsx("div",{className:`p-3 sm:p-4 rounded-lg border ${x(y.severity)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium break-words",children:y.message}),a.jsx("p",{className:"text-xs mt-1 opacity-75",children:y.timestamp})]}),a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ml-3 flex-shrink-0 ${y.severity==="success"?"bg-green-100 text-green-800":y.severity==="warning"?"bg-yellow-100 text-yellow-800":y.severity==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:y.type.replace("_"," ")})]})},y.id))})]})]})})}function lK(){const{developerLog:e}=ge(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e(" Loading users for admin panel...");const{data:h,error:m}=await Q.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          created_at,
          teams:team_id (
            id,
            name
          )
        `);if(m)throw console.error(" Error loading user profiles:",m),m;const{data:p,error:x}=await Q.from("subscriptions").select("user_id, plan, status, created_at").eq("status","active").order("created_at",{ascending:!1});x&&console.error(" Error loading subscriptions:",x);const y=new Map;(p||[]).forEach(j=>{y.has(j.user_id)||y.set(j.user_id,j)});const{data:v,error:g}=await Q.from("team_members").select("user_id, status");g&&console.error(" Error loading team members:",g);const w=new Map((v||[]).map(j=>[j.user_id,j])),_=(h||[]).map(j=>{var k;const N=y.get(j.id),S=w.get(j.id);return{id:j.id,name:j.name,email:j.email,role:j.role,status:(S==null?void 0:S.status)||"active",subscription:(N==null?void 0:N.plan)||"free",joinDate:j.created_at,lastActive:"Recently",teamId:j.team_id,teamRole:j.team_role,teamName:(k=j.teams)==null?void 0:k.name}});e(" Users loaded successfully:",_.length),r(_)}catch(h){console.error(" Error loading users:",h),c("Failed to load users")}finally{o(!1)}},[e]),d=b.useCallback(async()=>{try{e(" Loading teams for admin panel...");const{data:h,error:m}=await Q.from("teams").select("id, name, member_count");if(m)throw console.error(" Error loading teams:",m),m;const p=(h||[]).map(x=>({id:x.id,name:x.name,memberCount:x.member_count}));e(" Teams loaded successfully:",p.length),s(p)}catch(h){console.error(" Error loading teams:",h)}},[e]),f=b.useCallback(async()=>{await Promise.all([u(),d()])},[u,d]);return b.useEffect(()=>{f()},[f]),{users:t,teams:n,loading:i,error:l,refreshData:f}}function cK(){const{users:e,teams:t,loading:r,error:n}=lK(),[s,i]=b.useState(""),[o,l]=b.useState("all"),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[h,m]=b.useState(!1),p=[{key:"user",header:"User",render:y=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs sm:text-sm font-medium text-indigo-600",children:y.name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:y.name}),a.jsx("div",{className:"text-sm text-gray-500 truncate",children:y.email})]})]})},{key:"team",header:"Team",render:y=>a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Gl,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:y.teamName||"No Team"})]}),y.teamRole&&a.jsx(xr,{type:"teamRole",value:y.teamRole})]})},{key:"role",header:"Role",render:y=>a.jsx(xr,{type:"role",value:y.role}),className:"whitespace-nowrap"},{key:"status",header:"Status",render:y=>a.jsx(xr,{type:"status",value:y.status}),className:"whitespace-nowrap"},{key:"subscription",header:"Subscription",render:y=>a.jsx("span",{className:"text-sm text-gray-900 capitalize",children:y.subscription}),className:"whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell",headerClassName:"hidden sm:table-cell"},{key:"joinDate",header:"Join Date",render:y=>a.jsx("span",{className:"text-sm text-gray-500",children:new Date(y.joinDate).toLocaleDateString()}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"},{key:"lastActive",header:"Last Active",render:y=>a.jsx("span",{className:"text-sm text-gray-500",children:y.lastActive}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"}],x=e.filter(y=>{const v=y.name.toLowerCase().includes(s.toLowerCase())||y.email.toLowerCase().includes(s.toLowerCase())||(y.teamName||"No Team").toLowerCase().includes(s.toLowerCase()),g=o==="all"||y.role===o,w=c==="all"||y.status===c,_=d==="all"||y.teamId===d;return v&&g&&w&&_});return r?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading user data..."})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage user accounts, roles, and permissions across all teams."})]}),a.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]}),n&&a.jsx(Ue,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users by name, email, or team...",value:s,onChange:y=>i(y.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("select",{value:o,onChange:y=>l(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"System Admin"}),a.jsx("option",{value:"user",children:"User"})]}),a.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]}),a.jsxs("select",{value:d,onChange:y=>f(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Teams"}),a.jsx("option",{value:"",children:"No Team"}),t.map(y=>a.jsx("option",{value:y.id,children:y.name},y.id))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(R0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[x.length," of ",e.length," users"]})]})]})]})}),a.jsx(sn,{columns:p,data:x,loading:r,emptyState:{icon:Ge,title:"No Users Found",description:e.length===0?"No users found in the system.":"No users match your search criteria."}}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mt-6 sm:mt-8",children:[a.jsx(He,{title:"Total Users",value:e.length,icon:Ge,iconColor:"text-indigo-600"}),a.jsx(He,{title:"System Admins",value:e.filter(y=>y.role==="admin").length,icon:_n,iconColor:"text-purple-600"}),a.jsx(He,{title:"Teams",value:t.length,icon:Gl,iconColor:"text-green-600"}),a.jsx(He,{title:"Active Users",value:e.filter(y=>y.status==="active").length,icon:Yl,iconColor:"text-blue-600"})]})]})})}const uK=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function dK(){const{questions:e,loading:t,fetchQuestions:r,createQuestion:n,updateQuestion:s,deleteQuestion:i}=ia(),[o,l]=b.useState(""),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[h,m]=b.useState(!1),[p,x]=b.useState(null),[y,v]=b.useState({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"});b.useEffect(()=>{r()},[r]);const g=e.filter(P=>{const D=P.question.toLowerCase().includes(o.toLowerCase())||P.answer.toLowerCase().includes(o.toLowerCase())||P.book_of_bible.toLowerCase().includes(o.toLowerCase()),O=c==="all"||P.book_of_bible===c,z=d==="all"||P.tier===d;return D&&O&&z}),w=Array.from(new Set(e.map(P=>P.book_of_bible))).sort(),_=[{key:"question",header:"Question",render:P=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:P.question})})},{key:"book_chapter",header:"Book & Chapter",render:P=>a.jsxs("div",{className:"text-sm text-gray-900",children:[a.jsx("div",{className:"font-medium",children:P.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",P.chapter]})]}),className:"whitespace-nowrap"},{key:"answer",header:"Answer",render:P=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm text-gray-900 line-clamp-2",children:P.answer})})},{key:"points",header:"Points",render:P=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(mr,{className:"h-4 w-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.points})]}),className:"whitespace-nowrap"},{key:"time_to_answer",header:"Time",render:P=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ie,{className:"h-4 w-4 text-gray-500 mr-1"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[P.time_to_answer,"s"]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:P=>a.jsx(xr,{type:"tier",value:P.tier,showIcon:!0}),className:"whitespace-nowrap"},{key:"actions",header:"",render:P=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>N(P),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>k(P.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(Hi,{className:"h-4 w-4"})})]}),className:"whitespace-nowrap text-right text-sm font-medium",headerClassName:"relative"}],j=()=>{x(null),v({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"}),m(!0)},N=P=>{x(P),v({book_of_bible:P.book_of_bible,chapter:P.chapter,question:P.question,answer:P.answer,points:P.points,time_to_answer:P.time_to_answer,tier:P.tier}),m(!0)},S=async()=>{try{p?await s(p.id,y):await n(y),m(!1)}catch(P){console.error("Error saving question:",P)}},k=async P=>{if(confirm("Are you sure you want to delete this question?"))try{await i(P)}catch(D){console.error("Error deleting question:",D)}},E={total:e.length,free:e.filter(P=>P.tier==="free").length,pro:e.filter(P=>P.tier==="pro").length,enterprise:e.filter(P=>P.tier==="enterprise").length,books:w.length};return t?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading questions..."})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Question Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage quiz questions for the Pathfinder Bible Experience."})]}),a.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Vi,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Question"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(He,{title:"Total Questions",value:E.total,icon:ke,iconColor:"text-indigo-600"}),a.jsx(He,{title:"Free",value:E.free,icon:vM,iconColor:"text-green-600"}),a.jsx(He,{title:"Pro",value:E.pro,icon:mr,iconColor:"text-blue-600"}),a.jsx(He,{title:"Enterprise",value:E.enterprise,icon:mr,iconColor:"text-purple-600"}),a.jsx(He,{title:"Bible Books",value:E.books,icon:ke,iconColor:"text-gray-600"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(gf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search questions by text, answer, or book...",value:o,onChange:P=>l(P.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("select",{value:c,onChange:P=>u(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Books"}),w.map(P=>a.jsx("option",{value:P,children:P},P))]}),a.jsxs("select",{value:d,onChange:P=>f(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Tiers"}),a.jsx("option",{value:"free",children:"Free"}),a.jsx("option",{value:"pro",children:"Pro"}),a.jsx("option",{value:"enterprise",children:"Enterprise"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(R0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[g.length," of ",e.length," questions"]})]})]})]})}),a.jsx(sn,{columns:_,data:g,loading:t,emptyState:{icon:ke,title:"No Questions Found",description:"No questions found matching your criteria"}}),a.jsx(kn,{isOpen:h,onClose:()=>m(!1),title:p?"Edit Question":"Add New Question",maxWidth:"2xl",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:S,disabled:!y.book_of_bible||!y.question||!y.answer,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(F0,{className:"h-4 w-4"}),a.jsx("span",{children:p?"Update Question":"Add Question"})]})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Book of the Bible"}),a.jsxs("select",{value:y.book_of_bible,onChange:P=>v({...y,book_of_bible:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select a book"}),uK.map(P=>a.jsx("option",{value:P,children:P},P))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter"}),a.jsx("input",{type:"number",min:"1",max:"150",value:y.chapter,onChange:P=>v({...y,chapter:parseInt(P.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),a.jsx("textarea",{value:y.question,onChange:P=>v({...y,question:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the quiz question...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer"}),a.jsx("textarea",{value:y.answer,onChange:P=>v({...y,answer:P.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the correct answer...",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),a.jsx("input",{type:"number",min:"1",max:"100",value:y.points,onChange:P=>v({...y,points:parseInt(P.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time (seconds)"}),a.jsx("input",{type:"number",min:"10",max:"300",value:y.time_to_answer,onChange:P=>v({...y,time_to_answer:parseInt(P.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tier"}),a.jsxs("select",{value:y.tier,onChange:P=>v({...y,tier:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"free",children:" Free"}),a.jsx("option",{value:"pro",children:" Pro"}),a.jsx("option",{value:"enterprise",children:" Enterprise"})]})]})]})]})})]})})}function fK(){const{developerLog:e}=ge(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{o(!0),c(null);try{e(" Fetching plan data from Supabase...");const{data:d,error:f}=await Q.from("plans").select("*").order("name",{ascending:!0});if(f)throw console.error(" Error fetching plans:",f),f;const{data:h,error:m}=await Q.from("plan_settings").select("*");if(m)throw console.error(" Error fetching plan settings:",m),m;const{data:p,error:x}=await Q.from("plan_prices").select("*");if(x)throw console.error(" Error fetching plan prices:",x),x;const y=(d||[]).map(v=>{const w=(p||[]).filter(_=>_.plan_id===v.id);return{...v,prices:w}});e(" Plans fetched successfully:",y.length,"plans"),e("DEBUG: plansWithPrices before setting state:",JSON.stringify(y,null,2)),e("DEBUG: Raw prices data from DB:",JSON.stringify(p,null,2)),r(y),e(" Plan settings fetched successfully:",(h==null?void 0:h.length)||0,"settings"),s(h||[])}catch(d){console.error(" Error fetching plan data:",d),c("Failed to load plan data.")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{plans:t,planSettings:n,loading:i,error:l,fetchPlanData:u}}function lt(e){const[t,r]=ae.useState(!1),n=`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 ${e.error?"border-red-300 focus:ring-red-500":""} ${e.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,s=()=>{switch(e.type){case"password":return a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:e.id,type:t?"text":"password",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:`${n} ${e.showToggle!==!1?"pr-10":""}`}),e.showToggle!==!1&&a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),disabled:e.disabled,children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Jr,{className:"h-4 w-4 text-gray-400"})})]});case"textarea":return a.jsx("textarea",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,rows:e.rows||3,disabled:e.disabled,className:n});case"select":return a.jsxs("select",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),disabled:e.disabled,className:n,children:[e.placeholder&&a.jsx("option",{value:"",children:e.placeholder}),e.options.map(i=>a.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return a.jsx("input",{id:e.id,type:"number",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,min:e.min,max:e.max,disabled:e.disabled,className:n});default:return a.jsx("input",{id:e.id,type:e.type,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:n})}};return a.jsxs("div",{className:e.className,children:[a.jsxs("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s(),e.helpText&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.helpText}),e.error&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.error})]})}function Zn({variant:e="primary",size:t="md",icon:r,iconPosition:n="left",loading:s=!1,disabled:i=!1,fullWidth:o=!1,children:l,onClick:c,type:u="button",className:d=""}){const f=()=>{switch(e){case"primary":return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500";case"secondary":return"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500";case"danger":return"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500";case"success":return"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500";case"ghost":return"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500";default:return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"}},h=()=>{switch(t){case"sm":return"px-3 py-1.5 text-sm";case"md":return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}},m=`
    inline-flex items-center justify-center font-medium rounded-lg
    focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-all duration-200
  `,p=f(),x=h(),y=o?"w-full":"",v=i||s;return a.jsx("button",{type:u,onClick:c,disabled:v,className:`${m} ${p} ${x} ${y} ${d}`.trim(),children:s?a.jsxs(a.Fragment,{children:[a.jsx(oo,{className:"mr-2"}),a.jsx("span",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[r&&n==="left"&&a.jsx(r,{className:`h-4 w-4 ${l?"mr-2":""}`}),l,r&&n==="right"&&a.jsx(r,{className:`h-4 w-4 ${l?"ml-2":""}`})]})})}function hK(){var O,z,R,B,F,I;const{plans:e,planSettings:t,loading:r,error:n,fetchPlanData:s}=fK(),[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(null),[f,h]=b.useState({}),[m,p]=b.useState({}),[x,y]=b.useState([]),[v,g]=b.useState(null),[w,_]=b.useState(!1),j=C=>{c(C),h(C);const T=t.find(A=>A.plan_id===C.id);d(T||null),p(T||{plan_id:C.id,max_questions_custom_quiz:0,max_team_members:0,question_tier_access:[],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),y(C.prices||[]),g(null),o(!0)},N=()=>{c(null),h({id:"",name:"",is_enabled:!0,description:""}),p({max_questions_custom_quiz:20,max_team_members:5,question_tier_access:["free"],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),y([]),g(null),o(!0)},S=()=>{const C={plan_id:f.id||"",currency:"USD",interval:"monthly",amount:0};y(T=>[...T,C])},k=(C,T)=>{y(A=>A.map((L,q)=>q===C?{...L,...T}:L))},E=C=>{y(T=>T.filter((A,L)=>L!==C))},P=async()=>{if(g(null),_(!0),!f.name||!f.id||m.max_questions_custom_quiz===void 0||m.max_team_members===void 0||m.allow_quick_start_quiz===void 0||m.allow_create_own_quiz===void 0||m.allow_study_schedule_quiz===void 0||m.allow_analytics_access===void 0){g("Please fill in all required fields."),_(!1);return}for(const T of x)if(!T.currency||!T.interval||T.amount===void 0||T.amount<0){g("Please ensure all price entries have valid currency, interval, and amount."),_(!1);return}const C=new Set;for(const T of x){const A=`${T.currency}-${T.interval}`;if(C.has(A)){g(`Duplicate price entry found for ${T.currency} (${T.interval}). Each plan can only have one price per currency and interval combination.`),_(!1);return}C.add(A)}try{if(l){const{error:T}=await Q.from("plans").update({name:f.name,is_enabled:f.is_enabled,description:f.description,updated_at:new Date().toISOString()}).eq("id",f.id);if(T)throw T;const{error:A}=await Q.from("plan_settings").update({max_questions_custom_quiz:m.max_questions_custom_quiz,max_team_members:m.max_team_members,question_tier_access:m.question_tier_access,allow_quick_start_quiz:m.allow_quick_start_quiz,allow_create_own_quiz:m.allow_create_own_quiz,allow_study_schedule_quiz:m.allow_study_schedule_quiz,allow_analytics_access:m.allow_analytics_access,updated_at:new Date().toISOString()}).eq("plan_id",f.id);if(A)throw A;const{error:L}=await Q.from("plan_prices").delete().eq("plan_id",f.id);if(L)throw L;if(x.length>0){const{error:q}=await Q.from("plan_prices").insert(x.map(ee=>({plan_id:f.id,currency:ee.currency,interval:ee.interval,amount:ee.amount,stripe_price_id:ee.stripe_price_id})));if(q)throw q}console.log(" Plan updated successfully")}else{const{error:T}=await Q.from("plans").insert([{id:f.id,name:f.name,is_enabled:f.is_enabled,description:f.description}]);if(T)throw T;const{error:A}=await Q.from("plan_settings").insert([{plan_id:f.id,max_questions_custom_quiz:m.max_questions_custom_quiz,max_team_members:m.max_team_members,question_tier_access:m.question_tier_access,allow_quick_start_quiz:m.allow_quick_start_quiz,allow_create_own_quiz:m.allow_create_own_quiz,allow_study_schedule_quiz:m.allow_study_schedule_quiz,allow_analytics_access:m.allow_analytics_access}]);if(A)throw A;if(x.length>0){const{error:L}=await Q.from("plan_prices").insert(x.map(q=>({plan_id:f.id,currency:q.currency,interval:q.interval,amount:q.amount,stripe_price_id:q.stripe_price_id})));if(L)throw L}console.log(" Plan created successfully")}o(!1),await s()}catch(T){console.error("Error saving plan:",T),g(T.message||"Failed to save plan.")}finally{_(!1)}},D=[{key:"name",header:"Plan Name",render:C=>a.jsx("div",{className:"font-medium text-gray-900",children:C.name})},{key:"prices",header:"Pricing",render:C=>a.jsx("div",{className:"text-sm text-gray-900",children:C.prices&&C.prices.length>0?a.jsx("div",{className:"space-y-1",children:C.prices.map((T,A)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium",children:["$",T.amount.toFixed(2)," ",T.currency]}),a.jsxs("span",{className:"text-gray-500",children:["/",T.interval]})]},A))}):a.jsx("span",{className:"text-gray-500 italic",children:"No pricing set"})})},{key:"is_enabled",header:"Enabled",render:C=>C.is_enabled?a.jsx(Ot,{className:"h-5 w-5 text-green-500"}):a.jsx($s,{className:"h-5 w-5 text-red-500"}),className:"text-center"},{key:"max_questions_custom_quiz",header:"Max Custom Quiz Qs",render:C=>{const T=t.find(A=>A.plan_id===C.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(T==null?void 0:T.max_questions_custom_quiz)||"N/A"})},className:"text-center"},{key:"max_team_members",header:"Max Team Members",render:C=>{const T=t.find(A=>A.plan_id===C.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(T==null?void 0:T.max_team_members)||"N/A"})},className:"text-center"},{key:"question_tier_access",header:"Question Tiers",render:C=>{var A;const T=t.find(L=>L.plan_id===C.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(A=T==null?void 0:T.question_tier_access)==null?void 0:A.map(L=>a.jsx("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs font-medium text-gray-600 mr-1 mb-1 capitalize",children:L},L))})}},{key:"feature_access",header:"Feature Access",render:C=>{const T=t.find(A=>A.plan_id===C.id);return a.jsxs("div",{className:"text-sm text-gray-900 flex flex-col space-y-1",children:[a.jsxs("span",{className:"flex items-center",children:[T!=null&&T.allow_quick_start_quiz?a.jsx(Ot,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx($s,{className:"h-4 w-4 text-red-500 mr-1"})," Quick Start Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[T!=null&&T.allow_create_own_quiz?a.jsx(Ot,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx($s,{className:"h-4 w-4 text-red-500 mr-1"})," Custom Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[T!=null&&T.allow_study_schedule_quiz?a.jsx(Ot,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx($s,{className:"h-4 w-4 text-red-500 mr-1"})," Study Schedule"]}),a.jsxs("span",{className:"flex items-center",children:[T!=null&&T.allow_analytics_access?a.jsx(Ot,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx($s,{className:"h-4 w-4 text-red-500 mr-1"})," Analytics Access"]})]})}},{key:"actions",header:"",render:C=>a.jsx("button",{onClick:()=>j(C),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),className:"text-right"}];return r?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading plans..."})}):n?a.jsx(he,{children:a.jsx("div",{className:"p-6",children:a.jsx(Ue,{type:"error",message:n,className:"mb-6"})})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plan Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage subscription plans and their associated settings."})]}),a.jsx(Zn,{variant:"primary",icon:Vi,onClick:N,children:"Add New Plan"})]}),a.jsx(sn,{columns:D,data:e,emptyState:{title:"No Plans Found",description:"No subscription plans are configured in the system."}}),a.jsxs(kn,{isOpen:i,onClose:()=>o(!1),title:l?`Edit Plan: ${l.name}`:"Add New Plan",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Zn,{variant:"secondary",onClick:()=>o(!1),disabled:w,children:"Cancel"}),a.jsx(Zn,{variant:"primary",onClick:P,loading:w,children:"Save Changes"})]}),children:[v&&a.jsx(Ue,{type:"error",message:v,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plan Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(lt,{label:"Plan ID",id:"planId",type:"text",value:f.id||"",onChange:C=>h({...f,id:C}),required:!0,disabled:!!l,helpText:l?void 0:"Unique identifier for the plan (e.g., 'free', 'pro')"}),a.jsx(lt,{label:"Plan Name",id:"planName",type:"text",value:f.name||"",onChange:C=>h({...f,name:C}),required:!0}),a.jsx(lt,{label:"Is Enabled",id:"planEnabled",type:"select",value:((O=f.is_enabled)==null?void 0:O.toString())||"true",onChange:C=>h({...f,is_enabled:C==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]}),a.jsx(lt,{label:"Description",id:"planDescription",type:"textarea",value:f.description||"",onChange:C=>h({...f,description:C})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),a.jsx(Zn,{variant:"secondary",icon:Vi,size:"sm",onClick:S,children:"Add Price"})]}),x.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(gS,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No pricing configured"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add pricing options for this plan"})]}):a.jsx("div",{className:"space-y-4",children:x.map((C,T)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Price Option ",T+1]}),a.jsx(Zn,{variant:"danger",size:"sm",icon:Hi,onClick:()=>E(T),children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(lt,{label:"Currency",id:`currency-${T}`,type:"select",value:C.currency,onChange:A=>k(T,{currency:A}),options:[{value:"USD",label:"USD ($)"},{value:"GBP",label:"GBP ()"},{value:"AUD",label:"AUD (A$)"},{value:"CAD",label:"CAD (C$)"}],required:!0}),a.jsx(lt,{label:"Billing Interval",id:`interval-${T}`,type:"select",value:C.interval,onChange:A=>k(T,{interval:A}),options:[{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],required:!0}),a.jsx(lt,{label:"Amount",id:`amount-${T}`,type:"number",value:C.amount,onChange:A=>k(T,{amount:parseFloat(A)||0}),min:0,required:!0})]}),a.jsx("div",{className:"mt-4",children:a.jsx(lt,{label:"Stripe Price ID (Optional)",id:`stripe-${T}`,type:"text",value:C.stripe_price_id||"",onChange:A=>k(T,{stripe_price_id:A}),helpText:"Will be populated automatically when synced with Stripe"})})]},T))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(lt,{label:"Max Questions Custom Quiz",id:"maxQuestionsCustomQuiz",type:"number",value:m.max_questions_custom_quiz||0,onChange:C=>p({...m,max_questions_custom_quiz:parseInt(C)}),min:0,required:!0}),a.jsx(lt,{label:"Max Team Members",id:"maxTeamMembers",type:"number",value:m.max_team_members||0,onChange:C=>p({...m,max_team_members:parseInt(C)}),min:0,required:!0}),a.jsx(lt,{label:"Question Tier Access (comma-separated)",id:"questionTierAccess",type:"text",value:((z=m.question_tier_access)==null?void 0:z.join(", "))||"",onChange:C=>p({...m,question_tier_access:C.split(",").map(T=>T.trim())}),helpText:"e.g., free, pro, enterprise"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Feature Access"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(lt,{label:"Allow Quick Start Quiz",id:"allowQuickStartQuiz",type:"select",value:((R=m.allow_quick_start_quiz)==null?void 0:R.toString())||"true",onChange:C=>p({...m,allow_quick_start_quiz:C==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(lt,{label:"Allow Create Own Quiz",id:"allowCreateOwnQuiz",type:"select",value:((B=m.allow_create_own_quiz)==null?void 0:B.toString())||"true",onChange:C=>p({...m,allow_create_own_quiz:C==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(lt,{label:"Allow Study Schedule Quiz",id:"allowStudyScheduleQuiz",type:"select",value:((F=m.allow_study_schedule_quiz)==null?void 0:F.toString())||"false",onChange:C=>p({...m,allow_study_schedule_quiz:C==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(lt,{label:"Allow Analytics Access",id:"allowAnalyticsAccess",type:"select",value:((I=m.allow_analytics_access)==null?void 0:I.toString())||"false",onChange:C=>p({...m,allow_analytics_access:C==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]})]})]})]})]})]})]})})}const p1=[{value:"total_quizzes_completed",label:"Total Quizzes Completed"},{value:"total_points_earned",label:"Total Points Earned"},{value:"longest_streak",label:"Longest Study Streak"},{value:"total_questions_answered",label:"Total Questions Answered"},{value:"perfect_quiz",label:"Perfect Quiz Score"},{value:"speed_demon",label:"Speed Demon (Fast Completion)"},{value:"accuracy_book_ruth",label:"Ruth Book Accuracy"},{value:"accuracy_book_esther",label:"Esther Book Accuracy"},{value:"accuracy_book_daniel",label:"Daniel Book Accuracy"},{value:"accuracy_chapter",label:"Chapter Accuracy"},{value:"accuracy_tier_free",label:"Free Tier Accuracy"},{value:"accuracy_tier_pro",label:"Pro Tier Accuracy"},{value:"accuracy_tier_enterprise",label:"Enterprise Tier Accuracy"}];function mK(){const{achievements:e,loading:t,error:r,refreshGamificationData:n}=K0(),[s,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),[d,f]=b.useState(null),[h,m]=b.useState(!1),p=()=>{l(null),u({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),f(null),i(!0)},x=j=>{l(j),u({name:j.name,description:j.description,criteria_type:j.criteria_type,criteria_value:j.criteria_value,badge_icon_url:j.badge_icon_url}),f(null),i(!0)},y=async()=>{if(f(null),m(!0),!c.name.trim()||!c.description.trim()||c.criteria_value<=0){f("Please fill in all required fields with valid values."),m(!1);return}try{if(o){const{error:j}=await Q.from("achievements").update({name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}).eq("id",o.id);if(j)throw j;console.log(" Achievement updated successfully")}else{const{error:j}=await Q.from("achievements").insert([{name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}]);if(j)throw j;console.log(" Achievement created successfully")}i(!1),await n()}catch(j){console.error("Error saving achievement:",j),f(j.message||"Failed to save achievement.")}finally{m(!1)}},v=async(j,N)=>{if(confirm(`Are you sure you want to delete the achievement "${N}"? This action cannot be undone.`))try{m(!0);const{error:S}=await Q.from("user_achievements").delete().eq("achievement_id",j);S&&console.warn("Warning: Could not delete user achievements:",S);const{error:k}=await Q.from("achievements").delete().eq("id",j);if(k)throw k;console.log(" Achievement deleted successfully"),await n()}catch(S){console.error("Error deleting achievement:",S),f(S.message||"Failed to delete achievement.")}finally{m(!1)}},g=j=>{switch(j){case"total_quizzes_completed":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"total_points_earned":return a.jsx(zt,{className:"h-4 w-4 text-yellow-600"});case"longest_streak":return a.jsx(Pn,{className:"h-4 w-4 text-orange-600"});case"total_questions_answered":return a.jsx(it,{className:"h-4 w-4 text-green-600"});case"perfect_quiz":return a.jsx(Ki,{className:"h-4 w-4 text-purple-600"});case"speed_demon":return a.jsx(Ie,{className:"h-4 w-4 text-red-600"});default:return a.jsx(mr,{className:"h-4 w-4 text-gray-600"})}},w=j=>{const N=p1.find(S=>S.value===j);return(N==null?void 0:N.label)||j},_=[{key:"badge",header:"Badge",render:j=>a.jsxs("div",{className:"flex items-center justify-center",children:[j.badge_icon_url?a.jsx("img",{src:j.badge_icon_url,alt:j.name,className:"h-8 w-8 rounded-full",onError:N=>{var S;N.currentTarget.style.display="none",(S=N.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,a.jsx("div",{className:`h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center ${j.badge_icon_url?"hidden":""}`,children:a.jsx(mr,{className:"h-5 w-5 text-gray-600"})})]}),className:"text-center w-16"},{key:"name",header:"Achievement Name",render:j=>a.jsx("div",{className:"font-medium text-gray-900",children:j.name})},{key:"description",header:"Description",render:j=>a.jsx("div",{className:"text-sm text-gray-600 max-w-xs line-clamp-2",children:j.description})},{key:"criteria",header:"Criteria",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[g(j.criteria_type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(j.criteria_type)}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",j.criteria_value]})]})]})},{key:"actions",header:"",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>x(j),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Edit achievement",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>v(j.id,j.name),className:"text-red-600 hover:text-red-700 transition-colors duration-200",title:"Delete achievement",children:a.jsx(Hi,{className:"h-4 w-4"})})]}),className:"text-right"}];return t?a.jsx(he,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})}):a.jsx(he,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Achievement Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage achievements that users can unlock through their quiz activities."})]}),a.jsx(Zn,{variant:"primary",icon:Vi,onClick:p,children:"Add New Achievement"})]}),r&&a.jsx(Ue,{type:"error",message:r,className:"mb-6"}),d&&a.jsx(Ue,{type:"error",message:d,className:"mb-6",dismissible:!0,onDismiss:()=>f(null)}),a.jsx(sn,{columns:_,data:e,loading:t,emptyState:{icon:mr,title:"No Achievements Found",description:"No achievements are configured in the system. Create your first achievement to get started.",action:a.jsx(Zn,{variant:"primary",icon:Vi,onClick:p,children:"Create First Achievement"})}}),a.jsxs(kn,{isOpen:s,onClose:()=>{i(!1),f(null)},title:o?`Edit Achievement: ${o.name}`:"Add New Achievement",maxWidth:"2xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(Zn,{variant:"secondary",onClick:()=>{i(!1),f(null)},disabled:h,children:"Cancel"}),a.jsx(Zn,{variant:"primary",onClick:y,loading:h,disabled:!c.name.trim()||!c.description.trim()||c.criteria_value<=0,children:o?"Update Achievement":"Create Achievement"})]}),children:[d&&a.jsx(Ue,{type:"error",message:d,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(lt,{label:"Achievement Name",id:"achievementName",type:"text",value:c.name,onChange:j=>u({...c,name:j}),placeholder:"e.g., Quiz Master",required:!0}),a.jsx(lt,{label:"Badge Icon URL",id:"badgeIconUrl",type:"text",value:c.badge_icon_url,onChange:j=>u({...c,badge_icon_url:j}),placeholder:"https://example.com/badge.png (optional)",helpText:"Leave empty to use default icon"})]}),a.jsx(lt,{label:"Description",id:"achievementDescription",type:"textarea",value:c.description,onChange:j=>u({...c,description:j}),placeholder:"Describe what the user needs to do to unlock this achievement...",rows:3,required:!0}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(lt,{label:"Criteria Type",id:"criteriaType",type:"select",value:c.criteria_type,onChange:j=>u({...c,criteria_type:j}),options:p1,required:!0}),a.jsx(lt,{label:"Target Value",id:"criteriaValue",type:"number",value:c.criteria_value,onChange:j=>u({...c,criteria_value:parseInt(j)||1}),min:1,required:!0,helpText:"The target value the user must reach to unlock this achievement"})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Preview"}),a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:[c.badge_icon_url?a.jsx("img",{src:c.badge_icon_url,alt:"Badge preview",className:"h-10 w-10 rounded-full",onError:j=>{var N;j.currentTarget.style.display="none",(N=j.currentTarget.nextElementSibling)==null||N.classList.remove("hidden")}}):null,a.jsx(mr,{className:`h-6 w-6 text-gray-600 ${c.badge_icon_url?"hidden":""}`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c.name||"Achievement Name"}),a.jsx("p",{className:"text-sm text-gray-600",children:c.description||"Achievement description will appear here..."}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[g(c.criteria_type),a.jsxs("span",{className:"text-xs text-gray-500",children:[w(c.criteria_type),": ",c.criteria_value]})]})]})]})]})]})]})]})})}function pK(){return a.jsx(T4,{children:a.jsx(YD,{children:a.jsx(JD,{children:a.jsx(jM,{children:a.jsx(EM,{children:a.jsx(_4,{children:a.jsxs(p4,{children:[a.jsx(Se,{path:"/",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/documentation",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/features",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/login",element:a.jsx(YM,{})}),a.jsx(Se,{path:"/signup",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/forgot-password",element:a.jsx(JM,{})}),a.jsx(Se,{path:"/reset-password",element:a.jsx(XM,{})}),a.jsx(Se,{path:"/invitations/accept",element:a.jsx(DW,{})}),a.jsx(Se,{path:"/dashboard",element:a.jsx(ft,{children:a.jsx(rI,{})})}),a.jsx(Se,{path:"/invitations",element:a.jsx(ft,{children:a.jsx(OW,{})})}),a.jsx(Se,{path:"/analytics",element:a.jsx(ft,{allowedTeamRoles:["owner","admin"],children:a.jsx(NW,{})})}),a.jsx(Se,{path:"/team",element:a.jsx(ft,{allowedTeamRoles:["owner","admin"],children:a.jsx(TW,{})})}),a.jsx(Se,{path:"/quiz",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(IW,{})})}),a.jsx(Se,{path:"/quiz/quick-start",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(WW,{})})}),a.jsx(Se,{path:"/quiz/create-own",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(KW,{})})}),a.jsx(Se,{path:"/quiz/study-assignment/:assignmentId",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(HW,{})})}),a.jsx(Se,{path:"/quiz/runner/:quizSessionId",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(yh,{})})}),a.jsx(Se,{path:"/schedule",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(rK,{})})}),a.jsx(Se,{path:"/achievements",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(GW,{})})}),a.jsx(Se,{path:"/leaderboard",element:a.jsx(ft,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(iK,{})})}),a.jsx(Se,{path:"/billing",element:a.jsx(ft,{allowedTeamRoles:["owner"],children:a.jsx(PW,{})})}),a.jsx(Se,{path:"/billing/success",element:a.jsx(AW,{})}),a.jsx(Se,{path:"/settings",element:a.jsx(ft,{children:a.jsx(oI,{})})}),a.jsx(Se,{path:"/admin",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(oK,{})})}),a.jsx(Se,{path:"/admin/users",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(cK,{})})}),a.jsx(Se,{path:"/admin/questions",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(dK,{})})}),a.jsx(Se,{path:"/admin/plans",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(hK,{})})}),a.jsx(Se,{path:"/admin/achievements",element:a.jsx(ft,{requireAdmin:!0,children:a.jsx(mK,{})})}),a.jsx(Se,{path:"*",element:a.jsx(Yn,{to:"/",replace:!0})})]})})})})})})})}CN(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(pK,{})}));
